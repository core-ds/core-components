"use strict";(self.webpackChunk_alfalab_core_components=self.webpackChunk_alfalab_core_components||[]).push([[4445],{"./packages/confirmation/src/component.responsive.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{p:function(){return ConfirmationResponsive}});var _home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");__webpack_require__("./node_modules/react/index.js");var _alfalab_core_components_mq__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/mq/modern/index.js"),_desktop__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/confirmation/src/desktop/index.ts"),_mobile__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/confirmation/src/mobile/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["breakpoint","client","defaultMatchMediaValue"],ConfirmationResponsive=function(_ref){var breakpoint=_ref.breakpoint,client=_ref.client,_ref$defaultMatchMedi=_ref.defaultMatchMediaValue,restProps=(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_5__.Z)(_ref,_excluded);return(0,_alfalab_core_components_mq__WEBPACK_IMPORTED_MODULE_1__.useIsDesktop)(breakpoint,void 0===_ref$defaultMatchMedi?void 0===client?void 0:"desktop"===client:_ref$defaultMatchMedi)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_desktop__WEBPACK_IMPORTED_MODULE_2__.ConfirmationDesktop,(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.Z)({},restProps)):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_mobile__WEBPACK_IMPORTED_MODULE_3__.ConfirmationMobile,(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.Z)({breakpoint:breakpoint},restProps))};try{ConfirmationResponsive.displayName="ConfirmationResponsive",ConfirmationResponsive.__docgenInfo={description:"",displayName:"ConfirmationResponsive",props:{className:{defaultValue:null,description:"Сss класс для стилизации общей обёртки",name:"className",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"Дочерние элементы",name:"children",required:!1,type:{name:"ReactNode"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},client:{defaultValue:null,description:"Версия, которая будет использоваться при серверном рендеринге",name:"client",required:!1,type:{name:"enum",value:[{value:'"desktop"'},{value:'"mobile"'}]}},mobile:{defaultValue:null,description:"Мобильная версия компонента для экрана",name:"mobile",required:!1,type:{name:"boolean"}},screen:{defaultValue:null,description:"Экран компонента",name:"screen",required:!0,type:{name:"string"}},countdownDuration:{defaultValue:null,description:"Длительность обратного отсчета на кнопке повторного запроса сообщения, в милисекундах",name:"countdownDuration",required:!1,type:{name:"number"}},phone:{defaultValue:null,description:"Номер телефона, на который отправлен код",name:"phone",required:!1,type:{name:"string"}},requiredCharAmount:{defaultValue:null,description:"Количество символов, которое можно ввести в поле ввода подписания до того, как произойдет автоотправка",name:"requiredCharAmount",required:!1,type:{name:"number"}},alignContent:{defaultValue:null,description:"Позиционирование контента",name:"alignContent",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"left"'}]}},onInputFinished:{defaultValue:null,description:"Обработчик события завершения ввода кода подписания",name:"onInputFinished",required:!0,type:{name:"(code: string) => void"}},onSmsRetryClick:{defaultValue:null,description:'Обработчик события нажатия на кнопку "Запросить код"',name:"onSmsRetryClick",required:!0,type:{name:"() => void"}},clearCodeOnError:{defaultValue:null,description:"Флаг - нужно ли очищать код при возникновении ошибки",name:"clearCodeOnError",required:!1,type:{name:"boolean"}},errorVisibleDuration:{defaultValue:{value:"1300"},description:"Продолжительность отображения ошибки",name:"errorVisibleDuration",required:!1,type:{name:"number"}},state:{defaultValue:null,description:"Состояние компонента",name:"state",required:!0,type:{name:"string"}},texts:{defaultValue:null,description:"Объект с текстами",name:"texts",required:!1,type:{name:"ConfirmationTexts"}},tempBlockDuration:{defaultValue:null,description:"Продолжительность блокировки формы (ms)",name:"tempBlockDuration",required:!1,type:{name:"number"}},blockSmsRetry:{defaultValue:null,description:"Не осталось попыток ввода кода",name:"blockSmsRetry",required:!1,type:{name:"boolean"}},onChangeState:{defaultValue:null,description:"Функция обновления состояния компонента",name:"onChangeState",required:!0,type:{name:"(state: string) => void"}},onChangeScreen:{defaultValue:null,description:"Функция обновления состояния компонента",name:"onChangeScreen",required:!0,type:{name:"(state: string) => void"}},onFatalErrorOkButtonClick:{defaultValue:null,description:'Клик по кнопке "Понятно" на экране фатальной ошибки',name:"onFatalErrorOkButtonClick",required:!1,type:{name:"(() => void)"}},onTempBlockFinished:{defaultValue:null,description:"Временная блокировка формы закончилась",name:"onTempBlockFinished",required:!1,type:{name:"(() => void)"}},getScreensMap:{defaultValue:null,description:"Возвращает объект, где ключ - название экрана (screen), значение - компонент для экрана",name:"getScreensMap",required:!1,type:{name:"((defaultScreensMap: ScreensMap) => ScreensMap)"}},hideCountdownSection:{defaultValue:{value:"false"},description:"Скрыть секцию с повторной отправкой кода",name:"hideCountdownSection",required:!1,type:{name:"boolean"}},initialScreenHintSlot:{defaultValue:null,description:"Слот для контента с подсказкой на главном экране",name:"initialScreenHintSlot",required:!1,type:{name:"ReactNode"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},defaultMatchMediaValue:{defaultValue:{value:"client === undefined ? undefined : client === 'desktop'"},description:"Значение по-умолчанию для хука useMatchMedia\n@deprecated Используйте client",name:"defaultMatchMediaValue",required:!1,type:{name:"boolean | (() => boolean)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/component.responsive.tsx#ConfirmationResponsive"]={docgenInfo:ConfirmationResponsive.__docgenInfo,name:"ConfirmationResponsive",path:"packages/confirmation/src/component.responsive.tsx#ConfirmationResponsive"})}catch(__react_docgen_typescript_loader_error){}},"./packages/confirmation/src/components/base-confirmation/component.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{F:function(){return BaseConfirmation}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),hook=__webpack_require__("./node_modules/@alfalab/hooks/dist/esm/usePrevious/hook.js"),utils=__webpack_require__("./packages/confirmation/src/utils.ts"),mockFn=function(){},ConfirmationContext=(0,react.createContext)({alignContent:"left",texts:{},state:"INITIAL",screen:"INITIAL",requiredCharAmount:5,countdownDuration:utils.yR,timeLeft:utils.yR,tempBlockDuration:utils.s2,phone:"",hideCountdownSection:!1,breakpoint:1024,client:"desktop",initialScreenHintSlot:null,onTempBlockFinished:mockFn,onInputFinished:mockFn,onChangeState:mockFn,onSmsRetryClick:mockFn,onChangeScreen:mockFn,onFatalErrorOkButtonClick:mockFn}),defaultTexts={title:"Введите код из\xa0сообщения",codeError:"Код введён неверно",codeChecking:"",codeSending:"",buttonRetry:"Запросить код повторно",linkToHint:"Не\xa0приходит сообщение?",hintButton:"Вернуться к\xa0вводу кода",noAttemptsLeft:"Не\xa0осталось попыток запроса кода",fatalErrorTitle:"Ввести код больше нельзя",fatalErrorDescription:"Вы\xa0ввели код неверно более 5\xa0раз. В\xa0целях безопасности мы\xa0ограничили дальнейший ввод.",fatalErrorButton:"Понятно",tempBlockTitle:"Превышено количество попыток запроса кода",tempBlockDescription:"Повторное подтверждение кодом будет возможно через 24\xa0часа",codeSended:"Код выслан",countdown:"Запросить повторно можно через",domesticPhone:"8 800 200 00 00",internationalPhone:"+7 495 78 888 78"},defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),modern_mobile=__webpack_require__("./dist/button/modern/mobile/index.js"),desktop=__webpack_require__("./dist/code-input/modern/desktop/index.js"),code_input_modern_mobile=__webpack_require__("./dist/code-input/modern/mobile/index.js"),modern=__webpack_require__("./dist/link/modern/index.js"),typography_modern=__webpack_require__("./dist/typography/modern/index.js"),useLayoutEffect_SAFE_FOR_SSR_hook=__webpack_require__("./node_modules/@alfalab/hooks/dist/esm/useLayoutEffect_SAFE_FOR_SSR/hook.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Header=function(_ref){var mobile=_ref.mobile,children=_ref.children;return(0,jsx_runtime.jsx)(typography_modern.TitleDesktop,{className:classnames_default()("header_ZN_0G","typography_oKWak",(0,defineProperty.Z)({},"typographyMobile_FD5ys",mobile)),tag:"h3",color:"primary",children:children})};try{Header.displayName="Header",Header.__docgenInfo={description:"",displayName:"Header",props:{children:{defaultValue:null,description:"Контент шапки",name:"children",required:!1,type:{name:"ReactNode"}},mobile:{defaultValue:null,description:"Отображать в мобильной версии экран компонента",name:"mobile",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/components/header/component.tsx#Header"]={docgenInfo:Header.__docgenInfo,name:"Header",path:"packages/confirmation/src/components/header/component.tsx#Header"})}catch(__react_docgen_typescript_loader_error){}var button_modern=__webpack_require__("./dist/button/modern/index.js"),spinner_modern=__webpack_require__("./dist/spinner/modern/index.js"),initial_index_module={component:"component_qSN5B",phone:"phone_Z3ZUm",typographyTheme:"typographyTheme_Pi_14",typographyThemeMobile:"typographyThemeMobile__h5ZW",compact:"compact_LIbRg",loaderWrap:"loaderWrap_FwhcX",left:"left_kmaqz",center:"center_CU0cp",codeInput:"codeInput_HZGBZ",smsBtn:"smsBtn_SJnQj",smsComeLink:"smsComeLink_fCGMw",countdownContainer:"countdownContainer_KRt7L",countdownMobile:"countdownMobile_k2JLm",countdownLoaderMobile:"countdownLoaderMobile_Cmsnv",getCodeButton:"getCodeButton_h8KEH",getCodeButtonMobile:"getCodeButtonMobile_bdSnI",containerInput:"containerInput_IUzHX"},CountdownSection=function(_ref){var codeSendHintVisible=_ref.codeSendHintVisible,timePassed=_ref.timePassed,processing=_ref.processing,mobile=_ref.mobile,handleSmsRetryClick=_ref.handleSmsRetryClick,_useContext=(0,react.useContext)(ConfirmationContext),state=_useContext.state,texts=_useContext.texts,timeLeft=_useContext.timeLeft,blockSmsRetry=_useContext.blockSmsRetry,breakpoint=_useContext.breakpoint,client=_useContext.client,renderText=function(text){return(0,jsx_runtime.jsx)(typography_modern.Text,{className:classnames_default()(initial_index_module.countdownContainer,(0,defineProperty.Z)((0,defineProperty.Z)({},initial_index_module.countdownMobile,mobile),initial_index_module.typographyTheme,!mobile)),view:mobile?"primary-small":"primary-medium",tag:"div",children:text})};return codeSendHintVisible?renderText(texts.codeSended):processing?(0,jsx_runtime.jsxs)("div",{className:classnames_default()(initial_index_module.loaderWrap,initial_index_module.countdownContainer,(0,defineProperty.Z)((0,defineProperty.Z)({},initial_index_module.countdownLoaderMobile,mobile),initial_index_module.typographyTheme,!mobile)),children:[(0,jsx_runtime.jsx)(spinner_modern.Spinner,{preset:24,visible:!0}),(0,jsx_runtime.jsx)("span",{className:initial_index_module.loaderText,children:"CODE_CHECKING"===state?texts.codeChecking:texts.codeSending})]}):blockSmsRetry?renderText(texts.noAttemptsLeft):timePassed?(0,jsx_runtime.jsx)(button_modern.Button,{size:mobile?"xs":"xxs",view:"secondary",onClick:handleSmsRetryClick,className:classnames_default()(initial_index_module.getCodeButton,(0,defineProperty.Z)({},initial_index_module.getCodeButtonMobile,mobile)),breakpoint:breakpoint,client:client,children:texts.buttonRetry}):renderText("".concat(texts.countdown," ").concat((0,utils.Ih)(timeLeft)))};try{CountdownSection.displayName="CountdownSection",CountdownSection.__docgenInfo={description:"",displayName:"CountdownSection",props:{codeSendHintVisible:{defaultValue:null,description:"",name:"codeSendHintVisible",required:!0,type:{name:"boolean"}},timePassed:{defaultValue:null,description:"",name:"timePassed",required:!0,type:{name:"boolean"}},processing:{defaultValue:null,description:"",name:"processing",required:!0,type:{name:"boolean"}},mobile:{defaultValue:null,description:"",name:"mobile",required:!1,type:{name:"boolean"}},handleSmsRetryClick:{defaultValue:null,description:"",name:"handleSmsRetryClick",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/components/screens/initial/countdown-section.tsx#CountdownSection"]={docgenInfo:CountdownSection.__docgenInfo,name:"CountdownSection",path:"packages/confirmation/src/components/screens/initial/countdown-section.tsx#CountdownSection"})}catch(__react_docgen_typescript_loader_error){}var Initial=function(_ref){var mobile=_ref.mobile,_useContext=(0,react.useContext)(ConfirmationContext),state=_useContext.state,alignContent=_useContext.alignContent,texts=_useContext.texts,requiredCharAmount=_useContext.requiredCharAmount,timeLeft=_useContext.timeLeft,phone=_useContext.phone,clearCodeOnError=_useContext.clearCodeOnError,hideCountdownSection=_useContext.hideCountdownSection,initialScreenHintSlot=_useContext.initialScreenHintSlot,errorVisibleDuration=_useContext.errorVisibleDuration,onChangeState=_useContext.onChangeState,onInputFinished=_useContext.onInputFinished,onChangeScreen=_useContext.onChangeScreen,onSmsRetryClick=_useContext.onSmsRetryClick,prevState=(0,hook.D)(state),inputRef=(0,react.useRef)(null),_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),codeSendHintVisible=_useState2[0],setCodeSendHintVisible=_useState2[1],timerId=(0,react.useRef)(0),handleSmsHintLinkClick=function(){onChangeScreen("HINT")},clearTimer=(0,react.useCallback)(function(){window.clearTimeout(timerId.current)},[]);(0,react.useEffect)(function(){return inputRef.current&&inputRef.current.focus(),function(){clearTimer()}},[clearTimer]),(0,react.useEffect)(function(){inputRef.current&&("CODE_ERROR"===state&&"CODE_ERROR"!==prevState&&inputRef.current.focus(requiredCharAmount-1),"CODE_SENDING"===prevState&&"CODE_SENDING"!==state&&inputRef.current.focus())},[prevState,state,requiredCharAmount]),(0,useLayoutEffect_SAFE_FOR_SSR_hook.C)(function(){"CODE_SENDING"===prevState&&"CODE_SENDING"!==state&&(setCodeSendHintVisible(!0),clearTimer(),timerId.current=window.setTimeout(function(){setCodeSendHintVisible(!1)},2e3))},[prevState,state,clearTimer]);var processing=["CODE_CHECKING","CODE_SENDING"].includes(state),ComponentCodeInput=mobile?code_input_modern_mobile.CodeInputMobile:desktop.CodeInputDesktop;return(0,jsx_runtime.jsxs)("div",{className:classnames_default()(initial_index_module.component,initial_index_module[alignContent]),children:[(0,jsx_runtime.jsx)(Header,{mobile:mobile,children:texts.title}),phone?(0,jsx_runtime.jsxs)(typography_modern.Text,{view:"primary-medium",color:"primary",className:classnames_default()(initial_index_module.phone,(0,defineProperty.Z)((0,defineProperty.Z)({},initial_index_module.typographyTheme,!mobile),initial_index_module.typographyThemeMobile,mobile)),children:["Код отправлен на ",phone]}):null,(0,jsx_runtime.jsx)(ComponentCodeInput,{disabled:processing,error:"CODE_ERROR"===state&&(texts.codeError||!0),ref:inputRef,fields:requiredCharAmount,className:classnames_default()(initial_index_module.containerInput,initial_index_module.codeInput),onComplete:function(code){onInputFinished(code)},onChange:function(){"CODE_ERROR"===state&&onChangeState("INITIAL")},clearCodeOnError:clearCodeOnError,errorVisibleDuration:errorVisibleDuration,onErrorAnimationEnd:function(){clearCodeOnError&&"INITIAL"!==state&&onChangeState("INITIAL")}}),!hideCountdownSection&&(0,jsx_runtime.jsx)(CountdownSection,{processing:processing,timePassed:0===timeLeft,codeSendHintVisible:codeSendHintVisible,handleSmsRetryClick:function(){inputRef.current&&inputRef.current.reset(),onSmsRetryClick()},mobile:mobile}),initialScreenHintSlot||(mobile?(0,jsx_runtime.jsx)(modern_mobile.ButtonMobile,{onClick:handleSmsHintLinkClick,className:initial_index_module.smsBtn,view:"text",size:"xs",children:texts.linkToHint}):(0,jsx_runtime.jsx)(modern.Link,{onClick:handleSmsHintLinkClick,className:initial_index_module.smsComeLink,view:mobile?"primary":"secondary",pseudo:!0,children:texts.linkToHint}))]})};try{Initial.displayName="Initial",Initial.__docgenInfo={description:"",displayName:"Initial",props:{mobile:{defaultValue:null,description:"Отображать в мобильной версии экран компонента",name:"mobile",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/components/screens/initial/component.tsx#Initial"]={docgenInfo:Initial.__docgenInfo,name:"Initial",path:"packages/confirmation/src/components/screens/initial/component.tsx#Initial"})}catch(__react_docgen_typescript_loader_error){}var hint_index_module={component:"component_INcuh",center:"center_evuGf",text:"text_zYz7a",typographyTheme:"typographyTheme_yDE4v",typographyThemeMobile:"typographyThemeMobile_qbwCt",phonesWrap:"phonesWrap_mk1JS",phoneWrap:"phoneWrap_HDch2",phoneLink:"phoneLink_CT7Za",hintButton:"hintButton_psc2L",phoneContentMobile:"phoneContentMobile_S8rEw"},Hint=function(_ref){var mobile=_ref.mobile,_useContext=(0,react.useContext)(ConfirmationContext),alignContent=_useContext.alignContent,texts=_useContext.texts,onChangeScreen=_useContext.onChangeScreen,onChangeState=_useContext.onChangeState,breakpoint=_useContext.breakpoint,client=_useContext.client,_texts$domesticPhone=texts.domesticPhone,domesticPhone=void 0===_texts$domesticPhone?"":_texts$domesticPhone,_texts$internationalP=texts.internationalPhone,internationalPhone=void 0===_texts$internationalP?"":_texts$internationalP,hintButton=texts.hintButton;return(0,jsx_runtime.jsxs)("div",{className:classnames_default()(hint_index_module.component,hint_index_module[alignContent]),children:[(0,jsx_runtime.jsx)(Header,{mobile:mobile,children:"Не\xa0приходит сообщение?"}),(0,jsx_runtime.jsx)(typography_modern.Text,{view:"primary-medium",color:"primary",className:classnames_default()(hint_index_module.text,(0,defineProperty.Z)((0,defineProperty.Z)({},hint_index_module.typographyTheme,!mobile),hint_index_module.typographyThemeMobile,mobile)),children:"Если у\xa0вас изменился номер телефона, позвоните нам или обратитесь в\xa0любое отделение банка."}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()(hint_index_module.phonesWrap,(0,defineProperty.Z)({},hint_index_module.phonesWrapMobile,mobile)),children:[(0,jsx_runtime.jsxs)("div",{className:classnames_default()(hint_index_module.phoneWrap,(0,defineProperty.Z)({},hint_index_module.phoneContentMobile,mobile)),children:[(0,jsx_runtime.jsx)(modern.Link,{href:(0,utils.mz)(domesticPhone),underline:!1,className:classnames_default()(hint_index_module.phoneLink,(0,defineProperty.Z)({},hint_index_module.typographyThemeMobile,mobile)),children:domesticPhone}),(0,jsx_runtime.jsx)(typography_modern.Text,{view:"primary-medium",color:"primary",className:classnames_default()(hint_index_module.text,(0,defineProperty.Z)((0,defineProperty.Z)({},hint_index_module.typographyTheme,!mobile),hint_index_module.typographyThemeMobile,mobile)),children:mobile?"Для\xa0звонков по\xa0России":" —\xa0для звонков по\xa0России"})]}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()(hint_index_module.phoneWrap,(0,defineProperty.Z)({},hint_index_module.phoneContentMobile,mobile)),children:[(0,jsx_runtime.jsx)(modern.Link,{href:(0,utils.mz)(internationalPhone),underline:!1,className:classnames_default()(hint_index_module.phoneLink,(0,defineProperty.Z)({},hint_index_module.typographyThemeMobile,mobile)),children:internationalPhone}),(0,jsx_runtime.jsx)(typography_modern.Text,{view:"primary-medium",color:"primary",className:classnames_default()(hint_index_module.text,(0,defineProperty.Z)((0,defineProperty.Z)({},hint_index_module.typographyTheme,!mobile),hint_index_module.typographyThemeMobile,mobile)),children:mobile?"В\xa0Москве и\xa0за\xa0границей":" —\xa0в\xa0Москве и\xa0за\xa0границей"})]})]}),(0,jsx_runtime.jsx)(typography_modern.Text,{view:"primary-medium",color:"primary",className:classnames_default()(hint_index_module.text,(0,defineProperty.Z)((0,defineProperty.Z)({},hint_index_module.typographyTheme,!mobile),hint_index_module.typographyThemeMobile,mobile)),children:"Если номер не\xa0менялся, возможно, перегружен сервис отправки сообщений. Попробуйте повторить действие через несколько минут."}),(0,jsx_runtime.jsx)(button_modern.Button,{size:mobile?"xs":"s",view:"secondary",onClick:function(){onChangeScreen("INITIAL"),onChangeState("INITIAL")},className:hint_index_module.hintButton,breakpoint:breakpoint,client:client,children:hintButton})]})};try{Hint.displayName="Hint",Hint.__docgenInfo={description:"",displayName:"Hint",props:{mobile:{defaultValue:null,description:"Отображать в мобильной версии экран компонента",name:"mobile",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/components/screens/hint/component.tsx#Hint"]={docgenInfo:Hint.__docgenInfo,name:"Hint",path:"packages/confirmation/src/components/screens/hint/component.tsx#Hint"})}catch(__react_docgen_typescript_loader_error){}var fatal_error_index_module={component:"component_Sm4Ct",typographyTheme:"typographyTheme_l4E5K",typographyThemeMobile:"typographyThemeMobile_DAZnk",left:"left_dVeU0",center:"center_TCkjT",button:"button_ON7yD"},FatalError=function(_ref){var mobile=_ref.mobile,_useContext=(0,react.useContext)(ConfirmationContext),alignContent=_useContext.alignContent,texts=_useContext.texts,onFatalErrorOkButtonClick=_useContext.onFatalErrorOkButtonClick,breakpoint=_useContext.breakpoint,client=_useContext.client;return(0,jsx_runtime.jsxs)("div",{className:classnames_default()("component_Sm4Ct",fatal_error_index_module[alignContent]),children:[(0,jsx_runtime.jsx)(Header,{mobile:mobile,children:texts.fatalErrorTitle}),(0,jsx_runtime.jsx)(typography_modern.Text,{view:"primary-medium",color:"primary",className:classnames_default()((0,defineProperty.Z)((0,defineProperty.Z)({},"typographyTheme_l4E5K",!mobile),"typographyThemeMobile_DAZnk",mobile)),children:texts.fatalErrorDescription}),(0,jsx_runtime.jsx)(button_modern.Button,{size:mobile?"xs":"s",view:"secondary",onClick:onFatalErrorOkButtonClick,className:"button_ON7yD",breakpoint:breakpoint,client:client,children:texts.fatalErrorButton})]})};try{FatalError.displayName="FatalError",FatalError.__docgenInfo={description:"",displayName:"FatalError",props:{mobile:{defaultValue:null,description:"Отображать в мобильной версии экран компонента",name:"mobile",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/components/screens/fatal-error/component.tsx#FatalError"]={docgenInfo:FatalError.__docgenInfo,name:"FatalError",path:"packages/confirmation/src/components/screens/fatal-error/component.tsx#FatalError"})}catch(__react_docgen_typescript_loader_error){}var CIRCUMFERENCE=14*Math.PI,CountdownLoader=function(_ref){var progress=_ref.progress,className=_ref.className,strokeDasharray=CIRCUMFERENCE.toFixed(2),strokeDashoffset=(Math.min(progress,1)*CIRCUMFERENCE).toFixed(2);return(0,jsx_runtime.jsx)("svg",{width:16,height:16,viewBox:"0 0 ".concat(16," ").concat(16),className:className,children:(0,jsx_runtime.jsx)("circle",{cx:8,cy:8,r:7,strokeDasharray:strokeDasharray,strokeDashoffset:strokeDashoffset,transform:"rotate(-90 ".concat(8," ").concat(8,")"),className:"circle_l0DaD"})})};try{CountdownLoader.displayName="CountdownLoader",CountdownLoader.__docgenInfo={description:"",displayName:"CountdownLoader",props:{progress:{defaultValue:null,description:"",name:"progress",required:!0,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/components/countdown-loader/component.tsx#CountdownLoader"]={docgenInfo:CountdownLoader.__docgenInfo,name:"CountdownLoader",path:"packages/confirmation/src/components/countdown-loader/component.tsx#CountdownLoader"})}catch(__react_docgen_typescript_loader_error){}var temp_block_index_module={component:"component_jY5Gy",center:"center_tRUZH",typographyTheme:"typographyTheme_YYdhe",typographyThemeMobile:"typographyThemeMobile_uBOgy",description:"description_AbXit",countdownWrap:"countdownWrap_LwPfJ",loader:"loader_dlyIX"},TempBlock=function(_ref){var mobile=_ref.mobile,_useContext=(0,react.useContext)(ConfirmationContext),alignContent=_useContext.alignContent,texts=_useContext.texts,tempBlockDuration=_useContext.tempBlockDuration,onChangeScreen=_useContext.onChangeScreen,onTempBlockFinished=_useContext.onTempBlockFinished,_useCountdown=(0,utils.au)(tempBlockDuration),_useCountdown2=(0,slicedToArray.Z)(_useCountdown,2),timeLeft=_useCountdown2[0],startTimer=_useCountdown2[1];return(0,react.useEffect)(function(){startTimer()},[startTimer]),(0,react.useEffect)(function(){0===timeLeft&&onTempBlockFinished&&onTempBlockFinished()},[timeLeft,onChangeScreen,onTempBlockFinished]),(0,jsx_runtime.jsxs)("div",{className:classnames_default()(temp_block_index_module.component,temp_block_index_module[alignContent]),children:[(0,jsx_runtime.jsx)(Header,{mobile:mobile,children:texts.tempBlockTitle}),(0,jsx_runtime.jsx)(typography_modern.Text,{view:"primary-medium",color:"primary",className:classnames_default()(temp_block_index_module.description,(0,defineProperty.Z)((0,defineProperty.Z)({},temp_block_index_module.typographyTheme,!mobile),temp_block_index_module.typographyThemeMobile,mobile)),children:texts.tempBlockDescription}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()(temp_block_index_module.countdownWrap,(0,defineProperty.Z)({},temp_block_index_module.typographyTheme,!mobile)),children:[(0,jsx_runtime.jsx)(CountdownLoader,{progress:1-timeLeft/tempBlockDuration,className:temp_block_index_module.loader}),(0,utils.Ih)(timeLeft)]})]})};try{TempBlock.displayName="TempBlock",TempBlock.__docgenInfo={description:"",displayName:"TempBlock",props:{mobile:{defaultValue:null,description:"Отображать в мобильной версии экран компонента",name:"mobile",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/components/screens/temp-block/component.tsx#TempBlock"]={docgenInfo:TempBlock.__docgenInfo,name:"TempBlock",path:"packages/confirmation/src/components/screens/temp-block/component.tsx#TempBlock"})}catch(__react_docgen_typescript_loader_error){}var _excluded=["state","screen","alignContent","children","requiredCharAmount","countdownDuration","tempBlockDuration","phone","blockSmsRetry","dataTestId","className","getScreensMap","onInputFinished","onChangeState","onSmsRetryClick","onChangeScreen","onFatalErrorOkButtonClick","onTempBlockFinished","mobile","clearCodeOnError","hideCountdownSection","breakpoint","client","initialScreenHintSlot","errorVisibleDuration"],confirmationScreens={INITIAL:Initial,HINT:Hint,FATAL_ERROR:FatalError,TEMP_BLOCK:TempBlock},BaseConfirmation=function(_ref){var state=_ref.state,screen=_ref.screen,_ref$alignContent=_ref.alignContent,_ref$requiredCharAmou=(_ref.children,_ref.requiredCharAmount),_ref$countdownDuratio=_ref.countdownDuration,countdownDuration=void 0===_ref$countdownDuratio?utils.yR:_ref$countdownDuratio,_ref$tempBlockDuratio=_ref.tempBlockDuration,tempBlockDuration=void 0===_ref$tempBlockDuratio?utils.s2:_ref$tempBlockDuratio,phone=_ref.phone,blockSmsRetry=_ref.blockSmsRetry,dataTestId=_ref.dataTestId,className=_ref.className,getScreensMap=_ref.getScreensMap,onInputFinished=_ref.onInputFinished,onChangeState=_ref.onChangeState,onSmsRetryClick=_ref.onSmsRetryClick,onChangeScreen=_ref.onChangeScreen,onFatalErrorOkButtonClick=_ref.onFatalErrorOkButtonClick,onTempBlockFinished=_ref.onTempBlockFinished,mobile=_ref.mobile,_ref$clearCodeOnError=_ref.clearCodeOnError,_ref$hideCountdownSec=_ref.hideCountdownSection,breakpoint=_ref.breakpoint,client=_ref.client,initialScreenHintSlot=_ref.initialScreenHintSlot,errorVisibleDuration=_ref.errorVisibleDuration,restProps=(0,objectWithoutProperties.Z)(_ref,_excluded),_useCountdown=(0,utils.au)(countdownDuration),_useCountdown2=(0,slicedToArray.Z)(_useCountdown,3),timeLeft=_useCountdown2[0],startTimer=_useCountdown2[1],stopTimer=_useCountdown2[2],prevState=(0,hook.D)(state);(0,react.useEffect)(function(){startTimer()},[startTimer]),(0,react.useEffect)(function(){"INITIAL"===state&&"CODE_SENDING"===prevState&&startTimer()},[state,prevState,startTimer]),(0,react.useEffect)(function(){(!["INITIAL","HINT","TEMP_BLOCK"].includes(screen)||blockSmsRetry)&&stopTimer()},[state,screen,blockSmsRetry,stopTimer]);var contextValue={hideCountdownSection:void 0!==_ref$hideCountdownSec&&_ref$hideCountdownSec,alignContent:void 0===_ref$alignContent?"left":_ref$alignContent,texts:(0,objectSpread2.Z)((0,objectSpread2.Z)({},defaultTexts),restProps.texts),state:state,screen:screen,requiredCharAmount:void 0===_ref$requiredCharAmou?5:_ref$requiredCharAmou,countdownDuration:countdownDuration,timeLeft:timeLeft,tempBlockDuration:tempBlockDuration,phone:phone,blockSmsRetry:blockSmsRetry,breakpoint:breakpoint,client:client,onTempBlockFinished:onTempBlockFinished,onChangeState:onChangeState,onChangeScreen:onChangeScreen,clearCodeOnError:void 0===_ref$clearCodeOnError||_ref$clearCodeOnError,errorVisibleDuration:errorVisibleDuration,initialScreenHintSlot:initialScreenHintSlot,onInputFinished:function(code){onChangeState("CODE_CHECKING"),onInputFinished(code)},onSmsRetryClick:function(){onChangeState("CODE_SENDING"),onSmsRetryClick()},onFatalErrorOkButtonClick:function(){onFatalErrorOkButtonClick&&onFatalErrorOkButtonClick()}},CurrentScreen=((0,react.useMemo)(function(){return getScreensMap&&getScreensMap(confirmationScreens)},[getScreensMap])||confirmationScreens)[screen];return(0,jsx_runtime.jsx)(ConfirmationContext.Provider,{value:contextValue,children:(0,jsx_runtime.jsx)("div",{className:classnames_default()("component_GvAjb",className),"data-test-id":dataTestId,children:CurrentScreen&&(0,jsx_runtime.jsx)(CurrentScreen,{mobile:mobile})})})};try{BaseConfirmation.displayName="BaseConfirmation",BaseConfirmation.__docgenInfo={description:"",displayName:"BaseConfirmation",props:{screen:{defaultValue:null,description:"Экран компонента",name:"screen",required:!0,type:{name:"string"}},state:{defaultValue:null,description:"Состояние компонента",name:"state",required:!0,type:{name:"string"}},mobile:{defaultValue:null,description:"Мобильная версия компонента для экрана",name:"mobile",required:!1,type:{name:"boolean"}},alignContent:{defaultValue:{value:"left"},description:"Позиционирование контента",name:"alignContent",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"left"'}]}},texts:{defaultValue:null,description:"Объект с текстами",name:"texts",required:!1,type:{name:"ConfirmationTexts"}},requiredCharAmount:{defaultValue:{value:"5"},description:"Количество символов, которое можно ввести в поле ввода подписания до того, как произойдет автоотправка",name:"requiredCharAmount",required:!1,type:{name:"number"}},countdownDuration:{defaultValue:{value:"60 * 1000"},description:"Длительность обратного отсчета на кнопке повторного запроса сообщения, в милисекундах",name:"countdownDuration",required:!1,type:{name:"number"}},tempBlockDuration:{defaultValue:{value:"24 * 60 * 60 * 1000"},description:"Продолжительность блокировки формы (ms)",name:"tempBlockDuration",required:!1,type:{name:"number"}},phone:{defaultValue:null,description:"Номер телефона, на который отправлен код",name:"phone",required:!1,type:{name:"string"}},blockSmsRetry:{defaultValue:null,description:"Не осталось попыток ввода кода",name:"blockSmsRetry",required:!1,type:{name:"boolean"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"Сss класс для стилизации общей обёртки",name:"className",required:!1,type:{name:"string"}},clearCodeOnError:{defaultValue:{value:"true"},description:"Флаг - нужно ли очищать код при возникновении ошибки",name:"clearCodeOnError",required:!1,type:{name:"boolean"}},onChangeState:{defaultValue:null,description:"Функция обновления состояния компонента",name:"onChangeState",required:!0,type:{name:"(state: string) => void"}},onChangeScreen:{defaultValue:null,description:"Функция обновления состояния компонента",name:"onChangeScreen",required:!0,type:{name:"(state: string) => void"}},onInputFinished:{defaultValue:null,description:"Обработчик события завершения ввода кода подписания",name:"onInputFinished",required:!0,type:{name:"(code: string) => void"}},onSmsRetryClick:{defaultValue:null,description:'Обработчик события нажатия на кнопку "Запросить код"',name:"onSmsRetryClick",required:!0,type:{name:"() => void"}},onFatalErrorOkButtonClick:{defaultValue:null,description:'Клик по кнопке "Понятно" на экране фатальной ошибки',name:"onFatalErrorOkButtonClick",required:!1,type:{name:"(() => void)"}},onTempBlockFinished:{defaultValue:null,description:"Временная блокировка формы закончилась",name:"onTempBlockFinished",required:!1,type:{name:"(() => void)"}},getScreensMap:{defaultValue:null,description:"Возвращает объект, где ключ - название экрана (screen), значение - компонент для экрана",name:"getScreensMap",required:!1,type:{name:"((defaultScreensMap: ScreensMap) => ScreensMap)"}},children:{defaultValue:null,description:"Дочерние элементы",name:"children",required:!1,type:{name:"ReactNode"}},hideCountdownSection:{defaultValue:{value:"false"},description:"Скрыть секцию с повторной отправкой кода",name:"hideCountdownSection",required:!1,type:{name:"boolean"}},initialScreenHintSlot:{defaultValue:null,description:"Слот для контента с подсказкой на главном экране",name:"initialScreenHintSlot",required:!1,type:{name:"ReactNode"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка для кнопки, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},client:{defaultValue:null,description:"Версия, которая будет использоваться при серверном рендеринге",name:"client",required:!1,type:{name:"enum",value:[{value:'"desktop"'},{value:'"mobile"'}]}},errorVisibleDuration:{defaultValue:{value:"1300"},description:"Продолжительность отображения ошибки",name:"errorVisibleDuration",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/components/base-confirmation/component.tsx#BaseConfirmation"]={docgenInfo:BaseConfirmation.__docgenInfo,name:"BaseConfirmation",path:"packages/confirmation/src/components/base-confirmation/component.tsx#BaseConfirmation"})}catch(__react_docgen_typescript_loader_error){}},"./packages/confirmation/src/desktop/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ConfirmationDesktop:function(){return ConfirmationDesktop},useConfirmation:function(){return utils.pt},useCountdown:function(){return utils.au}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");__webpack_require__("./node_modules/react/index.js");var component=__webpack_require__("./packages/confirmation/src/components/base-confirmation/component.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ConfirmationDesktop=function(props){return(0,jsx_runtime.jsx)(component.F,(0,objectSpread2.Z)({},props))};try{ConfirmationDesktop.displayName="ConfirmationDesktop",ConfirmationDesktop.__docgenInfo={description:"",displayName:"ConfirmationDesktop",props:{className:{defaultValue:null,description:"Сss класс для стилизации общей обёртки",name:"className",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"Дочерние элементы",name:"children",required:!1,type:{name:"ReactNode"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},client:{defaultValue:null,description:"Версия, которая будет использоваться при серверном рендеринге",name:"client",required:!1,type:{name:"enum",value:[{value:'"desktop"'},{value:'"mobile"'}]}},screen:{defaultValue:null,description:"Экран компонента",name:"screen",required:!0,type:{name:"string"}},countdownDuration:{defaultValue:null,description:"Длительность обратного отсчета на кнопке повторного запроса сообщения, в милисекундах",name:"countdownDuration",required:!1,type:{name:"number"}},phone:{defaultValue:null,description:"Номер телефона, на который отправлен код",name:"phone",required:!1,type:{name:"string"}},requiredCharAmount:{defaultValue:null,description:"Количество символов, которое можно ввести в поле ввода подписания до того, как произойдет автоотправка",name:"requiredCharAmount",required:!1,type:{name:"number"}},alignContent:{defaultValue:null,description:"Позиционирование контента",name:"alignContent",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"left"'}]}},onInputFinished:{defaultValue:null,description:"Обработчик события завершения ввода кода подписания",name:"onInputFinished",required:!0,type:{name:"(code: string) => void"}},onSmsRetryClick:{defaultValue:null,description:'Обработчик события нажатия на кнопку "Запросить код"',name:"onSmsRetryClick",required:!0,type:{name:"() => void"}},clearCodeOnError:{defaultValue:null,description:"Флаг - нужно ли очищать код при возникновении ошибки",name:"clearCodeOnError",required:!1,type:{name:"boolean"}},errorVisibleDuration:{defaultValue:{value:"1300"},description:"Продолжительность отображения ошибки",name:"errorVisibleDuration",required:!1,type:{name:"number"}},state:{defaultValue:null,description:"Состояние компонента",name:"state",required:!0,type:{name:"string"}},texts:{defaultValue:null,description:"Объект с текстами",name:"texts",required:!1,type:{name:"ConfirmationTexts"}},tempBlockDuration:{defaultValue:null,description:"Продолжительность блокировки формы (ms)",name:"tempBlockDuration",required:!1,type:{name:"number"}},blockSmsRetry:{defaultValue:null,description:"Не осталось попыток ввода кода",name:"blockSmsRetry",required:!1,type:{name:"boolean"}},onChangeState:{defaultValue:null,description:"Функция обновления состояния компонента",name:"onChangeState",required:!0,type:{name:"(state: string) => void"}},onChangeScreen:{defaultValue:null,description:"Функция обновления состояния компонента",name:"onChangeScreen",required:!0,type:{name:"(state: string) => void"}},onFatalErrorOkButtonClick:{defaultValue:null,description:'Клик по кнопке "Понятно" на экране фатальной ошибки',name:"onFatalErrorOkButtonClick",required:!1,type:{name:"(() => void)"}},onTempBlockFinished:{defaultValue:null,description:"Временная блокировка формы закончилась",name:"onTempBlockFinished",required:!1,type:{name:"(() => void)"}},getScreensMap:{defaultValue:null,description:"Возвращает объект, где ключ - название экрана (screen), значение - компонент для экрана",name:"getScreensMap",required:!1,type:{name:"((defaultScreensMap: ScreensMap) => ScreensMap)"}},hideCountdownSection:{defaultValue:{value:"false"},description:"Скрыть секцию с повторной отправкой кода",name:"hideCountdownSection",required:!1,type:{name:"boolean"}},initialScreenHintSlot:{defaultValue:null,description:"Слот для контента с подсказкой на главном экране",name:"initialScreenHintSlot",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/desktop/component.desktop.tsx#ConfirmationDesktop"]={docgenInfo:ConfirmationDesktop.__docgenInfo,name:"ConfirmationDesktop",path:"packages/confirmation/src/desktop/component.desktop.tsx#ConfirmationDesktop"})}catch(__react_docgen_typescript_loader_error){}var utils=__webpack_require__("./packages/confirmation/src/utils.ts")},"./packages/confirmation/src/mobile/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ConfirmationMobile:function(){return ConfirmationMobile},useConfirmation:function(){return utils.pt},useCountdown:function(){return utils.au}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");__webpack_require__("./node_modules/react/index.js");var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),component=__webpack_require__("./packages/confirmation/src/components/base-confirmation/component.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["className"],ConfirmationMobile=function(_ref){var className=_ref.className,resProps=(0,objectWithoutProperties.Z)(_ref,_excluded);return(0,jsx_runtime.jsx)(component.F,(0,objectSpread2.Z)({mobile:!0,className:classnames_default()(className,"container_kzNT3")},resProps))};try{ConfirmationMobile.displayName="ConfirmationMobile",ConfirmationMobile.__docgenInfo={description:"",displayName:"ConfirmationMobile",props:{className:{defaultValue:null,description:"Сss класс для стилизации общей обёртки",name:"className",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"Дочерние элементы",name:"children",required:!1,type:{name:"ReactNode"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка для кнопки, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},client:{defaultValue:null,description:"Версия, которая будет использоваться при серверном рендеринге",name:"client",required:!1,type:{name:"enum",value:[{value:'"desktop"'},{value:'"mobile"'}]}},screen:{defaultValue:null,description:"Экран компонента",name:"screen",required:!0,type:{name:"string"}},countdownDuration:{defaultValue:null,description:"Длительность обратного отсчета на кнопке повторного запроса сообщения, в милисекундах",name:"countdownDuration",required:!1,type:{name:"number"}},phone:{defaultValue:null,description:"Номер телефона, на который отправлен код",name:"phone",required:!1,type:{name:"string"}},requiredCharAmount:{defaultValue:null,description:"Количество символов, которое можно ввести в поле ввода подписания до того, как произойдет автоотправка",name:"requiredCharAmount",required:!1,type:{name:"number"}},alignContent:{defaultValue:null,description:"Позиционирование контента",name:"alignContent",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"left"'}]}},onInputFinished:{defaultValue:null,description:"Обработчик события завершения ввода кода подписания",name:"onInputFinished",required:!0,type:{name:"(code: string) => void"}},onSmsRetryClick:{defaultValue:null,description:'Обработчик события нажатия на кнопку "Запросить код"',name:"onSmsRetryClick",required:!0,type:{name:"() => void"}},clearCodeOnError:{defaultValue:null,description:"Флаг - нужно ли очищать код при возникновении ошибки",name:"clearCodeOnError",required:!1,type:{name:"boolean"}},errorVisibleDuration:{defaultValue:{value:"1300"},description:"Продолжительность отображения ошибки",name:"errorVisibleDuration",required:!1,type:{name:"number"}},state:{defaultValue:null,description:"Состояние компонента",name:"state",required:!0,type:{name:"string"}},texts:{defaultValue:null,description:"Объект с текстами",name:"texts",required:!1,type:{name:"ConfirmationTexts"}},tempBlockDuration:{defaultValue:null,description:"Продолжительность блокировки формы (ms)",name:"tempBlockDuration",required:!1,type:{name:"number"}},blockSmsRetry:{defaultValue:null,description:"Не осталось попыток ввода кода",name:"blockSmsRetry",required:!1,type:{name:"boolean"}},onChangeState:{defaultValue:null,description:"Функция обновления состояния компонента",name:"onChangeState",required:!0,type:{name:"(state: string) => void"}},onChangeScreen:{defaultValue:null,description:"Функция обновления состояния компонента",name:"onChangeScreen",required:!0,type:{name:"(state: string) => void"}},onFatalErrorOkButtonClick:{defaultValue:null,description:'Клик по кнопке "Понятно" на экране фатальной ошибки',name:"onFatalErrorOkButtonClick",required:!1,type:{name:"(() => void)"}},onTempBlockFinished:{defaultValue:null,description:"Временная блокировка формы закончилась",name:"onTempBlockFinished",required:!1,type:{name:"(() => void)"}},getScreensMap:{defaultValue:null,description:"Возвращает объект, где ключ - название экрана (screen), значение - компонент для экрана",name:"getScreensMap",required:!1,type:{name:"((defaultScreensMap: ScreensMap) => ScreensMap)"}},hideCountdownSection:{defaultValue:{value:"false"},description:"Скрыть секцию с повторной отправкой кода",name:"hideCountdownSection",required:!1,type:{name:"boolean"}},initialScreenHintSlot:{defaultValue:null,description:"Слот для контента с подсказкой на главном экране",name:"initialScreenHintSlot",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/confirmation/src/mobile/component.mobile.tsx#ConfirmationMobile"]={docgenInfo:ConfirmationMobile.__docgenInfo,name:"ConfirmationMobile",path:"packages/confirmation/src/mobile/component.mobile.tsx#ConfirmationMobile"})}catch(__react_docgen_typescript_loader_error){}var utils=__webpack_require__("./packages/confirmation/src/utils.ts")},"./packages/confirmation/src/utils.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ih:function(){return formatMsAsMinutes},au:function(){return useCountdown},mz:function(){return getPhoneHref},pt:function(){return useConfirmation},s2:function(){return ONE_DAY},yR:function(){return ONE_MINUTE}});var _home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function formatMsAsMinutes(ms){var totalSeconds=Math.ceil(ms/1e3),totalMinutes=Math.floor(totalSeconds/60),totalHours=Math.floor(totalMinutes/60),paddedSeconds="00".concat(totalSeconds%60).slice(-2);if(totalHours>0){var _paddedMinutes="00".concat(totalMinutes%60).slice(-2),paddedHours="00".concat(totalHours).slice(-2);return"".concat(paddedHours,":").concat(_paddedMinutes,":").concat(paddedSeconds)}var paddedMinutes="00".concat(totalMinutes).slice(-2);return"".concat(paddedMinutes,":").concat(paddedSeconds)}var useCountdown=function(countdownDuration){var tick=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,timerId=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),start=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),_useState2=(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.Z)(_useState,2),timePassed=_useState2[0],setTimePassed=_useState2[1],stopTimer=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(){window.clearInterval(timerId.current)},[]),updateProgress=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(){var passed=Date.now()-start.current;passed>=countdownDuration?(stopTimer(),setTimePassed(countdownDuration)):setTimePassed(passed)},[countdownDuration,stopTimer]),startTimer=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(){stopTimer(),start.current=Date.now(),updateProgress(),timerId.current=window.setInterval(updateProgress,tick)},[stopTimer,updateProgress,tick]),timeLeft=countdownDuration-timePassed;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){return function(){stopTimer()}},[stopTimer]),[timeLeft,startTimer,stopTimer]},ONE_DAY=864e5,ONE_MINUTE=6e4,useConfirmation=function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},state=_ref.state,screen=_ref.screen,blockSmsRetry=_ref.blockSmsRetry,_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null!=state?state:"INITIAL"),_useState4=(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.Z)(_useState3,2),confirmationState=_useState4[0],setConfirmationState=_useState4[1],_useState5=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null!=screen?screen:"INITIAL"),_useState6=(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.Z)(_useState5,2),confirmationScreen=_useState6[0],setConfirmationScreen=_useState6[1],_useState7=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null!=blockSmsRetry&&blockSmsRetry),_useState8=(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.Z)(_useState7,2);return{confirmationState:confirmationState,confirmationScreen:confirmationScreen,confirmationBlockSmsRetry:_useState8[0],setConfirmationState:setConfirmationState,setConfirmationScreen:setConfirmationScreen,setConfirmationBlockSmsRetry:_useState8[1]}},NON_NUMBER_OR_PLUS_REGEXP=new RegExp(/[^\d+]/g);function getPhoneHref(phone){return"tel:".concat(phone.replace(NON_NUMBER_OR_PLUS_REGEXP,""))}}}]);