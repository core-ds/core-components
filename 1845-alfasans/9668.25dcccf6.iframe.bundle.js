"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9668],{"./packages/select/src/components/optgroup/Component.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{t:function(){return Optgroup}});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),consts=__webpack_require__("./packages/select/src/consts.ts"),index_module={optgroup:"optgroup_q8FGV",label:"label_YEkB6","size-72":"size-72_NrPLV"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Optgroup=function(_ref){var children=_ref.children,className=_ref.className,label=_ref.label,_ref$size=_ref.size;return(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:classnames_default()("optgroup_q8FGV",className,index_module[consts.pM[void 0===_ref$size?48:_ref$size]]),children:(0,jsx_runtime.jsx)("span",{className:"label_YEkB6",children:label})}),children]})};try{Optgroup.displayName="Optgroup",Optgroup.__docgenInfo={description:"",displayName:"Optgroup",props:{className:{defaultValue:null,description:"Дополнительный класс для компонента группы пунктов",name:"className",required:!1,type:{name:"string | undefined"}},size:{defaultValue:{value:"48"},description:"Размер компонента\n@description s, m, l, xl deprecated, используйте вместо них 48, 56, 64, 72 соответственно",name:"size",required:!1,type:{name:'40 | 48 | 56 | 64 | 72 | "s" | "m" | "l" | "xl" | undefined'}},label:{defaultValue:null,description:"Заголовок группы",name:"label",required:!1,type:{name:"string | undefined"}},children:{defaultValue:null,description:"Дочерние элементы",name:"children",required:!1,type:{name:"ReactNode"}},options:{defaultValue:null,description:"Список вариантов выбора в группе",name:"options",required:!1,type:{name:"OptionShape[] | undefined"}},selectedItems:{defaultValue:null,description:"Список выбранных вариантов в группе",name:"selectedItems",required:!1,type:{name:"OptionShape[] | undefined"}},setSelectedItems:{defaultValue:null,description:"Обработчик выбранных вариантов",name:"setSelectedItems",required:!1,type:{name:"((items: OptionShape[]) => void) | undefined"}},search:{defaultValue:null,description:"Значение поиска",name:"search",required:!1,type:{name:"string | undefined"}},multiple:{defaultValue:null,description:"Возможность выбрать несколько значений",name:"multiple",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/select/src/components/optgroup/Component.tsx#Optgroup"]={docgenInfo:Optgroup.__docgenInfo,name:"Optgroup",path:"packages/select/src/components/optgroup/Component.tsx#Optgroup"})}catch(__react_docgen_typescript_loader_error){}},"./packages/select/src/components/options-list/Component.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{M:function(){return OptionsList}});var defineProperty=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectSpread2=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),react_merge_refs_esm=__webpack_require__("./node_modules/react-merge-refs/dist/react-merge-refs.esm.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),modern=__webpack_require__("./dist/scrollbar/modern/index.js"),consts=__webpack_require__("./packages/select/src/consts.ts"),use_native_scrollbar=__webpack_require__("./packages/select/src/hooks/use-native-scrollbar.ts"),utils=__webpack_require__("./packages/select/src/utils.ts"),Component=__webpack_require__("./packages/select/src/components/optgroup/Component.tsx"),index_module={optionsList:"optionsList_dWWP1",optionsListHeader:"optionsListHeader_l6dzu",headerHighlighted:"headerHighlighted_jTkvi",optionsListFooter:"optionsListFooter_RLFvC",withBorder:"withBorder_B_X9i",scrollable:"scrollable_gc3Nx",mask:"mask_fd8mm",emptyPlaceholder:"emptyPlaceholder_rowx2","size-72":"size-72_n4i5F"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),createCounter=function(){var count=0;return function(){return count++}},OptionsList=(0,react.forwardRef)(function(_ref,ref){var _ref$size=_ref.size,size=void 0===_ref$size?48:_ref$size,className=_ref.className,optionGroupClassName=_ref.optionGroupClassName,footerClassName=_ref.footerClassName,scrollbarClassName=_ref.scrollbarClassName,Option=_ref.Option,getOptionProps=_ref.getOptionProps,_ref$groupOptionProps=_ref.groupOptionProps,groupOptionProps=void 0===_ref$groupOptionProps?{}:_ref$groupOptionProps,_ref$options=_ref.options,options=void 0===_ref$options?[]:_ref$options,_ref$Optgroup=_ref.Optgroup,Optgroup=void 0===_ref$Optgroup?Component.t:_ref$Optgroup,dataTestId=_ref.dataTestId,emptyPlaceholder=_ref.emptyPlaceholder,_ref$visibleOptions=_ref.visibleOptions,visibleOptions=void 0===_ref$visibleOptions?consts.j_:_ref$visibleOptions,onScroll=_ref.onScroll,open=_ref.open,header=_ref.header,footer=_ref.footer,_ref$showFooter=_ref.showFooter,optionsListWidth=_ref.optionsListWidth,nativeScrollbarProp=_ref.nativeScrollbar,_ref$flatOptions=_ref.flatOptions,setHighlightedIndex=_ref.setHighlightedIndex,selectedItems=_ref.selectedItems,search=_ref.search,setSelectedItems=_ref.setSelectedItems,multiple=_ref.multiple,_ref$limitDynamicOpti=_ref.limitDynamicOptionGroupSize,client=_ref.client,_useState=(0,react.useState)(!0),_useState2=(0,slicedToArray.Z)(_useState,2),scrollTop=_useState2[0],setScrollTop=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.Z)(_useState3,2),scrollBottom=_useState4[0],setScrollBottom=_useState4[1],nativeScrollbar=(0,use_native_scrollbar.M)({nativeScrollbar:nativeScrollbarProp,client:client}),handleScroll=(0,react.useCallback)(function(event){var scrolledToHeader=event.currentTarget.scrollTop<=0,scrolledToFooter=event.currentTarget.scrollHeight-event.currentTarget.offsetHeight<=event.currentTarget.scrollTop;setScrollTop(scrolledToHeader),setScrollBottom(scrolledToFooter),null==onScroll||onScroll(event)},[onScroll]),renderOption=function(option,index){return(0,jsx_runtime.jsx)(Option,(0,objectSpread2.Z)({},getOptionProps(option,index)),option.key)},listRef=(0,react.useRef)(null),scrollbarRef=(0,react.useRef)(null),counter=createCounter(),renderGroup=function(group){var groupSelectedItems=null==selectedItems?void 0:selectedItems.filter(function(_ref2){var selectedItemKey=_ref2.key;return group.options.some(function(option){return option.key===selectedItemKey})});return(0,jsx_runtime.jsx)(Optgroup,(0,objectSpread2.Z)((0,objectSpread2.Z)({className:optionGroupClassName,label:group.label,size:size,options:group.options,selectedItems:groupSelectedItems,setSelectedItems:function(items){var _selectedItems$filter;setSelectedItems((null!==(_selectedItems$filter=null==selectedItems?void 0:selectedItems.filter(function(_ref3){var selectedItemKey=_ref3.key;return!group.options.some(function(option){return option.key===selectedItemKey})}))&&void 0!==_selectedItems$filter?_selectedItems$filter:[]).concat(items))},search:search,multiple:multiple},groupOptionProps),{},{children:group.options.map(function(option){return renderOption(option,counter())})}),group.label)},actualOptionsCount=void 0!==_ref$limitDynamicOpti&&_ref$limitDynamicOpti&&options.length>0,_useVisibleOptions=(0,utils.kZ)({visibleOptions:visibleOptions,listRef:listRef,open:open,options:options,actualOptionsCount:actualOptionsCount,size:actualOptionsCount?function(){if("string"==typeof size)throw Error("OptionsList with `limitDynamicOptionGroupSize` enabled needs a `size` with number type");return size}():void 0}),_useVisibleOptions2=(0,slicedToArray.Z)(_useVisibleOptions,2),measured=_useVisibleOptions2[0],height=_useVisibleOptions2[1];if(0===options.length&&!emptyPlaceholder&&!header&&!footer)return null;var renderListItems=function(){return(0,jsx_runtime.jsxs)(react.Fragment,{children:[options.map(function(option){return(0,utils.ty)(option)?renderGroup(option):renderOption(option,counter())}),emptyPlaceholder&&0===options.length&&(0,jsx_runtime.jsx)("div",{className:index_module.emptyPlaceholder,children:emptyPlaceholder})]})},resetHighlightedIndex=function(){return null==setHighlightedIndex?void 0:setHighlightedIndex(-1)};return(0,jsx_runtime.jsxs)("div",(0,objectSpread2.Z)((0,objectSpread2.Z)({},nativeScrollbar&&{"data-test-id":dataTestId}),{},{className:classnames_default()(index_module.optionsList,index_module[consts.pM[size]],className),children:[header&&(0,jsx_runtime.jsx)("div",{className:classnames_default()(index_module.optionsListHeader,(0,defineProperty.Z)({},index_module.headerHighlighted,!scrollTop)),onMouseEnter:resetHighlightedIndex,children:header}),nativeScrollbar?(0,jsx_runtime.jsx)("div",{className:classnames_default()(index_module.scrollable,scrollbarClassName),ref:(0,react_merge_refs_esm.Z)([listRef,ref]),onScroll:handleScroll,style:{height:height},children:renderListItems()}):(0,jsx_runtime.jsx)(modern.Scrollbar,{className:classnames_default()(index_module.scrollable,scrollbarClassName),ref:scrollbarRef,style:{height:height},horizontalAutoStretch:"content"===optionsListWidth,scrollableNodeProps:{onScroll:handleScroll,"data-test-id":dataTestId,ref:ref},contentNodeProps:{ref:listRef},maskProps:{className:classnames_default()((0,defineProperty.Z)({},index_module.mask,"content"===optionsListWidth&&!measured))},children:renderListItems()}),(void 0===_ref$showFooter||_ref$showFooter)&&footer&&(0,jsx_runtime.jsx)("div",{onMouseEnter:resetHighlightedIndex,className:classnames_default()(index_module.optionsListFooter,footerClassName,(0,defineProperty.Z)({},index_module.withBorder,visibleOptions&&(void 0===_ref$flatOptions?[]:_ref$flatOptions).length>visibleOptions&&!scrollBottom)),children:footer})]}))});try{OptionsList.displayName="OptionsList",OptionsList.__docgenInfo={description:"",displayName:"OptionsList",props:{client:{defaultValue:null,description:"Версия, которая будет использоваться при серверном рендеринге",name:"client",required:!1,type:{name:'"desktop" | "mobile" | undefined'}},className:{defaultValue:null,description:"Дополнительный класс",name:"className",required:!1,type:{name:"string | undefined"}},optionGroupClassName:{defaultValue:null,description:"Дополнительный класс для компонента группы пунктов",name:"optionGroupClassName",required:!1,type:{name:"string | undefined"}},scrollbarClassName:{defaultValue:null,description:"Дополнительный класс для скроллбара",name:"scrollbarClassName",required:!1,type:{name:"string | undefined"}},footerClassName:{defaultValue:null,description:"Дополнительный класс для футера",name:"footerClassName",required:!1,type:{name:"string | undefined"}},size:{defaultValue:{value:"48"},description:"Размер компонента\n@description s, m, l, xl deprecated, используйте вместо них 48, 56, 64, 72 соответственно",name:"size",required:!1,type:{name:'40 | 48 | 56 | 64 | 72 | "s" | "m" | "l" | "xl" | undefined'}},Option:{defaultValue:null,description:"Компонент пункта меню",name:"Option",required:!0,type:{name:"ComponentType<OptionProps>"}},getOptionProps:{defaultValue:null,description:"Функция для получения пропсов для ячейки",name:"getOptionProps",required:!0,type:{name:"(option: OptionShape, index: number) => OptionProps"}},groupOptionProps:{defaultValue:{value:"{}"},description:"Пропсы, которые будут прокинуты в компонент группового пункта меню",name:"groupOptionProps",required:!1,type:{name:"AnyObject | undefined"}},selectedItems:{defaultValue:null,description:"Список выбранных пунктов",name:"selectedItems",required:!1,type:{name:"OptionShape[] | undefined"}},setSelectedItems:{defaultValue:null,description:"Метод для ручной установки выбранных пунктов",name:"setSelectedItems",required:!0,type:{name:"(selected: OptionShape[]) => void"}},toggleMenu:{defaultValue:null,description:"Метод переключающий видимость выпадающего списка",name:"toggleMenu",required:!0,type:{name:"() => void"}},header:{defaultValue:null,description:"Контент шапки",name:"header",required:!1,type:{name:"ReactNode"}},footer:{defaultValue:null,description:"Контент футера",name:"footer",required:!1,type:{name:"ReactNode"}},options:{defaultValue:{value:"[]"},description:"Список вариантов выбора",name:"options",required:!1,type:{name:"(OptionShape | GroupShape)[] | undefined"}},flatOptions:{defaultValue:{value:"[]"},description:"Плоский список пунктов меню (например, нужно для виртуализации)",name:"flatOptions",required:!1,type:{name:"OptionShape[] | undefined"}},highlightedIndex:{defaultValue:null,description:"Индекс выделенного пункта",name:"highlightedIndex",required:!1,type:{name:"number | undefined"}},open:{defaultValue:null,description:"Флаг, открыто ли меню",name:"open",required:!1,type:{name:"boolean | undefined"}},Optgroup:{defaultValue:{value:"({ children, className, label, size = 48 }: OptgroupProps) => (\n    <React.Fragment>\n        <div className={cn(styles.optgroup, className, styles[SIZE_TO_CLASSNAME_MAP[size]])}>\n            <span className={styles.label}>{label}</span>\n        </div>\n        {children}\n    </React.Fragment>\n)"},description:"Компонент группы",name:"Optgroup",required:!1,type:{name:"ComponentType<OptgroupProps> | undefined"}},emptyPlaceholder:{defaultValue:null,description:"Будет отображаться, если компонент пустой",name:"emptyPlaceholder",required:!1,type:{name:"ReactNode"}},visibleOptions:{defaultValue:{value:"5"},description:"Количество видимых пунктов меню (5 = 5.5)",name:"visibleOptions",required:!1,type:{name:"number | undefined"}},onScroll:{defaultValue:null,description:"Обработчик скрола",name:"onScroll",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void) | undefined"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string | undefined"}},inputProps:{defaultValue:null,description:"Дополнительные пропсы для Input'a, находящегося внутри кастомного OptionsList",name:"inputProps",required:!1,type:{name:"InputProps | undefined"}},showFooter:{defaultValue:{value:"true"},description:"Нужно ли показывать футер",name:"showFooter",required:!1,type:{name:"boolean | undefined"}},nativeScrollbar:{defaultValue:null,description:"Нужно ли использовать нативный скроллбар",name:"nativeScrollbar",required:!1,type:{name:"boolean | undefined"}},optionsListWidth:{defaultValue:null,description:"Управляет шириной выпадающего меню.\nШирину определяет контент, либо ширина равна ширине поля",name:"optionsListWidth",required:!1,type:{name:'"content" | "field" | undefined'}},onApply:{defaultValue:null,description:"Обработчик подтверждения изменений",name:"onApply",required:!1,type:{name:"(() => void) | undefined"}},onClear:{defaultValue:null,description:"Обработчик отмены изменений",name:"onClear",required:!1,type:{name:"(() => void) | undefined"}},setHighlightedIndex:{defaultValue:null,description:"Указать индекс пункта для hover состояния",name:"setHighlightedIndex",required:!1,type:{name:"((index: number) => void) | undefined"}},search:{defaultValue:null,description:"Значение поиска",name:"search",required:!1,type:{name:"string | undefined"}},multiple:{defaultValue:null,description:"Возможность выбрать несколько значений",name:"multiple",required:!1,type:{name:"boolean | undefined"}},limitDynamicOptionGroupSize:{defaultValue:{value:"false"},description:"Ограничение динамического размера группы вариантов выбора",name:"limitDynamicOptionGroupSize",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/select/src/components/options-list/Component.tsx#OptionsList"]={docgenInfo:OptionsList.__docgenInfo,name:"OptionsList",path:"packages/select/src/components/options-list/Component.tsx#OptionsList"})}catch(__react_docgen_typescript_loader_error){}},"./packages/select/src/components/virtual-options-list/Component.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{X:function(){return VirtualOptionsList}});var defineProperty=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectSpread2=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),react_merge_refs_esm=__webpack_require__("./node_modules/react-merge-refs/dist/react-merge-refs.esm.js"),react_virtual=__webpack_require__("./node_modules/react-virtual/dist/react-virtual.mjs"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),modern=__webpack_require__("./dist/scrollbar/modern/index.js"),consts=__webpack_require__("./packages/select/src/consts.ts"),use_native_scrollbar=__webpack_require__("./packages/select/src/hooks/use-native-scrollbar.ts"),utils=__webpack_require__("./packages/select/src/utils.ts"),Component=__webpack_require__("./packages/select/src/components/optgroup/Component.tsx"),index_module={virtualOptionsList:"virtualOptionsList_f8l8Q",virtualOptionsListHeader:"virtualOptionsListHeader_Il1v5",virtualOptionsListFooter:"virtualOptionsListFooter_dRAb1",withBorder:"withBorder_Ufdow",scrollable:"scrollable_D_W_P",inner:"inner_HnsHb",virtualRow:"virtualRow_LhVkm",highlighted:"highlighted_pMwde",emptyPlaceholder:"emptyPlaceholder_VR5vJ","size-72":"size-72_UdCwp"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),VirtualOptionsList=(0,react.forwardRef)(function(_ref,ref){var _ref$size=_ref.size,size=void 0===_ref$size?48:_ref$size,_ref$flatOptions=_ref.flatOptions,flatOptions=void 0===_ref$flatOptions?[]:_ref$flatOptions,_ref$highlightedIndex=_ref.highlightedIndex,highlightedIndex=void 0===_ref$highlightedIndex?-1:_ref$highlightedIndex,optionGroupClassName=_ref.optionGroupClassName,className=_ref.className,getOptionProps=_ref.getOptionProps,_ref$groupOptionProps=_ref.groupOptionProps,groupOptionProps=void 0===_ref$groupOptionProps?{}:_ref$groupOptionProps,Option=_ref.Option,open=_ref.open,_ref$options=_ref.options,options=void 0===_ref$options?[]:_ref$options,_ref$Optgroup=_ref.Optgroup,Optgroup=void 0===_ref$Optgroup?Component.t:_ref$Optgroup,dataTestId=_ref.dataTestId,emptyPlaceholder=_ref.emptyPlaceholder,_ref$visibleOptions=_ref.visibleOptions,visibleOptions=void 0===_ref$visibleOptions?consts.j_:_ref$visibleOptions,header=_ref.header,footer=_ref.footer,_ref$showFooter=_ref.showFooter,optionsListWidth=_ref.optionsListWidth,onScroll=_ref.onScroll,nativeScrollbarProp=_ref.nativeScrollbar,setHighlightedIndex=_ref.setHighlightedIndex,selectedItems=_ref.selectedItems,setSelectedItems=_ref.setSelectedItems,search=_ref.search,multiple=_ref.multiple,scrollbarClassName=_ref.scrollbarClassName,client=_ref.client,listRef=(0,react.useRef)(null),parentRef=(0,react.useRef)(null),scrollbarRef=(0,react.useRef)(null),_useState=(0,react.useState)(""),_useState2=(0,slicedToArray.Z)(_useState,2),visibleOptionsInvalidateKey=_useState2[0],setVisibleOptionsInvalidateKey=_useState2[1],prevHighlightedIndex=(0,utils.D9)(highlightedIndex)||-1,rowVirtualizer=(0,react_virtual.o)({size:flatOptions.length,parentRef:ref||parentRef,overscan:15}),nativeScrollbar=(0,use_native_scrollbar.M)({nativeScrollbar:nativeScrollbarProp,client:client});(0,react.useEffect)(function(){open&&rowVirtualizer.scrollToIndex(highlightedIndex,{align:"end"})},[open]),(0,react.useEffect)(function(){-1===highlightedIndex||rowVirtualizer.virtualItems.some(function(option){return option.index===highlightedIndex})||rowVirtualizer.scrollToIndex(highlightedIndex,{align:"end"})},[highlightedIndex]),(0,react.useEffect)(function(){var notDisabled=function(option){return!option.disabled},firstNonDisabled=flatOptions.findIndex(notDisabled),lastNonDisabled=(0,utils.d_)(flatOptions,notDisabled);prevHighlightedIndex<=firstNonDisabled&&highlightedIndex===flatOptions.length-1&&rowVirtualizer.scrollToIndex(lastNonDisabled),prevHighlightedIndex>=lastNonDisabled&&0===highlightedIndex&&rowVirtualizer.scrollToIndex(0)},[prevHighlightedIndex,highlightedIndex]),(0,react.useEffect)(function(){setVisibleOptionsInvalidateKey(rowVirtualizer.virtualItems.slice(0,Math.min(rowVirtualizer.virtualItems.length,visibleOptions+1)).map(function(item){return flatOptions[item.index].key}).join("_"))},[rowVirtualizer.virtualItems.length,flatOptions]),(0,utils.LI)({visibleOptions:visibleOptions,invalidate:visibleOptionsInvalidateKey,listRef:listRef,styleTargetRef:nativeScrollbar?parentRef:scrollbarRef,open:open});var groupStartIndexes=(0,react.useMemo)(function(){var currentIndex=0;return options.reduce(function(acc,option,index){return(0,utils.ty)(option)?(acc[currentIndex]=index,currentIndex+=option.options.length):currentIndex+=1,acc},{})},[options]),renderList=function(){return rowVirtualizer.virtualItems.map(function(virtualRow){var option=flatOptions[virtualRow.index];return(0,jsx_runtime.jsxs)("div",{ref:virtualRow.measureRef,className:classnames_default()(index_module.virtualRow,(0,defineProperty.Z)({},index_module.highlighted,highlightedIndex===virtualRow.index)),style:{transform:"translateY(".concat(virtualRow.start,"px)")},children:[function(){var group=options[groupStartIndexes[virtualRow.index]];if(!group)return null;var groupSelectedItems=null==selectedItems?void 0:selectedItems.filter(function(_ref2){var selectedItemKey=_ref2.key;return group.options.some(function(opt){return opt.key===selectedItemKey})});return(0,jsx_runtime.jsx)(Optgroup,(0,objectSpread2.Z)({label:group.label,size:size,className:optionGroupClassName,options:group.options,selectedItems:groupSelectedItems,setSelectedItems:function(items){var _selectedItems$filter;setSelectedItems((null!==(_selectedItems$filter=null==selectedItems?void 0:selectedItems.filter(function(_ref3){var selectedItemKey=_ref3.key;return!group.options.some(function(opt){return opt.key===selectedItemKey})}))&&void 0!==_selectedItems$filter?_selectedItems$filter:[]).concat(items))},search:search,multiple:multiple},groupOptionProps))}(),!(0,utils.ty)(option)&&(0,jsx_runtime.jsx)(Option,(0,objectSpread2.Z)({},getOptionProps(option,virtualRow.index)))]},virtualRow.index)})},contentNodeProps={className:index_module.inner,style:{height:"".concat(rowVirtualizer.totalSize,"px")},ref:listRef},resetHighlightedIndex=function(){return null==setHighlightedIndex?void 0:setHighlightedIndex(-1)};return 0!==options.length||emptyPlaceholder?(0,jsx_runtime.jsxs)("div",{className:classnames_default()(index_module.virtualOptionsList,index_module[consts.pM[size]],className),"data-test-id":dataTestId,children:[header&&(0,jsx_runtime.jsx)("div",{className:index_module.virtualOptionsListHeader,onMouseEnter:resetHighlightedIndex,children:header}),nativeScrollbar?visibleOptions?(0,jsx_runtime.jsx)("div",{className:classnames_default()(index_module.scrollable,scrollbarClassName),ref:(0,react_merge_refs_esm.Z)([parentRef,ref]),onScroll:onScroll,children:(0,jsx_runtime.jsx)("div",(0,objectSpread2.Z)((0,objectSpread2.Z)({},contentNodeProps),{},{children:renderList()}))}):(0,jsx_runtime.jsx)("div",(0,objectSpread2.Z)((0,objectSpread2.Z)({},contentNodeProps),{},{children:renderList()})):(0,jsx_runtime.jsx)(modern.Scrollbar,{className:classnames_default()(index_module.scrollable,scrollbarClassName),ref:scrollbarRef,horizontalAutoStretch:"content"===optionsListWidth,scrollableNodeProps:{onScroll:onScroll,ref:parentRef},contentNodeProps:contentNodeProps,children:renderList()}),emptyPlaceholder&&0===options.length&&(0,jsx_runtime.jsx)("div",{className:index_module.emptyPlaceholder,children:emptyPlaceholder}),(void 0===_ref$showFooter||_ref$showFooter)&&footer&&(0,jsx_runtime.jsx)("div",{onMouseEnter:resetHighlightedIndex,className:classnames_default()(index_module.virtualOptionsListFooter,(0,defineProperty.Z)({},index_module.withBorder,visibleOptions&&flatOptions.length>visibleOptions)),children:footer})]}):null});try{VirtualOptionsList.displayName="VirtualOptionsList",VirtualOptionsList.__docgenInfo={description:"",displayName:"VirtualOptionsList",props:{client:{defaultValue:null,description:"Версия, которая будет использоваться при серверном рендеринге",name:"client",required:!1,type:{name:'"desktop" | "mobile" | undefined'}},className:{defaultValue:null,description:"Дополнительный класс",name:"className",required:!1,type:{name:"string | undefined"}},optionGroupClassName:{defaultValue:null,description:"Дополнительный класс для компонента группы пунктов",name:"optionGroupClassName",required:!1,type:{name:"string | undefined"}},scrollbarClassName:{defaultValue:null,description:"Дополнительный класс для скроллбара",name:"scrollbarClassName",required:!1,type:{name:"string | undefined"}},footerClassName:{defaultValue:null,description:"Дополнительный класс для футера",name:"footerClassName",required:!1,type:{name:"string | undefined"}},size:{defaultValue:{value:"48"},description:"Размер компонента\n@description s, m, l, xl deprecated, используйте вместо них 48, 56, 64, 72 соответственно",name:"size",required:!1,type:{name:'40 | 48 | 56 | 64 | 72 | "s" | "m" | "l" | "xl" | undefined'}},Option:{defaultValue:null,description:"Компонент пункта меню",name:"Option",required:!0,type:{name:"ComponentType<OptionProps>"}},getOptionProps:{defaultValue:null,description:"Функция для получения пропсов для ячейки",name:"getOptionProps",required:!0,type:{name:"(option: OptionShape, index: number) => OptionProps"}},groupOptionProps:{defaultValue:{value:"{}"},description:"Пропсы, которые будут прокинуты в компонент группового пункта меню",name:"groupOptionProps",required:!1,type:{name:"AnyObject | undefined"}},selectedItems:{defaultValue:null,description:"Список выбранных пунктов",name:"selectedItems",required:!1,type:{name:"OptionShape[] | undefined"}},setSelectedItems:{defaultValue:null,description:"Метод для ручной установки выбранных пунктов",name:"setSelectedItems",required:!0,type:{name:"(selected: OptionShape[]) => void"}},toggleMenu:{defaultValue:null,description:"Метод переключающий видимость выпадающего списка",name:"toggleMenu",required:!0,type:{name:"() => void"}},header:{defaultValue:null,description:"Контент шапки",name:"header",required:!1,type:{name:"ReactNode"}},footer:{defaultValue:null,description:"Контент футера",name:"footer",required:!1,type:{name:"ReactNode"}},options:{defaultValue:{value:"[]"},description:"Список вариантов выбора",name:"options",required:!1,type:{name:"(OptionShape | GroupShape)[] | undefined"}},flatOptions:{defaultValue:{value:"[]"},description:"Плоский список пунктов меню (например, нужно для виртуализации)",name:"flatOptions",required:!1,type:{name:"OptionShape[] | undefined"}},highlightedIndex:{defaultValue:{value:"-1"},description:"Индекс выделенного пункта",name:"highlightedIndex",required:!1,type:{name:"number | undefined"}},open:{defaultValue:null,description:"Флаг, открыто ли меню",name:"open",required:!1,type:{name:"boolean | undefined"}},Optgroup:{defaultValue:{value:"({ children, className, label, size = 48 }: OptgroupProps) => (\n    <React.Fragment>\n        <div className={cn(styles.optgroup, className, styles[SIZE_TO_CLASSNAME_MAP[size]])}>\n            <span className={styles.label}>{label}</span>\n        </div>\n        {children}\n    </React.Fragment>\n)"},description:"Компонент группы",name:"Optgroup",required:!1,type:{name:"ComponentType<OptgroupProps> | undefined"}},emptyPlaceholder:{defaultValue:null,description:"Будет отображаться, если компонент пустой",name:"emptyPlaceholder",required:!1,type:{name:"ReactNode"}},visibleOptions:{defaultValue:{value:"5"},description:"Количество видимых пунктов меню (5 = 5.5)",name:"visibleOptions",required:!1,type:{name:"number | undefined"}},onScroll:{defaultValue:null,description:"Обработчик скрола",name:"onScroll",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void) | undefined"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string | undefined"}},inputProps:{defaultValue:null,description:"Дополнительные пропсы для Input'a, находящегося внутри кастомного OptionsList",name:"inputProps",required:!1,type:{name:"InputProps | undefined"}},showFooter:{defaultValue:{value:"true"},description:"Нужно ли показывать футер",name:"showFooter",required:!1,type:{name:"boolean | undefined"}},nativeScrollbar:{defaultValue:null,description:"Нужно ли использовать нативный скроллбар",name:"nativeScrollbar",required:!1,type:{name:"boolean | undefined"}},optionsListWidth:{defaultValue:null,description:"Управляет шириной выпадающего меню.\nШирину определяет контент, либо ширина равна ширине поля",name:"optionsListWidth",required:!1,type:{name:'"content" | "field" | undefined'}},onApply:{defaultValue:null,description:"Обработчик подтверждения изменений",name:"onApply",required:!1,type:{name:"(() => void) | undefined"}},onClear:{defaultValue:null,description:"Обработчик отмены изменений",name:"onClear",required:!1,type:{name:"(() => void) | undefined"}},setHighlightedIndex:{defaultValue:null,description:"Указать индекс пункта для hover состояния",name:"setHighlightedIndex",required:!1,type:{name:"((index: number) => void) | undefined"}},search:{defaultValue:null,description:"Значение поиска",name:"search",required:!1,type:{name:"string | undefined"}},multiple:{defaultValue:null,description:"Возможность выбрать несколько значений",name:"multiple",required:!1,type:{name:"boolean | undefined"}},limitDynamicOptionGroupSize:{defaultValue:null,description:"Ограничение динамического размера группы вариантов выбора",name:"limitDynamicOptionGroupSize",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/select/src/components/virtual-options-list/Component.tsx#VirtualOptionsList"]={docgenInfo:VirtualOptionsList.__docgenInfo,name:"VirtualOptionsList",path:"packages/select/src/components/virtual-options-list/Component.tsx#VirtualOptionsList"})}catch(__react_docgen_typescript_loader_error){}},"./packages/select/src/consts.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{_:function(){return DEFAULT_SEPARATOR},j_:function(){return DEFAULT_VISIBLE_OPTIONS},l2:function(){return SELECT_ALL_KEY},pM:function(){return SIZE_TO_CLASSNAME_MAP}});var DEFAULT_VISIBLE_OPTIONS=5,SIZE_TO_CLASSNAME_MAP={s:"size-48",m:"size-56",l:"size-64",xl:"size-72",40:"size-40",48:"size-48",56:"size-56",64:"size-64",72:"size-72"},DEFAULT_SEPARATOR=", ",SELECT_ALL_KEY="select_all"},"./packages/select/src/hooks/use-native-scrollbar.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{M:function(){return useNativeScrollbar}});var _home_runner_work_core_components_core_components_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_alfalab_core_components_mq__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/mq/modern/index.js"),_alfalab_core_components_shared__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/shared/modern/index.js"),useNativeScrollbar=function(params){var scrollbarByProp=params.nativeScrollbar,client=params.client,query="(max-width: 1023px)",_useMatchMedia=(0,_alfalab_core_components_mq__WEBPACK_IMPORTED_MODULE_0__.useMatchMedia)(query,function(){return!(0,_alfalab_core_components_shared__WEBPACK_IMPORTED_MODULE_1__.isClient)()||window.matchMedia(query).matches}),nativeScrollbar=(0,_home_runner_work_core_components_core_components_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_useMatchMedia,1)[0];return scrollbarByProp||"desktop"!==client&&("mobile"===client||nativeScrollbar)}},"./packages/select/src/presets/useSelectWithApply/hook.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{b:function(){return useSelectWithApply}});var toConsumableArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),objectSpread2=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectWithoutProperties=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),slicedToArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),react_fast_compare=__webpack_require__("./node_modules/react-fast-compare/index.js"),react_fast_compare_default=__webpack_require__.n(react_fast_compare),consts=__webpack_require__("./packages/select/src/consts.ts"),utils=__webpack_require__("./packages/select/src/utils.ts"),Component=__webpack_require__("./packages/select/src/components/options-list/Component.tsx"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),desktop=__webpack_require__("./dist/button/modern/desktop/index.js"),modern=__webpack_require__("./dist/shared/modern/index.js"),index_module={footer:"footer__dans","size-72":"size-72_ir4hc",button:"button_UQ5WR"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Component_Footer=function(_ref){var handleApply=_ref.handleApply,handleClear=_ref.handleClear,showClear=_ref.showClear,_ref$selectedDraft=_ref.selectedDraft,dataTestId=_ref.dataTestId,size=_ref.size;return(0,jsx_runtime.jsxs)("div",{tabIndex:0,className:classnames_default()(index_module.footer,size&&index_module[consts.pM[size]]),children:[(0,jsx_runtime.jsx)(desktop.ButtonDesktop,{size:32,view:"primary",onClick:handleApply,dataTestId:(0,modern.getDataTestId)(dataTestId,"apply"),className:index_module.button,children:"Применить"}),showClear&&(void 0===_ref$selectedDraft?[]:_ref$selectedDraft).length>0&&(0,jsx_runtime.jsx)(desktop.ButtonDesktop,{size:32,view:"secondary",onClick:handleClear,dataTestId:(0,modern.getDataTestId)(dataTestId,"clear"),className:index_module.button,children:"Сбросить"})]})};try{Component_Footer.displayName="Footer",Component_Footer.__docgenInfo={description:"",displayName:"Footer",props:{handleClear:{defaultValue:null,description:"",name:"handleClear",required:!1,type:{name:"(() => void) | undefined"}},handleApply:{defaultValue:null,description:"",name:"handleApply",required:!1,type:{name:"(() => void) | undefined"}},showClear:{defaultValue:null,description:"",name:"showClear",required:!1,type:{name:"boolean | undefined"}},selectedDraft:{defaultValue:{value:"[]"},description:"",name:"selectedDraft",required:!1,type:{name:"OptionShape[] | undefined"}},dataTestId:{defaultValue:null,description:"",name:"dataTestId",required:!1,type:{name:"string | undefined"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:'40 | 48 | 56 | 64 | 72 | "s" | "m" | "l" | "xl" | undefined'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/select/src/presets/useSelectWithApply/options-list-with-apply/footer/Component.tsx#Footer"]={docgenInfo:Component_Footer.__docgenInfo,name:"Footer",path:"packages/select/src/presets/useSelectWithApply/options-list-with-apply/footer/Component.tsx#Footer"})}catch(__react_docgen_typescript_loader_error){}var header_Component=__webpack_require__("./packages/select/src/presets/useSelectWithApply/options-list-with-apply/header/Component.tsx"),_excluded=["toggleMenu","getOptionProps","showClear","showHeaderWithSelectAll","selectedDraft","flatOptions","OptionsList","onApply","onClear","onClose","visibleOptions","Footer","Header","header","headerProps","setSelectedDraft","size"],OptionsListWithApply=(0,react.forwardRef)(function(_ref,ref){var toggleMenu=_ref.toggleMenu,defaultGetOptionProps=_ref.getOptionProps,_ref$showClear=_ref.showClear,showHeaderWithSelectAll=_ref.showHeaderWithSelectAll,_ref$selectedDraft=_ref.selectedDraft,selectedDraft=void 0===_ref$selectedDraft?[]:_ref$selectedDraft,_ref$flatOptions=_ref.flatOptions,flatOptions=void 0===_ref$flatOptions?[]:_ref$flatOptions,_ref$OptionsList=_ref.OptionsList,OptionsList=void 0===_ref$OptionsList?Component.M:_ref$OptionsList,_ref$onApply=_ref.onApply,onApply=void 0===_ref$onApply?function(){return null}:_ref$onApply,_ref$onClear=_ref.onClear,onClear=void 0===_ref$onClear?function(){return null}:_ref$onClear,_ref$onClose=_ref.onClose,onClose=void 0===_ref$onClose?function(){return null}:_ref$onClose,_ref$visibleOptions=_ref.visibleOptions,visibleOptions=void 0===_ref$visibleOptions?consts.j_:_ref$visibleOptions,_ref$Footer=_ref.Footer,Footer=void 0===_ref$Footer?Component_Footer:_ref$Footer,_ref$Header=_ref.Header,Header=void 0===_ref$Header?header_Component.h:_ref$Header,header=_ref.header,headerProps=_ref.headerProps,setSelectedDraft=_ref.setSelectedDraft,size=_ref.size,restProps=(0,objectWithoutProperties.Z)(_ref,_excluded),getOptionProps=(0,react.useCallback)(function(option,index){var optionProps=defaultGetOptionProps(option,index),selected=option.key===consts.l2?selectedDraft.length===flatOptions.length-1:selectedDraft.some(function(_ref2){return _ref2.key===option.key});return(0,objectSpread2.Z)((0,objectSpread2.Z)({},optionProps),{},{selected:selected})},[defaultGetOptionProps,flatOptions.length,selectedDraft]),handleApply=(0,react.useCallback)(function(){onApply(),toggleMenu()},[onApply,toggleMenu]),handleClear=(0,react.useCallback)(function(){onClear(),toggleMenu()},[onClear,toggleMenu]),handleSelectedItems=(0,react.useCallback)(function(items){null==setSelectedDraft||setSelectedDraft(items)},[setSelectedDraft]);return(0,react.useEffect)(function(){var activeElement=document.activeElement;return function(){onClose(),activeElement&&activeElement.focus()}},[]),(0,jsx_runtime.jsx)(OptionsList,(0,objectSpread2.Z)((0,objectSpread2.Z)({},restProps),{},{size:size,ref:ref,visibleOptions:visibleOptions,toggleMenu:toggleMenu,flatOptions:flatOptions,getOptionProps:getOptionProps,onApply:handleApply,onClear:handleClear,header:function(){if(showHeaderWithSelectAll||header)return(0,jsx_runtime.jsxs)(react.Fragment,{children:[header,showHeaderWithSelectAll&&flatOptions.length>0&&(0,jsx_runtime.jsx)(Header,(0,objectSpread2.Z)((0,objectSpread2.Z)({},headerProps),{},{size:size}))]})}(),selectedItems:selectedDraft,setSelectedItems:handleSelectedItems,footer:(0,jsx_runtime.jsx)(Footer,{handleApply:handleApply,handleClear:handleClear,showClear:void 0===_ref$showClear||_ref$showClear,selectedDraft:selectedDraft,dataTestId:null==restProps?void 0:restProps.dataTestId,size:size})}))});try{OptionsListWithApply.displayName="OptionsListWithApply",OptionsListWithApply.__docgenInfo={description:"",displayName:"OptionsListWithApply",props:{client:{defaultValue:null,description:"Версия, которая будет использоваться при серверном рендеринге",name:"client",required:!1,type:{name:'"desktop" | "mobile" | undefined'}},className:{defaultValue:null,description:"Дополнительный класс",name:"className",required:!1,type:{name:"string | undefined"}},optionGroupClassName:{defaultValue:null,description:"Дополнительный класс для компонента группы пунктов",name:"optionGroupClassName",required:!1,type:{name:"string | undefined"}},scrollbarClassName:{defaultValue:null,description:"Дополнительный класс для скроллбара",name:"scrollbarClassName",required:!1,type:{name:"string | undefined"}},footerClassName:{defaultValue:null,description:"Дополнительный класс для футера",name:"footerClassName",required:!1,type:{name:"string | undefined"}},size:{defaultValue:null,description:"Размер компонента\n@description s, m, l, xl deprecated, используйте вместо них 48, 56, 64, 72 соответственно",name:"size",required:!1,type:{name:'40 | 48 | 56 | 64 | 72 | "s" | "m" | "l" | "xl" | undefined'}},Option:{defaultValue:null,description:"Компонент пункта меню",name:"Option",required:!0,type:{name:"ComponentType<OptionProps>"}},getOptionProps:{defaultValue:null,description:"Функция для получения пропсов для ячейки",name:"getOptionProps",required:!0,type:{name:"(option: OptionShape, index: number) => OptionProps"}},groupOptionProps:{defaultValue:null,description:"Пропсы, которые будут прокинуты в компонент группового пункта меню",name:"groupOptionProps",required:!1,type:{name:"AnyObject | undefined"}},selectedItems:{defaultValue:null,description:"Список выбранных пунктов",name:"selectedItems",required:!1,type:{name:"OptionShape[] | undefined"}},setSelectedItems:{defaultValue:null,description:"Метод для ручной установки выбранных пунктов",name:"setSelectedItems",required:!0,type:{name:"(selected: OptionShape[]) => void"}},toggleMenu:{defaultValue:null,description:"Метод переключающий видимость выпадающего списка",name:"toggleMenu",required:!0,type:{name:"() => void"}},header:{defaultValue:null,description:"Контент шапки",name:"header",required:!1,type:{name:"ReactNode"}},footer:{defaultValue:null,description:"Контент футера",name:"footer",required:!1,type:{name:"ReactNode"}},options:{defaultValue:null,description:"Список вариантов выбора",name:"options",required:!1,type:{name:"(OptionShape | GroupShape)[] | undefined"}},flatOptions:{defaultValue:{value:"[]"},description:"Плоский список пунктов меню (например, нужно для виртуализации)",name:"flatOptions",required:!1,type:{name:"OptionShape[] | undefined"}},highlightedIndex:{defaultValue:null,description:"Индекс выделенного пункта",name:"highlightedIndex",required:!1,type:{name:"number | undefined"}},open:{defaultValue:null,description:"Флаг, открыто ли меню",name:"open",required:!1,type:{name:"boolean | undefined"}},Optgroup:{defaultValue:null,description:"Компонент группы",name:"Optgroup",required:!1,type:{name:"ComponentType<OptgroupProps> | undefined"}},emptyPlaceholder:{defaultValue:null,description:"Будет отображаться, если компонент пустой",name:"emptyPlaceholder",required:!1,type:{name:"ReactNode"}},visibleOptions:{defaultValue:{value:"5"},description:"Количество видимых пунктов меню (5 = 5.5)",name:"visibleOptions",required:!1,type:{name:"number | undefined"}},onScroll:{defaultValue:null,description:"Обработчик скрола",name:"onScroll",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void) | undefined"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string | undefined"}},inputProps:{defaultValue:null,description:"Дополнительные пропсы для Input'a, находящегося внутри кастомного OptionsList",name:"inputProps",required:!1,type:{name:"InputProps | undefined"}},showFooter:{defaultValue:null,description:"Нужно ли показывать футер",name:"showFooter",required:!1,type:{name:"boolean | undefined"}},nativeScrollbar:{defaultValue:null,description:"Нужно ли использовать нативный скроллбар",name:"nativeScrollbar",required:!1,type:{name:"boolean | undefined"}},optionsListWidth:{defaultValue:null,description:"Управляет шириной выпадающего меню.\nШирину определяет контент, либо ширина равна ширине поля",name:"optionsListWidth",required:!1,type:{name:'"content" | "field" | undefined'}},onApply:{defaultValue:{value:"() => null"},description:"Обработчик подтверждения изменений",name:"onApply",required:!1,type:{name:"(() => void) | undefined"}},onClear:{defaultValue:{value:"() => null"},description:"Обработчик отмены изменений",name:"onClear",required:!1,type:{name:"(() => void) | undefined"}},setHighlightedIndex:{defaultValue:null,description:"Указать индекс пункта для hover состояния",name:"setHighlightedIndex",required:!1,type:{name:"((index: number) => void) | undefined"}},search:{defaultValue:null,description:"Значение поиска",name:"search",required:!1,type:{name:"string | undefined"}},multiple:{defaultValue:null,description:"Возможность выбрать несколько значений",name:"multiple",required:!1,type:{name:"boolean | undefined"}},limitDynamicOptionGroupSize:{defaultValue:null,description:"Ограничение динамического размера группы вариантов выбора",name:"limitDynamicOptionGroupSize",required:!1,type:{name:"boolean | undefined"}},showClear:{defaultValue:{value:"true"},description:"",name:"showClear",required:!1,type:{name:"boolean | undefined"}},onClose:{defaultValue:{value:"() => null"},description:"",name:"onClose",required:!1,type:{name:"(() => void) | undefined"}},selectedDraft:{defaultValue:{value:"[]"},description:"",name:"selectedDraft",required:!1,type:{name:"OptionShape[] | undefined"}},OptionsList:{defaultValue:{value:"forwardRef<HTMLDivElement, OptionsListProps>(\n    (\n        {\n            size = 48,\n            className,\n            optionGroupClassName,\n            footerClassName,\n            scrollbarClassName,\n            Option,\n            getOptionProps,\n            groupOptionProps = {},\n            options = [],\n            Optgroup = DefaultOptgroup,\n            dataTestId,\n            emptyPlaceholder,\n            visibleOptions = DEFAULT_VISIBLE_OPTIONS,\n            onScroll,\n            open,\n            header,\n            footer,\n            showFooter = true,\n            optionsListWidth,\n            nativeScrollbar: nativeScrollbarProp,\n            flatOptions = [],\n            setHighlightedIndex,\n            selectedItems,\n            search,\n            setSelectedItems,\n            multiple,\n            limitDynamicOptionGroupSize = false,\n            client,\n        },\n        ref,\n    ) => {\n        const [scrollTop, setScrollTop] = useState(true);\n        const [scrollBottom, setScrollBottom] = useState(false);\n\n        const nativeScrollbar = useNativeScrollbar({\n            nativeScrollbar: nativeScrollbarProp,\n            client,\n        });\n\n        const handleScroll = useCallback(\n            (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n                const scrolledToHeader = event.currentTarget.scrollTop <= 0;\n                const scrolledToFooter =\n                    event.currentTarget.scrollHeight - event.currentTarget.offsetHeight <=\n                    event.currentTarget.scrollTop;\n\n                setScrollTop(scrolledToHeader);\n                setScrollBottom(scrolledToFooter);\n\n                onScroll?.(event);\n            },\n            [onScroll],\n        );\n\n        const renderOption = (option: OptionShape, index: number) => (\n            <Option key={option.key} {...getOptionProps(option, index)} />\n        );\n\n        const listRef = useRef<HTMLDivElement>(null);\n        const scrollbarRef = useRef<HTMLDivElement>(null);\n        const counter = createCounter();\n        const renderGroup = (group: GroupShape) => {\n            const groupSelectedItems = selectedItems?.filter(({ key: selectedItemKey }) =>\n                group.options.some((option) => option.key === selectedItemKey),\n            );\n            const handleSelectedItems = (items: OptionShape[]) => {\n                setSelectedItems(\n                    (\n                        selectedItems?.filter(\n                            ({ key: selectedItemKey }) =>\n                                !group.options.some((option) => option.key === selectedItemKey),\n                        ) ?? []\n                    ).concat(items),\n                );\n            };\n\n            return (\n                <Optgroup\n                    className={optionGroupClassName}\n                    label={group.label}\n                    key={group.label}\n                    size={size}\n                    options={group.options}\n                    selectedItems={groupSelectedItems}\n                    setSelectedItems={handleSelectedItems}\n                    search={search}\n                    multiple={multiple}\n                    {...groupOptionProps}\n                >\n                    {group.options.map((option) => renderOption(option, counter()))}\n                </Optgroup>\n            );\n        };\n\n        const actualOptionsCount = limitDynamicOptionGroupSize && options.length > 0;\n\n        const [measured, height] = useVisibleOptions({\n            visibleOptions,\n            listRef,\n            open,\n            options,\n            actualOptionsCount,\n            size: actualOptionsCount\n                ? (() => {\n                      switch (typeof size) {\n                          case 'string':\n                              throw new Error(\n                                  'OptionsList with `limitDynamicOptionGroupSize` enabled needs a `size` with number type',\n                              );\n                          default:\n                              return size;\n                      }\n                  })()\n                : undefined,\n        });\n\n        if (options.length === 0 && !emptyPlaceholder && !header && !footer) {\n            return null;\n        }\n\n        const renderListItems = () => (\n            <React.Fragment>\n                {options.map((option) =>\n                    isGroup(option) ? renderGroup(option) : renderOption(option, counter()),\n                )}\n\n                {emptyPlaceholder && options.length === 0 && (\n                    <div className={styles.emptyPlaceholder}>{emptyPlaceholder}</div>\n                )}\n            </React.Fragment>\n        );\n\n        const renderWithCustomScrollbar = () => {\n            const scrollableNodeProps = {\n                onScroll: handleScroll,\n                'data-test-id': dataTestId,\n                ref: ref as React.RefObject<HTMLDivElement>,\n            };\n\n            return (\n                <Scrollbar\n                    className={cn(styles.scrollable, scrollbarClassName)}\n                    ref={scrollbarRef}\n                    style={{ height }}\n                    horizontalAutoStretch={optionsListWidth === 'content'}\n                    scrollableNodeProps={scrollableNodeProps}\n                    contentNodeProps={{ ref: listRef }}\n                    maskProps={{\n                        /*\n                         * Для корректного подсчета высоты опций(иначе для optionsListWidth: 'field'\n                         * высота опции всегда будет равна высоте одной строчки)\n                         */\n                        className: cn({\n                            [styles.mask]: optionsListWidth === 'content' && !measured,\n                        }),\n                    }}\n                >\n                    {renderListItems()}\n                </Scrollbar>\n            );\n        };\n\n        const renderWithNativeScrollbar = () => (\n            <div\n                className={cn(styles.scrollable, scrollbarClassName)}\n                ref={mergeRefs([listRef, ref])}\n                onScroll={handleScroll}\n                style={{ height }}\n            >\n                {renderListItems()}\n            </div>\n        );\n\n        const resetHighlightedIndex = () => setHighlightedIndex?.(-1);\n\n        return (\n            <div\n                {...(nativeScrollbar && { 'data-test-id': dataTestId })}\n                className={cn(styles.optionsList, styles[SIZE_TO_CLASSNAME_MAP[size]], className)}\n            >\n                {header && (\n                    <div\n                        className={cn(styles.optionsListHeader, {\n                            [styles.headerHighlighted]: !scrollTop,\n                        })}\n                        onMouseEnter={resetHighlightedIndex}\n                    >\n                        {header}\n                    </div>\n                )}\n\n                {nativeScrollbar ? renderWithNativeScrollbar() : renderWithCustomScrollbar()}\n\n                {showFooter && footer && (\n                    <div\n                        onMouseEnter={resetHighlightedIndex}\n                        className={cn(styles.optionsListFooter, footerClassName, {\n                            [styles.withBorder]:\n                                visibleOptions &&\n                                flatOptions.length > visibleOptions &&\n                                !scrollBottom,\n                        })}\n                    >\n                        {footer}\n                    </div>\n                )}\n            </div>\n        );\n    },\n)"},description:"",name:"OptionsList",required:!1,type:{name:'FC<Pick<SelectProps, "client"> & { className?: string | undefined; optionGroupClassName?: string | undefined; scrollbarClassName?: string | undefined; ... 28 more ...; limitDynamicOptionGroupSize?: boolean | undefined; } & RefAttributes<...>> | undefined'}},Footer:{defaultValue:{value:"({\n    handleApply,\n    handleClear,\n    showClear,\n    selectedDraft = [],\n    dataTestId,\n    size,\n}: FooterProps) => (\n    <div\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n        tabIndex={0}\n        className={cn(styles.footer, size && styles[SIZE_TO_CLASSNAME_MAP[size]])}\n    >\n        <ButtonDesktop\n            size={32}\n            view='primary'\n            onClick={handleApply}\n            dataTestId={getDataTestId(dataTestId, 'apply')}\n            className={styles.button}\n        >\n            Применить\n        </ButtonDesktop>\n\n        {showClear && selectedDraft.length > 0 && (\n            <ButtonDesktop\n                size={32}\n                view='secondary'\n                onClick={handleClear}\n                dataTestId={getDataTestId(dataTestId, 'clear')}\n                className={styles.button}\n            >\n                Сбросить\n            </ButtonDesktop>\n        )}\n    </div>\n)"},description:"",name:"Footer",required:!1,type:{name:"FC<FooterProps> | undefined"}},Header:{defaultValue:{value:"({\n    onChange,\n    checked,\n    indeterminate,\n    mobile,\n    dataTestId,\n    size,\n}) => (\n    <div\n        className={cn(size && styles[SIZE_TO_CLASSNAME_MAP[size]], {\n            [styles.desktop]: !mobile,\n            [styles.mobile]: mobile,\n        })}\n    >\n        <Checkbox\n            block={true}\n            indeterminate={indeterminate}\n            size={24}\n            onChange={onChange}\n            checked={checked}\n            label='Выбрать все'\n            dataTestId={dataTestId}\n        />\n    </div>\n)"},description:"",name:"Header",required:!1,type:{name:"FC<HeaderProps> | undefined"}},headerProps:{defaultValue:null,description:"",name:"headerProps",required:!1,type:{name:"HeaderProps | undefined"}},showHeaderWithSelectAll:{defaultValue:null,description:"",name:"showHeaderWithSelectAll",required:!1,type:{name:"boolean | undefined"}},setSelectedDraft:{defaultValue:null,description:"",name:"setSelectedDraft",required:!1,type:{name:"((selectedDraft: OptionShape[]) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/select/src/presets/useSelectWithApply/options-list-with-apply/Component.tsx#OptionsListWithApply"]={docgenInfo:OptionsListWithApply.__docgenInfo,name:"OptionsListWithApply",path:"packages/select/src/presets/useSelectWithApply/options-list-with-apply/Component.tsx#OptionsListWithApply"})}catch(__react_docgen_typescript_loader_error){}var hook_excluded=["initiator"],selectAllOption={key:consts.l2,content:"Выбрать все"};function useSelectWithApply(_ref){var _searchProps$groupAcc,_searchProps$filterGr,options=_ref.options,selected=_ref.selected,_ref$onChange=_ref.onChange,onChange=void 0===_ref$onChange?function(){return null}:_ref$onChange,_ref$onSelectAllClick=_ref.onSelectAllClick,onSelectAllClick=void 0===_ref$onSelectAllClick?function(){return null}:_ref$onSelectAllClick,OptionsList=_ref.OptionsList,_ref$optionsListProps=_ref.optionsListProps,optionsListProps=void 0===_ref$optionsListProps?{}:_ref$optionsListProps,_ref$showClear=_ref.showClear,showClear=void 0===_ref$showClear||_ref$showClear,_ref$showSelectAll=_ref.showSelectAll,showSelectAll=void 0!==_ref$showSelectAll&&_ref$showSelectAll,_ref$showHeaderWithSe=_ref.showHeaderWithSelectAll,showHeaderWithSelectAll=void 0!==_ref$showHeaderWithSe&&_ref$showHeaderWithSe,_ref$showSearch=_ref.showSearch,showSearch=void 0!==_ref$showSearch&&_ref$showSearch,_ref$searchProps=_ref.searchProps,searchProps=void 0===_ref$searchProps?{}:_ref$searchProps,_ref$applyName=_ref.applyName,applyName=void 0===_ref$applyName?"apply-footer":_ref$applyName,_ref$resetName=_ref.resetName,resetName=void 0===_ref$resetName?"reset-footer":_ref$resetName,_useState=(0,react.useState)(""),_useState2=(0,slicedToArray.Z)(_useState,2),searchState=_useState2[0],setSearchState=_useState2[1],_ref2="string"==typeof(null==searchProps?void 0:searchProps.value)?[searchProps.value,searchProps.onChange]:[searchState,setSearchState],_ref3=(0,slicedToArray.Z)(_ref2,2),search=_ref3[0],setSearch=_ref3[1],accessor=searchProps.accessor||utils.uj,filterFn=searchProps.filterFn||utils.B_,groupAccessor=null!==(_searchProps$groupAcc=searchProps.groupAccessor)&&void 0!==_searchProps$groupAcc?_searchProps$groupAcc:utils.JQ,filterGroup=null!==(_searchProps$filterGr=searchProps.filterGroup)&&void 0!==_searchProps$filterGr&&_searchProps$filterGr,_useMemo=(0,react.useMemo)(function(){return(0,utils.jW)(options,selected,showSearch?function(option){if((0,utils.ty)(option)){var groupAccessorValue=groupAccessor(option);return"string"==typeof groupAccessorValue&&filterFn(groupAccessorValue,search)}return filterFn(accessor(option),search)}:void 0,filterGroup)},[options,selected,showSearch,filterGroup,filterFn,accessor,search,groupAccessor]),flatOptions=_useMemo.flatOptions,filteredOptions=_useMemo.filteredOptions,selectedOptions=_useMemo.selectedOptions,_useState3=(0,react.useState)(selectedOptions),_useState4=(0,slicedToArray.Z)(_useState3,2),selectedDraft=_useState4[0],setSelectedDraft=_useState4[1],selectedOptionsRef=(0,react.useRef)(selectedOptions),selectedKeys=(0,react.useMemo)(function(){return selectedDraft.map(function(_ref4){return _ref4.key})},[selectedDraft]);(0,react.useEffect)(function(){react_fast_compare_default()(selectedOptionsRef.current,selectedOptions)||setSelectedDraft(selectedOptions),selectedOptionsRef.current=selectedOptions},[selectedOptions]);var memoizedOptions=(0,react.useMemo)(function(){return filteredOptions.length&&showSelectAll?[selectAllOption].concat((0,toConsumableArray.Z)(filteredOptions)):filteredOptions},[filteredOptions,showSelectAll]);return{OptionsList:OptionsListWithApply,optionsListProps:(0,objectSpread2.Z)((0,objectSpread2.Z)({},optionsListProps),{},{OptionsList:OptionsList,showClear:showClear,onClear:function(){setSelectedDraft([]),onChange({selected:null,selectedMultiple:[],initiator:null,name:resetName})},onApply:function(){onChange({selected:selectedDraft[0],selectedMultiple:selectedDraft,initiator:null,name:applyName})},onClose:function(){return setSelectedDraft(selectedOptionsRef.current)},selectedDraft:selectedDraft,setSelectedDraft:setSelectedDraft,showHeaderWithSelectAll:showHeaderWithSelectAll,headerProps:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null==optionsListProps?void 0:optionsListProps.headerProps),{},{indeterminate:selectedDraft.length>0,checked:selectedDraft.length===flatOptions.length||flatOptions.every(function(_ref7){var key=_ref7.key;return selectedKeys.includes(key)}),onChange:function(){var optionsToSet=flatOptions.length===selectedDraft.length?[]:flatOptions;onSelectAllClick(optionsToSet),setSelectedDraft(optionsToSet)}})}),multiple:!0,options:memoizedOptions,onChange:function(_ref5){var initiator=_ref5.initiator,restArgs=(0,objectWithoutProperties.Z)(_ref5,hook_excluded);if(!initiator){onChange((0,objectSpread2.Z)({initiator:null},restArgs));return}var initiatorSelected=selectedDraft.some(function(selectedDraftOption){return selectedDraftOption.key===initiator.key})||initiator.key===consts.l2&&(selectedDraft.length===flatOptions.length||flatOptions.every(function(_ref6){var key=_ref6.key;return selectedKeys.includes(key)}));initiator.key===consts.l2?setSelectedDraft(initiatorSelected?[]:flatOptions):setSelectedDraft(initiatorSelected?selectedDraft.filter(function(o){return o.key!==initiator.key}):selectedDraft.concat(initiator))},selected:selected,showSearch:showSearch,searchProps:showSearch?(0,objectSpread2.Z)((0,objectSpread2.Z)({},searchProps),{},{value:search,onChange:setSearch}):void 0,originalProps:{options:options,selected:selected,onChange:onChange,OptionsList:OptionsList,optionsListProps:optionsListProps,showClear:showClear,showSelectAll:showSelectAll,showHeaderWithSelectAll:showHeaderWithSelectAll,showSearch:showSearch,searchProps:searchProps,applyName:applyName,resetName:resetName}}}},"./packages/select/src/presets/useSelectWithApply/options-list-with-apply/header/Component.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{h:function(){return Header}});var defineProperty=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js");__webpack_require__("./node_modules/react/index.js");var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),modern=__webpack_require__("./dist/checkbox/modern/index.js"),consts=__webpack_require__("./packages/select/src/consts.ts"),index_module={desktop:"desktop_eZJqs","size-72":"size-72_vnmT6",mobile:"mobile_yYgHP"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Header=function(_ref){var onChange=_ref.onChange,checked=_ref.checked,indeterminate=_ref.indeterminate,mobile=_ref.mobile,dataTestId=_ref.dataTestId,size=_ref.size;return(0,jsx_runtime.jsx)("div",{className:classnames_default()(size&&index_module[consts.pM[size]],(0,defineProperty.Z)((0,defineProperty.Z)({},index_module.desktop,!mobile),index_module.mobile,mobile)),children:(0,jsx_runtime.jsx)(modern.Checkbox,{block:!0,indeterminate:indeterminate,size:24,onChange:onChange,checked:checked,label:"Выбрать все",dataTestId:dataTestId})})};try{Header.displayName="Header",Header.__docgenInfo={description:"",displayName:"Header",props:{checked:{defaultValue:null,description:"",name:"checked",required:!1,type:{name:"boolean | undefined"}},indeterminate:{defaultValue:null,description:"",name:"indeterminate",required:!1,type:{name:"boolean | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement>, payload: { checked: boolean; name?: string | undefined; }) => void) | undefined"}},mobile:{defaultValue:null,description:"",name:"mobile",required:!1,type:{name:"boolean | undefined"}},dataTestId:{defaultValue:null,description:"",name:"dataTestId",required:!1,type:{name:"string | undefined"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:'40 | 48 | 56 | 64 | 72 | "s" | "m" | "l" | "xl" | undefined'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/select/src/presets/useSelectWithApply/options-list-with-apply/header/Component.tsx#Header"]={docgenInfo:Header.__docgenInfo,name:"Header",path:"packages/select/src/presets/useSelectWithApply/options-list-with-apply/header/Component.tsx#Header"})}catch(__react_docgen_typescript_loader_error){}},"./packages/select/src/utils.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{B_:function(){return defaultFilterFn},D9:function(){return usePrevious},JC:function(){return joinOptions},JQ:function(){return defaultGroupAccessor},LI:function(){return useVirtualVisibleOptions},d_:function(){return lastIndexOf},jW:function(){return processOptions},kZ:function(){return useVisibleOptions},ty:function(){return isGroup},uj:function(){return defaultAccessor}});var _home_runner_work_core_components_core_components_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_home_runner_work_core_components_core_components_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_alfalab_core_components_shared__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/shared/modern/index.js"),_consts__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/select/src/consts.ts"),isGroup=function(item){return Object.prototype.hasOwnProperty.call(item,"options")},isOptionShape=function(item){return!!item&&Object.prototype.hasOwnProperty.call(item,"key")},joinOptions=function(_ref){var selected=_ref.selected,selectedMultiple=_ref.selectedMultiple,_ref$valueSeparator=_ref.valueSeparator,valueSeparator=void 0===_ref$valueSeparator?_consts__WEBPACK_IMPORTED_MODULE_2__._:_ref$valueSeparator,options=selectedMultiple||(selected?[selected]:[]);return options.length?options.reduce(function(acc,option,index){return(0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(option.content)?acc.push((0,react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(option.content,{key:option.key})):acc.push(option.content),index<options.length-1&&acc.push(valueSeparator),acc},[]):null};function processOptions(options){var selected=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],filterFn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},filterGroup=arguments.length>3&&void 0!==arguments[3]&&arguments[3],flatOptions=[],filteredOptions=[],selectedArray=Array.isArray(selected)?selected:[selected],selectedOptions=selectedArray.filter(isOptionShape),selectedKeys=selectedArray.filter(function(option){return"string"==typeof option}),process=function(option){var isGroupOption=isGroup(option);return!isGroupOption&&selectedKeys.includes(option.key)&&selectedOptions.push(option),!!filterFn(option)&&(isGroupOption?filterGroup&&Array.prototype.push.apply(flatOptions,option.options):flatOptions.push(option),!0)};return options.forEach(function(option){if(isGroup(option)){var group=(0,_home_runner_work_core_components_core_components_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,_home_runner_work_core_components_core_components_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},option),{},{options:[]});if(option.options.forEach(function(groupOption){process(groupOption)&&group.options.push(groupOption)}),group.options.length){filteredOptions.push(group);return}if(!filterGroup)return}process(option)&&filteredOptions.push(option)}),{filteredOptions:filteredOptions,flatOptions:flatOptions,selectedOptions:selectedOptions}}function useVirtualVisibleOptions(_ref2){var visibleOptions=_ref2.visibleOptions,listRef=_ref2.listRef,_ref2$styleTargetRef=_ref2.styleTargetRef,styleTargetRef=void 0===_ref2$styleTargetRef?listRef:_ref2$styleTargetRef,open=_ref2.open,invalidate=_ref2.invalidate,options=_ref2.options,size=_ref2.size,actualOptionsCount=_ref2.actualOptionsCount;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){var measureOptionHeight=function(element){return"number"==typeof size?Math.min(element.clientHeight,size):element.clientHeight},list=listRef.current,styleTarget=styleTargetRef.current;if(open&&list&&styleTarget&&visibleOptions>0){var childCount=list.children.length,optionsNodes=[].slice.call(list.children,0,visibleOptions+1),height=optionsNodes.slice(0,visibleOptions).reduce(function(acc,child){return acc+measureOptionHeight(child)},0);if(visibleOptions<childCount){var lastVisibleOptionHeight=measureOptionHeight(optionsNodes[optionsNodes.length-1]);height+=Math.round(childCount-visibleOptions==1?lastVisibleOptionHeight:lastVisibleOptionHeight/2)}else if(visibleOptions>childCount&&actualOptionsCount&&"number"==typeof size){var actualCount=(null!=options?options:[]).reduce(function(sum,option){return sum+1+(isGroup(option)?option.options.length:0)},0);height=Math.min(0===actualCount?1:actualCount,visibleOptions)*size,visibleOptions<actualCount&&(height+=size/2)}styleTarget.style.height="".concat(height,"px")}},[actualOptionsCount,listRef,open,options,size,styleTargetRef,visibleOptions,invalidate])}function useVisibleOptions(_ref3){var visibleOptions=_ref3.visibleOptions,listRef=_ref3.listRef,open=_ref3.open,options=_ref3.options,size=_ref3.size,actualOptionsCount=_ref3.actualOptionsCount,_useIsMounted=(0,_alfalab_core_components_shared__WEBPACK_IMPORTED_MODULE_1__.useIsMounted)(),runIfMounted=(0,_home_runner_work_core_components_core_components_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useIsMounted,2)[1],_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),_useState2=(0,_home_runner_work_core_components_core_components_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useState,2),measured=_useState2[0],setMeasured=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),_useState4=(0,_home_runner_work_core_components_core_components_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useState3,2),height=_useState4[0],setHeight=_useState4[1];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){var measureOptionHeight=function(element){return"number"==typeof size?Math.min(element.clientHeight,size):element.clientHeight},list=listRef.current;if(open&&list&&visibleOptions>0){var childCount=list.children.length,optionsNodes=[].slice.call(list.children,0,visibleOptions+1),measuredHeight=optionsNodes.slice(0,visibleOptions).reduce(function(acc,child){return acc+measureOptionHeight(child)},0);if(visibleOptions<childCount){var lastVisibleOptionHeight=measureOptionHeight(optionsNodes[optionsNodes.length-1]);measuredHeight+=Math.round(childCount-visibleOptions==1?lastVisibleOptionHeight:lastVisibleOptionHeight/2)}else if(visibleOptions>childCount&&actualOptionsCount&&"number"==typeof size){var actualCount=(null!=options?options:[]).reduce(function(sum,option){return sum+1+(isGroup(option)?option.options.length:0)},0);measuredHeight=Math.min(0===actualCount?1:actualCount,visibleOptions)*size,visibleOptions<actualCount&&(measuredHeight+=size/2)}return setHeight(measuredHeight),setMeasured(!0),function(){runIfMounted(function(){return setMeasured(!1)})}}return _alfalab_core_components_shared__WEBPACK_IMPORTED_MODULE_1__.fnUtils.noop},[actualOptionsCount,listRef,open,options,size,visibleOptions,runIfMounted]),[measured,height]}function defaultFilterFn(optionText,search){return!search||optionText.toLowerCase().includes(search.toLowerCase())}function defaultGroupAccessor(option){return option.label}function defaultAccessor(option){return"string"==typeof option.content?option.content:"string"==typeof option.value?option.value:option.key}function usePrevious(value){var ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){ref.current=value},[value]),ref.current}var lastIndexOf=function(array,predicate){for(var i=array.length-1;i>=0;i--)if(predicate(array[i]))return i;return -1}}}]);