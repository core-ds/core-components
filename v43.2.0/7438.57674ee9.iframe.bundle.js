"use strict";(self.webpackChunk_alfalab_core_components=self.webpackChunk_alfalab_core_components||[]).push([[7438],{"./packages/universal-date-input/src/Component.responsive.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{W:function(){return UniversalDateInput}});var _home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_alfalab_core_components_mq__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/mq/modern/index.js"),_components_base_universal_date_input__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/universal-date-input/src/components/base-universal-date-input/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["breakpoint","defaultMatchMediaValue","view"],UniversalDateInput=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(_ref,ref){var _ref$breakpoint=_ref.breakpoint,breakpoint=void 0===_ref$breakpoint?1024:_ref$breakpoint,defaultMatchMediaValue=_ref.defaultMatchMediaValue,view=_ref.view,restProps=(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_ref,_excluded),_useMatchMedia=(0,_alfalab_core_components_mq__WEBPACK_IMPORTED_MODULE_1__.useMatchMedia)("(min-width: ".concat(breakpoint,"px)"),defaultMatchMediaValue),isDesktop=(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__.Z)(_useMatchMedia,1)[0];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components_base_universal_date_input__WEBPACK_IMPORTED_MODULE_2__.o,(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.Z)((0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.Z)({},restProps),{},{ref:ref,view:view,breakpoint:breakpoint,defaultMatchMediaValue:defaultMatchMediaValue,platform:isDesktop?"desktop":"mobile"}))}));try{UniversalDateInput.displayName="UniversalDateInput",UniversalDateInput.__docgenInfo={description:"",displayName:"UniversalDateInput",props:{size:{defaultValue:null,description:"Размер компонента",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'},{value:'"xl"'}]}},type:{defaultValue:null,description:"Атрибут type",name:"type",required:!1,type:{name:"enum",value:[{value:'"number"'},{value:'"card"'},{value:'"email"'},{value:'"money"'},{value:'"password"'},{value:'"tel"'},{value:'"text"'}]}},value:{defaultValue:null,description:"Значение инпута",name:"value",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"Начальное значение поля",name:"defaultValue",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Обработчик изменения значения",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement> | null, payload: { value: string; }) => void)"}},onClick:{defaultValue:null,description:"Обработчик клика по полю",name:"onClick",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},onMouseDown:{defaultValue:null,description:"Обработчик MouseDown по полю",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},block:{defaultValue:null,description:"Растягивает компонент на ширину контейнера",name:"block",required:!1,type:{name:"boolean"}},clear:{defaultValue:null,description:"Крестик для очистки поля",name:"clear",required:!1,type:{name:"boolean"}},colors:{defaultValue:null,description:"Набор цветов для компонента",name:"colors",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"inverted"'}]}},error:{defaultValue:null,description:"Отображение ошибки",name:"error",required:!1,type:{name:"ReactNode"}},success:{defaultValue:null,description:"Отображение иконки успеха",name:"success",required:!1,type:{name:"boolean"}},hint:{defaultValue:null,description:"Текст подсказки",name:"hint",required:!1,type:{name:"ReactNode"}},label:{defaultValue:null,description:"Лейбл компонента",name:"label",required:!1,type:{name:"ReactNode"}},labelView:{defaultValue:null,description:"Вид лейбла внутри / снаружи",name:"labelView",required:!1,type:{name:"enum",value:[{value:'"inner"'},{value:'"outer"'}]}},leftAddons:{defaultValue:null,description:"Слот слева",name:"leftAddons",required:!1,type:{name:"ReactNode"}},rightAddons:{defaultValue:null,description:"Слот справа",name:"rightAddons",required:!1,type:{name:"ReactNode"}},leftAddonsProps:{defaultValue:null,description:"Свойства для обертки левых аддонов",name:"leftAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},rightAddonsProps:{defaultValue:null,description:"Свойства для обертки правых аддонов",name:"rightAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},bottomAddons:{defaultValue:null,description:"Слот под инпутом",name:"bottomAddons",required:!1,type:{name:"ReactNode"}},fieldClassName:{defaultValue:null,description:"Дополнительный класс для поля",name:"fieldClassName",required:!1,type:{name:"string"}},inputClassName:{defaultValue:null,description:"Дополнительный класс инпута",name:"inputClassName",required:!1,type:{name:"string"}},labelClassName:{defaultValue:null,description:"Дополнительный класс для лейбла",name:"labelClassName",required:!1,type:{name:"string"}},addonsClassName:{defaultValue:null,description:"Дополнительный класс для аддонов",name:"addonsClassName",required:!1,type:{name:"string"}},focusedClassName:{defaultValue:null,description:"Класс, который будет установлен при фокусе",name:"focusedClassName",required:!1,type:{name:"string"}},filledClassName:{defaultValue:null,description:"Класс, который будет установлен, если в поле есть значение",name:"filledClassName",required:!1,type:{name:"string"}},onClear:{defaultValue:null,description:"Обработчик нажатия на кнопку очистки",name:"onClear",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},disableUserInput:{defaultValue:null,description:"Запрещает ввод с клавиатуры",name:"disableUserInput",required:!1,type:{name:"boolean"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},defaultMatchMediaValue:{defaultValue:null,description:"Значение по-умолчанию для хука useMatchMedia",name:"defaultMatchMediaValue",required:!1,type:{name:"boolean | (() => boolean)"}},autoCorrection:{defaultValue:{value:"true"},description:"Автоматическое исправление ввода",name:"autoCorrection",required:!1,type:{name:"boolean"}},minDate:{defaultValue:null,description:"Минимальная дата, доступная для выбора (timestamp)",name:"minDate",required:!1,type:{name:"number"}},maxDate:{defaultValue:null,description:"Максимальная дата, доступная для выбора (timestamp)",name:"maxDate",required:!1,type:{name:"number"}},view:{defaultValue:null,description:"Вид компонента",name:"view",required:!0,type:{name:"enum",value:[{value:'"date"'},{value:'"date-time"'},{value:'"date-range"'},{value:'"time"'}]}},picker:{defaultValue:null,description:"Открыть календарь при клике",name:"picker",required:!1,type:{name:"boolean"}},Calendar:{defaultValue:null,description:"Компонент календаря",name:"Calendar",required:!1,type:{name:"ForwardRefExoticComponent<CalendarDesktopProps & { open: boolean; title?: string; onClose?: (() => void); onMonthTitleClick?: ((event: MouseEvent<HTMLSpanElement, MouseEvent>) => void) | undefined; yearsAmount?: number | undefined; hasHeader?: boolean | undefined; allowSelectionFromEmptyRange..."}},calendarProps:{defaultValue:null,description:"Пропсы календаря",name:"calendarProps",required:!1,type:{name:'Omit<ResponsiveCalendarProps, "open" | "minDate" | "maxDate" | "onClose">'}},popoverProps:{defaultValue:null,description:"Пропсы поповера",name:"popoverProps",required:!1,type:{name:"PopoverProps"}},onCalendarOpen:{defaultValue:null,description:"Обработчик открытия календаря",name:"onCalendarOpen",required:!1,type:{name:"(() => void)"}},onCalendarClose:{defaultValue:null,description:"Обработчик закрытия календаря",name:"onCalendarClose",required:!1,type:{name:"(() => void)"}},onComplete:{defaultValue:null,description:"Обработчик окончания ввода",name:"onComplete",required:!1,type:{name:"((value: string, date: Date) => void) | ((value: string, dateFrom: Date, dateTo: Date) => void) | ((value: string) => void)"}},wrapperClassName:{defaultValue:null,description:"Дополнительный класс обертки",name:"wrapperClassName",required:!1,type:{name:"string"}},rangeBehavior:{defaultValue:{value:"clarification"},description:"Тип выбора границ в календаре",name:"rangeBehavior",required:!1,type:{name:"enum",value:[{value:'"clarification"'},{value:'"reset"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/universal-date-input/src/Component.responsive.tsx#UniversalDateInput"]={docgenInfo:UniversalDateInput.__docgenInfo,name:"UniversalDateInput",path:"packages/universal-date-input/src/Component.responsive.tsx#UniversalDateInput"})}catch(__react_docgen_typescript_loader_error){}},"./packages/universal-date-input/src/components/base-universal-date-input/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{o:function(){return BaseUniversalDateInput}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("./node_modules/react/index.js"),react_merge_refs_esm=__webpack_require__("./node_modules/react-merge-refs/dist/react-merge-refs.esm.js"),index_esm=__webpack_require__("./node_modules/@maskito/react/index.esm.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),endOfDay=__webpack_require__("./node_modules/date-fns/esm/endOfDay/index.js"),startOfDay=__webpack_require__("./node_modules/date-fns/esm/startOfDay/index.js"),DATE_RANGE_SEPARATOR=" – ",DATE_TIME_SEPARATOR=", ",TEMPLATES={date:{segments:["dd","MM","yyyy"],separators:[".","."]},"date-time":{segments:["dd","MM","yyyy","HH","mm"],separators:[".",".",DATE_TIME_SEPARATOR,":"]},"date-range":{segments:["dd","MM","yyyy","dd","MM","yyyy"],separators:[".",".",DATE_RANGE_SEPARATOR,".","."]},time:{segments:["HH","mm"],separators:[":"]}},DATE_MAX_VALUES={day:31,month:12,year:9999,hours:23,minutes:59},DEFAULT_MIN_DATE=new Date(1900,0,1).getTime(),DEFAULT_MAX_DATE=new Date(2124,11,31).getTime(),DATE_FORMAT="dd.MM.yyyy",DATE_TIME_FORMAT="dd.MM.yyyy".concat(DATE_TIME_SEPARATOR,"HH").concat(":","mm"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),clamp=__webpack_require__("./node_modules/date-fns/esm/clamp/index.js"),getDaysInMonth=__webpack_require__("./node_modules/date-fns/esm/getDaysInMonth/index.js");function isDigit(v){return/\d/.test(v)}function getValueSegments(rawValue,separators){for(var separatorCursor=0,prevSepIdx=0,segments=[],value=function prepareValueForSegmentation(value){if(-1!==value.indexOf(" ")){if(-1===value.indexOf(DATE_RANGE_SEPARATOR)&&-1!==value.indexOf(DATE_RANGE_SEPARATOR.trim()))return value.replace(/\s/g,"").split(DATE_RANGE_SEPARATOR.trim()).join(DATE_RANGE_SEPARATOR);if(-1===value.indexOf(DATE_TIME_SEPARATOR)&&-1!==value.indexOf(DATE_TIME_SEPARATOR.trim()))return value.replace(/\s/g,"").split(DATE_TIME_SEPARATOR.trim()).join(DATE_TIME_SEPARATOR)}return value}(rawValue);separatorCursor<=separators.length;){var sepIdx=value.indexOf(separators[separatorCursor],prevSepIdx);if(!(sepIdx>-1)){var restValue=value.slice(prevSepIdx);restValue&&segments.push(restValue);break}segments.push(value.slice(prevSepIdx,sepIdx)),prevSepIdx=sepIdx+separators[separatorCursor].length,separatorCursor+=1}return segments}function shiftSegmentsData(rawSegments,templateSegments){var segments=(0,toConsumableArray.Z)(rawSegments);return templateSegments.forEach((function(item,idx,arr){var isLast=idx===arr.length-1,currSegment=segments[idx];if(currSegment&&item.length<currSegment.length){var _segments,segmentValue=currSegment.slice(0,item.length),restValue=currSegment.slice(item.length);if(segments[idx]=segmentValue,!isLast)segments[idx+1]=restValue+(null!==(_segments=segments[idx+1])&&void 0!==_segments?_segments:"")}})),segments}function findCursorPlace(segments,templateSegments,separators,selection){for(var cursorPlace,segmentIdx=0,posStart=0;void 0!==segments[segmentIdx];){var _separators$segmentId,segment=segments[segmentIdx],separatorLen=(null===(_separators$segmentId=separators[segmentIdx])||void 0===_separators$segmentId?void 0:_separators$segmentId.length)||1,bound=[posStart,segment.length+posStart+separatorLen];if(selection[0]>=bound[0]&&selection[1]<bound[1]){var offset=selection[0]-bound[0];cursorPlace={segmentIdx:segmentIdx,offset:offset,beforeNext:offset>=templateSegments[segmentIdx].length};break}posStart+=segment.length+separatorLen,segmentIdx+=1}return cursorPlace}function segmentsToPattern(segments,separators){return segments.reduce((function(mask,segment,idx){var hasNextSegment=void 0!==segments[idx+1],segmentsLen=segment.length;return idx>0&&(segment.length||hasNextSegment)&&mask.push.apply(mask,(0,toConsumableArray.Z)(separators[idx-1].split(""))),mask.push.apply(mask,(0,toConsumableArray.Z)(function fillMask(len){return Array(len).fill(/\d/)}(segmentsLen))),mask}),[])}function segmentsToString(segments,separators){return removeSeparatorsFromTail(segments.map((function(p,idx){var isLast=idx===segments.length-1;return"".concat(p).concat(separators[idx]&&!isLast?separators[idx]:"")})).join(""))}function removeSeparatorsFromTail(str){for(var strLen=str.length;strLen>0&&/\W/.test(str[strLen-1]);)strLen-=1;return str.slice(0,strLen)}function validateSegments(_ref){var dateTemplate=_ref.dateTemplate,templateSegments=_ref.templateSegments,segments=_ref.segments,_ref$selection=(0,slicedToArray.Z)(_ref.selection,2),from=_ref$selection[0],to=_ref$selection[1],min=_ref.min,max=_ref.max,parsedDate=function segmentsToObj(segments,templateSegments){return{day:segments[templateSegments.indexOf("dd")],month:segments[templateSegments.indexOf("MM")],year:segments[templateSegments.indexOf("yyyy")],hours:segments[templateSegments.indexOf("HH")],minutes:segments[templateSegments.indexOf("mm")]}}(segments,templateSegments),dateSegments=Object.entries(parsedDate),validatedDateSegments={},paddedZeroes=0;dateSegments.forEach((function(_ref2){var _ref3=(0,slicedToArray.Z)(_ref2,2),segmentName=_ref3[0],_ref3$=_ref3[1],segmentValue=void 0===_ref3$?"":_ref3$,maxSegmentValue=DATE_MAX_VALUES[segmentName],_padWithZeroesUntilVa=padWithZeroesUntilValid(segmentValue,"".concat(maxSegmentValue)),validatedSegmentValue=_padWithZeroesUntilVa.validatedSegmentValue,prefixedZeroesCount=_padWithZeroesUntilVa.prefixedZeroesCount;paddedZeroes+=prefixedZeroesCount,validatedDateSegments[segmentName]=validatedSegmentValue})),function minMaxValidation(segments,min,max){var _segments$day,_segments$month,_segments$year,dayFilled=2===(null===(_segments$day=segments.day)||void 0===_segments$day?void 0:_segments$day.length),monthFilled=2===(null===(_segments$month=segments.month)||void 0===_segments$month?void 0:_segments$month.length),yearFilled=4===(null===(_segments$year=segments.year)||void 0===_segments$year?void 0:_segments$year.length);dayFilled&&"00"===segments.day&&(segments.day="01");monthFilled&&"00"===segments.month&&(segments.month="01");yearFilled&&Number(segments.year)<min.getFullYear()&&(segments.year=min.getFullYear().toString());if(dayFilled&&monthFilled){var filledYear=yearFilled?segments.year:"2000",maxDays=(0,getDaysInMonth.Z)(new Date("".concat(filledYear,"-").concat(segments.month,"-01")));Number(segments.day)>maxDays&&(segments.day=maxDays.toString())}if(dayFilled&&monthFilled&&yearFilled){var date=(0,clamp.Z)(new Date("".concat(segments.year,"-").concat(segments.month,"-").concat(segments.day)),{start:min,end:max});segments.day=date.getDate().toString().padStart(2,"0"),segments.month=(date.getMonth()+1).toString().padStart(2,"0"),segments.year=date.getFullYear().toString()}}(validatedDateSegments,min,max);var validatedDateString=function toDateString(_ref4,dateTemplate){var day=_ref4.day,month=_ref4.month,year=_ref4.year,hours=_ref4.hours,minutes=_ref4.minutes;return dateTemplate.replace(/d+/g,null!=day?day:"").replace(/MM+/g,null!=month?month:"").replace(/y+/g,null!=year?year:"").replace(/H+/g,null!=hours?hours:"").replace(/m+/g,null!=minutes?minutes:"")}(validatedDateSegments,dateTemplate);return{validatedDateString:validatedDateString,updatedSelection:[from+paddedZeroes,to+paddedZeroes]}}function padWithZeroesUntilValid(segmentValue,paddedMaxValue){var prefixedZeroesCount=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Number(segmentValue.padEnd(paddedMaxValue.length,"0"))<=Number(paddedMaxValue)?{validatedSegmentValue:segmentValue,prefixedZeroesCount:prefixedZeroesCount}:segmentValue.endsWith("0")?padWithZeroesUntilValid("0".concat(segmentValue.slice(0,paddedMaxValue.length-1)),paddedMaxValue,prefixedZeroesCount+1):segmentValue.length<paddedMaxValue.length?padWithZeroesUntilValid("".concat(segmentValue.slice(0,paddedMaxValue.length-1),"0"),paddedMaxValue,prefixedZeroesCount):{validatedSegmentValue:paddedMaxValue,prefixedZeroesCount:prefixedZeroesCount}}function createCaretPosPlugin(template){return function(element){var handleKeyDown=function handleKeyDown(evt){var event=evt,selectionStart=element.selectionStart,selectionEnd=element.selectionEnd,value=element.value;if([" ","."].includes(event.key)&&selectionStart===selectionEnd){var nextPos=function findNextSegmentPos(value,template,cursorPos){var segments=getValueSegments(value,template.separators),selection=[cursorPos,cursorPos],currCursorPlace=findCursorPlace(segments,template.segments,template.separators,selection);if(currCursorPlace)for(var nextCursorPos=0,i=0;i<segments.length;i++){var _template$separators$,segment=segments[i],separatorLen=(null===(_template$separators$=template.separators[i])||void 0===_template$separators$?void 0:_template$separators$.length)||0;if(i===currCursorPlace.segmentIdx)return nextCursorPos+=segment.length+separatorLen;nextCursorPos+=segment.length+separatorLen}return cursorPos}(value,template,selectionStart||0);element.setSelectionRange(nextPos,nextPos)}};return element.addEventListener("keydown",handleKeyDown),function(){return element.removeEventListener("keydown",handleKeyDown)}}}var isValid=__webpack_require__("./node_modules/date-fns/esm/isValid/index.js"),differenceInDays=__webpack_require__("./node_modules/date-fns/esm/differenceInDays/index.js"),format=__webpack_require__("./node_modules/date-fns/esm/format/index.js"),isSameDay=__webpack_require__("./node_modules/date-fns/esm/isSameDay/index.js"),parse=__webpack_require__("./node_modules/date-fns/esm/parse/index.js");function parseDateString(value){var format=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DATE_FORMAT;return(0,parse.Z)(value,format,new Date)}var formatDate=function formatDate(date){var dateFormat=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DATE_FORMAT;return(0,format.Z)(date,dateFormat)};function isCompleteDate(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").length===DATE_FORMAT.length}function isCompleteTime(){return!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])||5===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").length}function isCompleteDateRange(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").length===DATE_RANGE_SEPARATOR.length+2*DATE_FORMAT.length}function isValidDate(_ref){var _ref$value=_ref.value,value=void 0===_ref$value?"":_ref$value,minDate=_ref.minDate,maxDate=_ref.maxDate,offDays=_ref.offDays,parsed=isCompleteDate(value)?parseDateString(value).getTime():void 0;return!!parsed&&(parsed>=minDate&&parsed<=maxDate&&!(null!=offDays&&offDays.some((function(offDay){return(0,isSameDay.Z)(offDay,parsed)}))))}function preventDefault(e){e.preventDefault()}function createValidationPreprocessor(template,fullStringTemplate,min,max,onCorrection){var rangeSeparator=template.separators.find((function(s){return s===DATE_RANGE_SEPARATOR}))||"",dateTemplate=rangeSeparator?fullStringTemplate.split(rangeSeparator)[0]:fullStringTemplate;return function(state,actionType){var elementState=state.elementState,data=state.data,value=elementState.value,selection=elementState.selection,isValidation="validation"===actionType,_selection=(0,slicedToArray.Z)(selection,2),from=_selection[0],to=_selection[1],rawValue=value.slice(0,from)+data+value.slice(to);if(!rawValue||isValidation&&from!==to)return state;for(var rawSegments=getValueSegments(rawValue,template.separators),segments=data.length>2?shiftSegmentsData(rawSegments,template.segments):function replaceSegmentsData(rawSegments,template,selection,data){var segments=(0,toConsumableArray.Z)(rawSegments),cursorPos=findCursorPlace(rawSegments,template.segments,template.separators,selection);return template.segments.forEach((function(templateSegment,idx,arr){var isLast=idx===arr.length-1,segment=segments[idx];if(segment&&templateSegment.length<segment.length){var segmentIdx=null!=cursorPos&&cursorPos.beforeNext?cursorPos.segmentIdx+1:null==cursorPos?void 0:cursorPos.segmentIdx,offset=null!=cursorPos&&cursorPos.beforeNext?0:null==cursorPos?void 0:cursorPos.offset;if(segmentIdx===idx&&void 0!==offset){var overflowLen=segment.length-templateSegment.length;segments[idx]=(segment.slice(0,offset)+data+segment.slice(offset+overflowLen+data.length)).slice(0,templateSegment.length)}else if(segments[idx]=segment.slice(0,templateSegment.length),!isLast&&data){var _segments2,restValue=segment.slice(templateSegment.length);segments[idx+1]=restValue+(null!==(_segments2=segments[idx+1])&&void 0!==_segments2?_segments2:"")}}})),segments}(rawSegments,template,selection,data),possibleValue=segmentsToString(segments,template.separators),dateStrings=function parseDateRangeString(dateRange,maxLen){return dateRange.split(DATE_RANGE_SEPARATOR).map((function(date){return date.slice(0,maxLen)}))}(possibleValue,dateTemplate.length),validatedValue="",hasRangeSeparator=Boolean(rangeSeparator)&&possibleValue.includes(rangeSeparator),toSelection=to+data.length,i=0;i<dateStrings.length;i++){var dateString=dateStrings[i],_getMinMax=getMinMax({hasRangeSeparator:hasRangeSeparator,dateStrings:dateStrings,dateTemplate:dateTemplate,dateIdx:i}),_getMinMax$minDate=_getMinMax.minDate,minDate=void 0===_getMinMax$minDate?min:_getMinMax$minDate,_getMinMax$maxDate=_getMinMax.maxDate,maxDate=void 0===_getMinMax$maxDate?max:_getMinMax$maxDate,validateResult=validateSegments({templateSegments:template.segments,segments:validatedValue?segments.slice(3):segments,dateTemplate:dateTemplate,selection:[from,toSelection],min:minDate,max:maxDate}),validatedDateString=validateResult.validatedDateString;if((1===dateStrings.length||dateStrings.length>1&&i>0)&&(validatedDateString=removeSeparatorsFromTail(validatedDateString)),dateString&&!validatedDateString)return{elementState:elementState,data:""};toSelection=(0,slicedToArray.Z)(validateResult.updatedSelection,2)[1],validatedValue+=hasRangeSeparator&&validatedValue?rangeSeparator+validatedDateString:validatedDateString}isValidation||possibleValue.replace(/0/g,"")!==validatedValue.replace(/0/g,"")&&onCorrection();return isValidation||!data?{elementState:{value:validatedValue,selection:[from,from]},data:data}:function insertNewData(_ref){var elementState=_ref.elementState,validatedValue=_ref.validatedValue,rawValue=_ref.rawValue,possibleValue=_ref.possibleValue,toSelection=_ref.toSelection,_elementState$selecti2=(0,slicedToArray.Z)(elementState.selection,2),from=_elementState$selecti2[0],to=_elementState$selecti2[1],addedDateSegmentSeparators=Math.max(0,possibleValue.length-rawValue.length),existSegmentSeparator=function countSeparatorsFromHead(str){for(var startFrom=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,cursor=startFrom;str[cursor]&&/\W/.test(str[cursor]);)cursor+=1;return cursor-startFrom}(validatedValue,from),selectedChars=to-from,newData=validatedValue.slice(from+existSegmentSeparator,toSelection-selectedChars+addedDateSegmentSeparators+existSegmentSeparator),newValue=validatedValue.slice(0,from+existSegmentSeparator)+validatedValue.slice(to+existSegmentSeparator+newData.length-selectedChars);return{elementState:{selection:[from,from],value:newValue},data:newData}}({elementState:elementState,validatedValue:validatedValue,actionType:actionType,rawValue:rawValue,possibleValue:possibleValue,toSelection:toSelection})}}function getMinMax(_ref2){var _dateStrings$,hasRangeSeparator=_ref2.hasRangeSeparator,dateIdx=_ref2.dateIdx,dateStrings=_ref2.dateStrings,dateTemplate=_ref2.dateTemplate,isFirstDateOfRange=hasRangeSeparator&&0===dateIdx&&2===dateStrings.length,isSecondDateOfRange=hasRangeSeparator&&1===dateIdx&&2===dateStrings.length,isFirstDateFilled=dateStrings[0].length===dateTemplate.length,isSecondDateFilled=(null===(_dateStrings$=dateStrings[1])||void 0===_dateStrings$?void 0:_dateStrings$.length)===dateTemplate.length,firstDateOfRange=isFirstDateFilled?parseDateString(dateStrings[0]):void 0,secondDateOfRage=isSecondDateFilled?parseDateString(dateStrings[1]):void 0,firstDateValid=isFirstDateFilled&&(0,isValid.Z)(firstDateOfRange),secondDateValid=isSecondDateFilled&&(0,isValid.Z)(secondDateOfRage);return{minDate:isSecondDateOfRange&&firstDateValid?firstDateOfRange:void 0,maxDate:isFirstDateOfRange&&secondDateValid?secondDateOfRage:void 0}}var modern=__webpack_require__("./dist/input/modern/index.js"),popover_modern=__webpack_require__("./dist/popover/modern/index.js"),shared_modern=__webpack_require__("./dist/shared/modern/index.js"),CalendarMIcon=__webpack_require__("./node_modules/@alfalab/icons-glyph/CalendarMIcon.js"),index_module={wrapper:"wrapper_TxRws",block:"block_vaLJ0",calendarIcon:"calendarIcon_nrODD",calendarContainer:"calendarContainer_qkEa4",blink:"blink_fFn0V"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["autoCorrection","open","value","inputWrapperRef","defaultValue","minDate","maxDate","picker","rightAddons","Calendar","calendarProps","platform","calendarRef","onComplete","onChange","onBlur","onCalendarClose","onPickerClick","error","popoverProps","dataTestId","wrapperClassName","wrapperHandlers","block","withTime","breakpoint"],DateInput=(0,react.forwardRef)((function(_ref,ref){var _ref2,autoCorrection=_ref.autoCorrection,open=_ref.open,valueProp=_ref.value,_ref$inputWrapperRef=_ref.inputWrapperRef,inputWrapperRefProp=void 0===_ref$inputWrapperRef?null:_ref$inputWrapperRef,defaultValue=_ref.defaultValue,_ref$minDate=_ref.minDate,minDate=void 0===_ref$minDate?DEFAULT_MIN_DATE:_ref$minDate,_ref$maxDate=_ref.maxDate,maxDate=void 0===_ref$maxDate?DEFAULT_MAX_DATE:_ref$maxDate,picker=_ref.picker,rightAddons=_ref.rightAddons,Calendar=_ref.Calendar,_ref$calendarProps=_ref.calendarProps,calendarProps=void 0===_ref$calendarProps?{}:_ref$calendarProps,platform=_ref.platform,calendarRef=_ref.calendarRef,onComplete=_ref.onComplete,onChange=_ref.onChange,onBlur=_ref.onBlur,onCalendarClose=_ref.onCalendarClose,onPickerClick=_ref.onPickerClick,error=_ref.error,popoverProps=_ref.popoverProps,dataTestId=_ref.dataTestId,wrapperClassName=_ref.wrapperClassName,wrapperHandlers=_ref.wrapperHandlers,block=_ref.block,withTime=_ref.withTime,breakpoint=_ref.breakpoint,restProps=(0,objectWithoutProperties.Z)(_ref,_excluded),_useState=(0,react.useState)(defaultValue),_useState2=(0,slicedToArray.Z)(_useState,2),value=_useState2[0],setValue=_useState2[1],lastValidDate=(0,react.useRef)(""),inputRef=(0,react.useRef)(null),inputWrapperRef=(0,react.useRef)(null),uncontrolled=void 0===valueProp,offDays=calendarProps.offDays,inputValue=null!==(_ref2=null!=valueProp?valueProp:value)&&void 0!==_ref2?_ref2:"",_inputValue$split=inputValue.split(DATE_TIME_SEPARATOR),_inputValue$split2=(0,slicedToArray.Z)(_inputValue$split,2),inputDate=_inputValue$split2[0],inputTime=_inputValue$split2[1],isValidValue=isValidDate({value:inputDate,minDate:minDate,maxDate:maxDate,offDays:offDays});(0,react.useEffect)((function(){if(autoCorrection){var hasValidValue=isValidValue&&isCompleteTime(inputValue,withTime);lastValidDate.current&&inputValue||(lastValidDate.current=hasValidValue?inputValue:formatDate(minDate,withTime?DATE_TIME_FORMAT:DATE_FORMAT))}}),[autoCorrection,minDate,withTime,isValidValue,inputValue]);var changeValue=function changeValue(val,event){null==onChange||onChange(event,{value:val});var _val$split=val.split(DATE_TIME_SEPARATOR),_val$split2=(0,slicedToArray.Z)(_val$split,2),date=_val$split2[0],_val$split2$=_val$split2[1],time=void 0===_val$split2$?"":_val$split2$;uncontrolled&&setValue(val),isCompleteDate(date)&&isCompleteTime(time,withTime)&&function callOnComplete(val){null==onComplete||onComplete(val,parseDateString(val,withTime?DATE_TIME_FORMAT:DATE_FORMAT)),lastValidDate.current=val}(val)},handleCalendarChange=function handleCalendarChange(date){date&&(changeValue(formatDate(date,withTime?DATE_TIME_FORMAT:DATE_FORMAT),null),requestAnimationFrame((function(){var _inputRef$current,dateLen=DATE_FORMAT.length,newCaretPos=withTime?dateLen+DATE_TIME_SEPARATOR.length:dateLen;null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current||_inputRef$current.setSelectionRange(newCaretPos,newCaretPos)}))),"desktop"===platform&&(null==onCalendarClose||onCalendarClose())},renderCalendar=function renderCalendar(){return picker&&Calendar?(0,jsx_runtime.jsx)("div",{onMouseDown:preventDefault,className:index_module.calendarWrapper,children:(0,jsx_runtime.jsx)(Calendar,(0,objectSpread2.Z)((0,objectSpread2.Z)({dataTestId:(0,shared_modern.getDataTestId)(dataTestId,"calendar")},calendarProps),{},{breakpoint:breakpoint,responsive:!0,open:open,onClose:onCalendarClose,ref:calendarRef,value:isValidValue?parseDateString(inputDate).getTime():void 0,onChange:handleCalendarChange,minDate:minDate,maxDate:maxDate}))}):null};return(0,jsx_runtime.jsxs)("div",(0,objectSpread2.Z)((0,objectSpread2.Z)({},wrapperHandlers),{},{className:classnames_default()(index_module.wrapper,wrapperClassName,(0,defineProperty.Z)({},index_module.block,block)),tabIndex:-1,"data-test-id":(0,shared_modern.getDataTestId)(dataTestId,"wrapper"),children:[(0,jsx_runtime.jsx)(modern.Input,(0,objectSpread2.Z)((0,objectSpread2.Z)({},restProps),{},{breakpoint:breakpoint,dataTestId:dataTestId,wrapperRef:(0,react_merge_refs_esm.Z)([inputWrapperRef,inputWrapperRefProp]),ref:(0,react_merge_refs_esm.Z)([ref,inputRef]),value:inputValue,inputMode:"decimal",onInput:function handleChange(event){changeValue(event.target.value,event)},onBlur:function handleBlur(event){if(null==onBlur||onBlur(event),autoCorrection){var dateFilled=isCompleteDate(inputDate);if(dateFilled&&!isCompleteTime(inputTime,withTime)){var _lastValidDate$curren=lastValidDate.current.split(DATE_TIME_SEPARATOR),prevTime=(0,slicedToArray.Z)(_lastValidDate$curren,2)[1];changeValue("".concat(inputDate).concat(DATE_TIME_SEPARATOR).concat(prevTime),null)}inputValue&&!dateFilled&&changeValue(lastValidDate.current,null)}},error:error||function getInnerError(){return!!autoCorrection&&(!(!(isCompleteDate(inputDate)&&isCompleteTime(inputTime,withTime))||isValidValue)&&"Эта дата недоступна")}(),block:!0,rightAddons:(0,jsx_runtime.jsxs)(react.Fragment,{children:[rightAddons,picker&&(0,jsx_runtime.jsx)(CalendarMIcon.CalendarMIcon,{onClick:onPickerClick,className:index_module.calendarIcon,onMouseDown:preventDefault})]})})),"desktop"===platform?(0,jsx_runtime.jsx)(popover_modern.Popover,(0,objectSpread2.Z)((0,objectSpread2.Z)({offset:[0,4],position:"bottom-start",dataTestId:(0,shared_modern.getDataTestId)(dataTestId,"popover")},popoverProps),{},{open:open,anchorElement:inputWrapperRef.current,popperClassName:classnames_default()(index_module.calendarContainer,null==popoverProps?void 0:popoverProps.popperClassName),withTransition:!1,children:renderCalendar()})):renderCalendar()]}))}));try{DateInput.displayName="DateInput",DateInput.__docgenInfo={description:"",displayName:"DateInput",props:{open:{defaultValue:null,description:"Флаг, открыт ли календарь",name:"open",required:!0,type:{name:"boolean"}},wrapperClassName:{defaultValue:null,description:"Дополнительный класс обертки",name:"wrapperClassName",required:!1,type:{name:"string"}},withTime:{defaultValue:null,description:"Дата со временем",name:"withTime",required:!1,type:{name:"boolean"}},calendarRef:{defaultValue:null,description:"Реф календаря",name:"calendarRef",required:!0,type:{name:"RefObject<HTMLDivElement>"}},wrapperHandlers:{defaultValue:null,description:"Обработчики на враппер",name:"wrapperHandlers",required:!1,type:{name:"{ onClick?: ((e: MouseEvent<HTMLDivElement, MouseEvent>) => void); onFocus?: ((e: FocusEvent<HTMLDivElement, Element>) => void); onBlur: (e: FocusEvent<...>) => void; onKeyDown?: ((e: KeyboardEvent<...>) => void) | undefined; } | undefined"}},onComplete:{defaultValue:null,description:"Обработчик окончания ввода",name:"onComplete",required:!1,type:{name:"((value: string, date: Date) => void)"}},size:{defaultValue:null,description:"Размер компонента",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'},{value:'"xl"'}]}},type:{defaultValue:null,description:"Атрибут type",name:"type",required:!1,type:{name:"enum",value:[{value:'"number"'},{value:'"card"'},{value:'"email"'},{value:'"money"'},{value:'"password"'},{value:'"tel"'},{value:'"text"'}]}},value:{defaultValue:null,description:"Значение инпута",name:"value",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"Начальное значение поля",name:"defaultValue",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Обработчик изменения значения",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement> | null, payload: { value: string; }) => void)"}},onClick:{defaultValue:null,description:"Обработчик клика по полю",name:"onClick",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},onMouseDown:{defaultValue:null,description:"Обработчик MouseDown по полю",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},block:{defaultValue:null,description:"Растягивает компонент на ширину контейнера",name:"block",required:!1,type:{name:"boolean"}},clear:{defaultValue:null,description:"Крестик для очистки поля",name:"clear",required:!1,type:{name:"boolean"}},colors:{defaultValue:null,description:"Набор цветов для компонента",name:"colors",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"inverted"'}]}},error:{defaultValue:null,description:"Отображение ошибки",name:"error",required:!1,type:{name:"ReactNode"}},success:{defaultValue:null,description:"Отображение иконки успеха",name:"success",required:!1,type:{name:"boolean"}},hint:{defaultValue:null,description:"Текст подсказки",name:"hint",required:!1,type:{name:"ReactNode"}},label:{defaultValue:null,description:"Лейбл компонента",name:"label",required:!1,type:{name:"ReactNode"}},labelView:{defaultValue:null,description:"Вид лейбла внутри / снаружи",name:"labelView",required:!1,type:{name:"enum",value:[{value:'"inner"'},{value:'"outer"'}]}},leftAddons:{defaultValue:null,description:"Слот слева",name:"leftAddons",required:!1,type:{name:"ReactNode"}},rightAddons:{defaultValue:null,description:"Слот справа",name:"rightAddons",required:!1,type:{name:"ReactNode"}},leftAddonsProps:{defaultValue:null,description:"Свойства для обертки левых аддонов",name:"leftAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},rightAddonsProps:{defaultValue:null,description:"Свойства для обертки правых аддонов",name:"rightAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},bottomAddons:{defaultValue:null,description:"Слот под инпутом",name:"bottomAddons",required:!1,type:{name:"ReactNode"}},fieldClassName:{defaultValue:null,description:"Дополнительный класс для поля",name:"fieldClassName",required:!1,type:{name:"string"}},inputClassName:{defaultValue:null,description:"Дополнительный класс инпута",name:"inputClassName",required:!1,type:{name:"string"}},labelClassName:{defaultValue:null,description:"Дополнительный класс для лейбла",name:"labelClassName",required:!1,type:{name:"string"}},addonsClassName:{defaultValue:null,description:"Дополнительный класс для аддонов",name:"addonsClassName",required:!1,type:{name:"string"}},focusedClassName:{defaultValue:null,description:"Класс, который будет установлен при фокусе",name:"focusedClassName",required:!1,type:{name:"string"}},filledClassName:{defaultValue:null,description:"Класс, который будет установлен, если в поле есть значение",name:"filledClassName",required:!1,type:{name:"string"}},onClear:{defaultValue:null,description:"Обработчик нажатия на кнопку очистки",name:"onClear",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},disableUserInput:{defaultValue:null,description:"Запрещает ввод с клавиатуры",name:"disableUserInput",required:!1,type:{name:"boolean"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},defaultMatchMediaValue:{defaultValue:null,description:"Значение по-умолчанию для хука useMatchMedia",name:"defaultMatchMediaValue",required:!1,type:{name:"boolean | (() => boolean)"}},platform:{defaultValue:null,description:"Мобильный или десктопный вид компонента",name:"platform",required:!0,type:{name:"enum",value:[{value:'"desktop"'},{value:'"mobile"'}]}},inputWrapperRef:{defaultValue:null,description:"Ref для обертки input",name:"inputWrapperRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},onPickerClick:{defaultValue:null,description:"Обработчик клика на иконку календаря",name:"onPickerClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},Calendar:{defaultValue:null,description:"Компонент календаря",name:"Calendar",required:!1,type:{name:"ForwardRefExoticComponent<CalendarDesktopProps & { open: boolean; title?: string; onClose?: (() => void); onMonthTitleClick?: ((event: MouseEvent<HTMLSpanElement, MouseEvent>) => void) | undefined; yearsAmount?: number | undefined; hasHeader?: boolean | undefined; allowSelectionFromEmptyRange..."}},calendarProps:{defaultValue:{value:"{}"},description:"Пропсы календаря",name:"calendarProps",required:!1,type:{name:'Omit<ResponsiveCalendarProps, "open" | "minDate" | "maxDate" | "onClose">'}},popoverProps:{defaultValue:null,description:"Пропсы поповера",name:"popoverProps",required:!1,type:{name:"PopoverProps"}},onCalendarOpen:{defaultValue:null,description:"Обработчик открытия календаря",name:"onCalendarOpen",required:!1,type:{name:"(() => void)"}},onCalendarClose:{defaultValue:null,description:"Обработчик закрытия календаря",name:"onCalendarClose",required:!1,type:{name:"(() => void)"}},autoCorrection:{defaultValue:{value:"true"},description:"Автоматическое исправление ввода",name:"autoCorrection",required:!1,type:{name:"boolean"}},minDate:{defaultValue:{value:"new Date(1900, 0, 1).getTime()"},description:"Минимальная дата, доступная для выбора (timestamp)",name:"minDate",required:!1,type:{name:"number"}},maxDate:{defaultValue:{value:"new Date(2124, 11, 31).getTime()"},description:"Максимальная дата, доступная для выбора (timestamp)",name:"maxDate",required:!1,type:{name:"number"}},picker:{defaultValue:null,description:"Открыть календарь при клике",name:"picker",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/universal-date-input/src/components/date-input/Component.tsx#DateInput"]={docgenInfo:DateInput.__docgenInfo,name:"DateInput",path:"packages/universal-date-input/src/components/date-input/Component.tsx#DateInput"})}catch(__react_docgen_typescript_loader_error){}var startOfMonth=__webpack_require__("./node_modules/date-fns/esm/startOfMonth/index.js"),Component_excluded=["autoCorrection","breakpoint","wrapperClassName","open","onCalendarClose","value","defaultValue","inputWrapperRef","onComplete","onChange","onBlur","Calendar","wrapperHandlers","calendarRef","calendarProps","minDate","maxDate","block","dataTestId","error","popoverProps","rightAddons","picker","platform","onPickerClick","rangeBehavior"],DateRangeInput=(0,react.forwardRef)((function(_ref,ref){var _ref2,autoCorrection=_ref.autoCorrection,breakpoint=_ref.breakpoint,wrapperClassName=_ref.wrapperClassName,open=_ref.open,onCalendarClose=_ref.onCalendarClose,valueProp=_ref.value,defaultValue=_ref.defaultValue,_ref$inputWrapperRef=_ref.inputWrapperRef,inputWrapperRefProp=void 0===_ref$inputWrapperRef?null:_ref$inputWrapperRef,onComplete=_ref.onComplete,onChange=_ref.onChange,onBlur=_ref.onBlur,Calendar=_ref.Calendar,wrapperHandlers=_ref.wrapperHandlers,calendarRef=_ref.calendarRef,_ref$calendarProps=_ref.calendarProps,calendarProps=void 0===_ref$calendarProps?{}:_ref$calendarProps,_ref$minDate=_ref.minDate,minDate=void 0===_ref$minDate?DEFAULT_MAX_DATE:_ref$minDate,_ref$maxDate=_ref.maxDate,maxDate=void 0===_ref$maxDate?DEFAULT_MIN_DATE:_ref$maxDate,block=_ref.block,dataTestId=_ref.dataTestId,error=_ref.error,popoverProps=_ref.popoverProps,rightAddons=_ref.rightAddons,picker=_ref.picker,platform=_ref.platform,onPickerClick=_ref.onPickerClick,_ref$rangeBehavior=_ref.rangeBehavior,rangeBehavior=void 0===_ref$rangeBehavior?"clarification":_ref$rangeBehavior,restProps=(0,objectWithoutProperties.Z)(_ref,Component_excluded),_useState=(0,react.useState)(defaultValue),_useState2=(0,slicedToArray.Z)(_useState,2),value=_useState2[0],setValue=_useState2[1],_useState3=(0,react.useState)(calendarProps.defaultMonth),_useState4=(0,slicedToArray.Z)(_useState3,2),calendarMonth=_useState4[0],setCalendarMonth=_useState4[1],lastValidRange=(0,react.useRef)(""),inputRef=(0,react.useRef)(null),inputWrapperRef=(0,react.useRef)(null),uncontrolled=void 0===valueProp,inputValue=null!==(_ref2=null!=valueProp?valueProp:value)&&void 0!==_ref2?_ref2:"",offDays=calendarProps.offDays,_inputValue$split=inputValue.split(DATE_RANGE_SEPARATOR),_inputValue$split2=(0,slicedToArray.Z)(_inputValue$split,2),_inputValue$split2$=_inputValue$split2[0],from=void 0===_inputValue$split2$?"":_inputValue$split2$,_inputValue$split2$2=_inputValue$split2[1],to=void 0===_inputValue$split2$2?"":_inputValue$split2$2,_useMemo=(0,react.useMemo)((function(){return function getValidRange(_ref2){var from=_ref2.from,to=_ref2.to,offDays=_ref2.offDays,minDate=_ref2.minDate,maxDate=_ref2.maxDate,isValidFrom=isValidDate({value:from,maxDate:maxDate,minDate:minDate,offDays:offDays}),isValidTo=isValidDate({value:to,maxDate:maxDate,minDate:minDate,offDays:offDays});return{validFrom:isValidFrom?parseDateString(from):void 0,validTo:isValidTo?parseDateString(to):void 0}}({from:from,to:to,offDays:offDays,minDate:minDate,maxDate:maxDate})}),[from,to,offDays,maxDate,minDate]),validFrom=_useMemo.validFrom,validTo=_useMemo.validTo;(0,react.useEffect)((function(){if(autoCorrection&&(!lastValidRange.current||!inputValue)){var min=formatDate(minDate),max=formatDate(maxDate);lastValidRange.current="".concat(min).concat(DATE_RANGE_SEPARATOR).concat(max)}}),[autoCorrection,minDate,maxDate,inputValue]),(0,react.useEffect)((function(){picker&&open&&setCalendarMonth((0,startOfMonth.Z)(validTo||validFrom||Date.now()).getTime())}),[validFrom,validTo,open,picker]);var changeValue=function changeValue(val,event){null==onChange||onChange(event,{value:val}),uncontrolled&&setValue(val),isCompleteDateRange(val)&&function callOnComplete(val){var _val$split=val.split(DATE_RANGE_SEPARATOR),_val$split2=(0,slicedToArray.Z)(_val$split,2),dateFrom=_val$split2[0],dateTo=_val$split2[1];null==onComplete||onComplete(val,parseDateString(dateFrom),parseDateString(dateTo)),lastValidRange.current=val}(val)},handleMonthChange=function handleMonthChange(date){var _calendarProps$onMont;setCalendarMonth(date),null==calendarProps||null===(_calendarProps$onMont=calendarProps.onMonthChange)||void 0===_calendarProps$onMont||_calendarProps$onMont.call(calendarProps,date)},handleCalendarChange=function handleCalendarChange(date){var newValue=function updateRange(_ref3){var date=_ref3.date,validFrom=_ref3.validFrom,validTo=_ref3.validTo,rangeBehavior=_ref3.rangeBehavior,selectedFrom=validFrom?validFrom.getTime():null,selectedTo=validTo?validTo.getTime():null;"clarification"===rangeBehavior&&(void 0===date||date===selectedFrom&&date===selectedTo?(selectedFrom=null,selectedTo=null):date===selectedTo?selectedTo=null:date===selectedFrom?selectedTo?(selectedFrom=selectedTo,selectedTo=null):selectedTo=date:selectedFrom?selectedTo?Math.abs((0,differenceInDays.Z)(date,selectedTo))>Math.abs((0,differenceInDays.Z)(date,selectedFrom))?selectedFrom=date:selectedTo=date:(selectedTo=Math.max(date,selectedFrom),selectedFrom=Math.min(date,selectedFrom)):selectedTo?(selectedFrom=Math.min(date,selectedTo),selectedTo=Math.max(date,selectedTo)):selectedFrom=date),"reset"===rangeBehavior&&(void 0===date||date===selectedFrom&&date===selectedTo?(selectedFrom=null,selectedTo=null):!selectedFrom&&selectedTo?(selectedFrom=Math.min(date,selectedTo),selectedTo=Math.max(date,selectedTo)):selectedFrom?selectedTo?(selectedTo=null,selectedFrom=date):(selectedTo=Math.max(date,selectedFrom),selectedFrom=Math.min(date,selectedFrom)):selectedFrom=date);var dateFrom=selectedFrom?formatDate(selectedFrom):null,dateTo=selectedTo?formatDate(selectedTo):null;return dateFrom&&dateTo?"".concat(dateFrom).concat(DATE_RANGE_SEPARATOR).concat(dateTo):dateFrom||""}({date:date,validFrom:validFrom,validTo:validTo,rangeBehavior:rangeBehavior});changeValue(newValue,null),requestAnimationFrame((function(){var _inputRef$current;null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current||_inputRef$current.setSelectionRange(newValue.length,newValue.length)}))},renderCalendar=function renderCalendar(){return picker&&Calendar?(0,jsx_runtime.jsx)("div",{onMouseDown:preventDefault,className:index_module.calendarWrapper,children:(0,jsx_runtime.jsx)(Calendar,(0,objectSpread2.Z)((0,objectSpread2.Z)({dataTestId:(0,shared_modern.getDataTestId)(dataTestId,"calendar"),month:calendarMonth},calendarProps),{},{onMonthChange:handleMonthChange,breakpoint:breakpoint,responsive:!0,open:open,onClose:onCalendarClose,ref:calendarRef,selectedFrom:validFrom?validFrom.getTime():void 0,selectedTo:validTo?validTo.getTime():void 0,value:void 0,onChange:handleCalendarChange,minDate:minDate,maxDate:maxDate}))}):null};return(0,jsx_runtime.jsxs)("div",(0,objectSpread2.Z)((0,objectSpread2.Z)({},wrapperHandlers),{},{className:classnames_default()(index_module.wrapper,wrapperClassName,(0,defineProperty.Z)({},index_module.block,block)),tabIndex:-1,"data-test-id":(0,shared_modern.getDataTestId)(dataTestId,"wrapper"),children:[(0,jsx_runtime.jsx)(modern.Input,(0,objectSpread2.Z)((0,objectSpread2.Z)({},restProps),{},{dataTestId:dataTestId,breakpoint:breakpoint,wrapperRef:(0,react_merge_refs_esm.Z)([inputWrapperRef,inputWrapperRefProp]),ref:(0,react_merge_refs_esm.Z)([ref,inputRef]),value:inputValue,inputMode:"decimal",onInput:function handleChange(event){changeValue(event.target.value,event)},onBlur:function handleBlur(event){if(null==onBlur||onBlur(event),autoCorrection){var dateFilled=isCompleteDateRange(inputValue);if(inputValue&&!dateFilled){var _lastValidRange$curre=lastValidRange.current.split(DATE_RANGE_SEPARATOR),_lastValidRange$curre2=(0,slicedToArray.Z)(_lastValidRange$curre,2),prevFrom=_lastValidRange$curre2[0],prevTo=_lastValidRange$curre2[1],newFrom=validFrom?formatDate(validFrom):prevFrom,newTo=validTo?formatDate(validTo):prevTo;changeValue("".concat(newFrom).concat(DATE_RANGE_SEPARATOR).concat(newTo),null)}}},error:error||function getInnerError(){return!!autoCorrection&&(!!(isCompleteDate(from)&&!validFrom||isCompleteDate(to)&&!validTo)&&"Эта дата недоступна")}(),block:!0,rightAddons:(0,jsx_runtime.jsxs)(react.Fragment,{children:[rightAddons,picker&&(0,jsx_runtime.jsx)(CalendarMIcon.CalendarMIcon,{onClick:onPickerClick,className:index_module.calendarIcon,onMouseDown:preventDefault})]})})),"desktop"===platform?(0,jsx_runtime.jsx)(popover_modern.Popover,(0,objectSpread2.Z)((0,objectSpread2.Z)({offset:[0,4],position:"bottom-start",dataTestId:(0,shared_modern.getDataTestId)(dataTestId,"popover")},popoverProps),{},{open:open,anchorElement:inputWrapperRef.current,popperClassName:classnames_default()(index_module.calendarContainer,null==popoverProps?void 0:popoverProps.popperClassName),withTransition:!1,children:renderCalendar()})):renderCalendar()]}))}));try{DateRangeInput.displayName="DateRangeInput",DateRangeInput.__docgenInfo={description:"",displayName:"DateRangeInput",props:{rangeBehavior:{defaultValue:{value:"clarification"},description:"Тип выбора границ в календаре",name:"rangeBehavior",required:!1,type:{name:"enum",value:[{value:'"clarification"'},{value:'"reset"'}]}},onComplete:{defaultValue:null,description:"Обработчик окончания ввода",name:"onComplete",required:!1,type:{name:"((value: string, dateFrom: Date, dateTo: Date) => void)"}},size:{defaultValue:null,description:"Размер компонента",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'},{value:'"xl"'}]}},type:{defaultValue:null,description:"Атрибут type",name:"type",required:!1,type:{name:"enum",value:[{value:'"number"'},{value:'"card"'},{value:'"email"'},{value:'"money"'},{value:'"password"'},{value:'"tel"'},{value:'"text"'}]}},value:{defaultValue:null,description:"Значение инпута",name:"value",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"Начальное значение поля",name:"defaultValue",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Обработчик изменения значения",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement> | null, payload: { value: string; }) => void)"}},onClick:{defaultValue:null,description:"Обработчик клика по полю",name:"onClick",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},onMouseDown:{defaultValue:null,description:"Обработчик MouseDown по полю",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},block:{defaultValue:null,description:"Растягивает компонент на ширину контейнера",name:"block",required:!1,type:{name:"boolean"}},clear:{defaultValue:null,description:"Крестик для очистки поля",name:"clear",required:!1,type:{name:"boolean"}},colors:{defaultValue:null,description:"Набор цветов для компонента",name:"colors",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"inverted"'}]}},error:{defaultValue:null,description:"Отображение ошибки",name:"error",required:!1,type:{name:"ReactNode"}},success:{defaultValue:null,description:"Отображение иконки успеха",name:"success",required:!1,type:{name:"boolean"}},hint:{defaultValue:null,description:"Текст подсказки",name:"hint",required:!1,type:{name:"ReactNode"}},label:{defaultValue:null,description:"Лейбл компонента",name:"label",required:!1,type:{name:"ReactNode"}},labelView:{defaultValue:null,description:"Вид лейбла внутри / снаружи",name:"labelView",required:!1,type:{name:"enum",value:[{value:'"inner"'},{value:'"outer"'}]}},leftAddons:{defaultValue:null,description:"Слот слева",name:"leftAddons",required:!1,type:{name:"ReactNode"}},rightAddons:{defaultValue:null,description:"Слот справа",name:"rightAddons",required:!1,type:{name:"ReactNode"}},leftAddonsProps:{defaultValue:null,description:"Свойства для обертки левых аддонов",name:"leftAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},rightAddonsProps:{defaultValue:null,description:"Свойства для обертки правых аддонов",name:"rightAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},bottomAddons:{defaultValue:null,description:"Слот под инпутом",name:"bottomAddons",required:!1,type:{name:"ReactNode"}},fieldClassName:{defaultValue:null,description:"Дополнительный класс для поля",name:"fieldClassName",required:!1,type:{name:"string"}},inputClassName:{defaultValue:null,description:"Дополнительный класс инпута",name:"inputClassName",required:!1,type:{name:"string"}},labelClassName:{defaultValue:null,description:"Дополнительный класс для лейбла",name:"labelClassName",required:!1,type:{name:"string"}},addonsClassName:{defaultValue:null,description:"Дополнительный класс для аддонов",name:"addonsClassName",required:!1,type:{name:"string"}},focusedClassName:{defaultValue:null,description:"Класс, который будет установлен при фокусе",name:"focusedClassName",required:!1,type:{name:"string"}},filledClassName:{defaultValue:null,description:"Класс, который будет установлен, если в поле есть значение",name:"filledClassName",required:!1,type:{name:"string"}},onClear:{defaultValue:null,description:"Обработчик нажатия на кнопку очистки",name:"onClear",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},disableUserInput:{defaultValue:null,description:"Запрещает ввод с клавиатуры",name:"disableUserInput",required:!1,type:{name:"boolean"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},defaultMatchMediaValue:{defaultValue:null,description:"Значение по-умолчанию для хука useMatchMedia",name:"defaultMatchMediaValue",required:!1,type:{name:"boolean | (() => boolean)"}},platform:{defaultValue:null,description:"Мобильный или десктопный вид компонента",name:"platform",required:!0,type:{name:"enum",value:[{value:'"desktop"'},{value:'"mobile"'}]}},withTime:{defaultValue:null,description:"Дата со временем",name:"withTime",required:!1,type:{name:"boolean"}},open:{defaultValue:null,description:"Флаг, открыт ли календарь",name:"open",required:!0,type:{name:"boolean"}},calendarRef:{defaultValue:null,description:"Реф календаря",name:"calendarRef",required:!0,type:{name:"RefObject<HTMLDivElement>"}},inputWrapperRef:{defaultValue:null,description:"Ref для обертки input",name:"inputWrapperRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},wrapperHandlers:{defaultValue:null,description:"Обработчики на враппер",name:"wrapperHandlers",required:!1,type:{name:"{ onClick?: ((e: MouseEvent<HTMLDivElement, MouseEvent>) => void); onFocus?: ((e: FocusEvent<HTMLDivElement, Element>) => void); onBlur: (e: FocusEvent<...>) => void; onKeyDown?: ((e: KeyboardEvent<...>) => void) | undefined; } | undefined"}},onPickerClick:{defaultValue:null,description:"Обработчик клика на иконку календаря",name:"onPickerClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},Calendar:{defaultValue:null,description:"Компонент календаря",name:"Calendar",required:!1,type:{name:"ForwardRefExoticComponent<CalendarDesktopProps & { open: boolean; title?: string; onClose?: (() => void); onMonthTitleClick?: ((event: MouseEvent<HTMLSpanElement, MouseEvent>) => void) | undefined; yearsAmount?: number | undefined; hasHeader?: boolean | undefined; allowSelectionFromEmptyRange..."}},calendarProps:{defaultValue:{value:"{}"},description:"Пропсы календаря",name:"calendarProps",required:!1,type:{name:'Omit<ResponsiveCalendarProps, "open" | "minDate" | "maxDate" | "onClose">'}},popoverProps:{defaultValue:null,description:"Пропсы поповера",name:"popoverProps",required:!1,type:{name:"PopoverProps"}},onCalendarOpen:{defaultValue:null,description:"Обработчик открытия календаря",name:"onCalendarOpen",required:!1,type:{name:"(() => void)"}},onCalendarClose:{defaultValue:null,description:"Обработчик закрытия календаря",name:"onCalendarClose",required:!1,type:{name:"(() => void)"}},autoCorrection:{defaultValue:{value:"true"},description:"Автоматическое исправление ввода",name:"autoCorrection",required:!1,type:{name:"boolean"}},minDate:{defaultValue:{value:"new Date(2124, 11, 31).getTime()"},description:"Минимальная дата, доступная для выбора (timestamp)",name:"minDate",required:!1,type:{name:"number"}},maxDate:{defaultValue:{value:"new Date(1900, 0, 1).getTime()"},description:"Максимальная дата, доступная для выбора (timestamp)",name:"maxDate",required:!1,type:{name:"number"}},picker:{defaultValue:null,description:"Открыть календарь при клике",name:"picker",required:!1,type:{name:"boolean"}},wrapperClassName:{defaultValue:null,description:"Дополнительный класс обертки",name:"wrapperClassName",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/universal-date-input/src/components/date-range-input/Component.tsx#DateRangeInput"]={docgenInfo:DateRangeInput.__docgenInfo,name:"DateRangeInput",path:"packages/universal-date-input/src/components/date-range-input/Component.tsx#DateRangeInput"})}catch(__react_docgen_typescript_loader_error){}var time_input_Component_excluded=["autoCorrection","value","defaultValue","onChange","onComplete","onBlur"],defaultTime="00".concat(":","00"),TimeInput=(0,react.forwardRef)((function(_ref,ref){var _ref2,autoCorrection=_ref.autoCorrection,valueProp=_ref.value,defaultValue=_ref.defaultValue,onChange=_ref.onChange,onComplete=_ref.onComplete,onBlur=_ref.onBlur,restProps=(0,objectWithoutProperties.Z)(_ref,time_input_Component_excluded),_useState=(0,react.useState)(defaultValue),_useState2=(0,slicedToArray.Z)(_useState,2),value=_useState2[0],setValue=_useState2[1],lastValidTime=(0,react.useRef)(defaultTime),uncontrolled=void 0===valueProp,inputValue=null!==(_ref2=null!=value?value:valueProp)&&void 0!==_ref2?_ref2:"";(0,react.useEffect)((function(){autoCorrection&&!inputValue&&(lastValidTime.current=defaultTime)}),[autoCorrection,inputValue]);var changeValue=function changeValue(val,event){null==onChange||onChange(event,{value:val}),uncontrolled&&setValue(val),isCompleteTime(val,!0)&&function callOnComplete(val){null==onComplete||onComplete(val),lastValidTime.current=val}(val)};return(0,jsx_runtime.jsx)(modern.Input,(0,objectSpread2.Z)((0,objectSpread2.Z)({},restProps),{},{onBlur:function handleBlur(event){null==onBlur||onBlur(event),autoCorrection&&inputValue&&!isCompleteTime(inputValue,!0)&&changeValue(lastValidTime.current,null)},onInput:function handleChange(event){changeValue(event.target.value,event)},ref:ref,value:inputValue,inputMode:"decimal"}))}));try{TimeInput.displayName="TimeInput",TimeInput.__docgenInfo={description:"",displayName:"TimeInput",props:{autoCorrection:{defaultValue:{value:"true"},description:"Автоматическое исправление ввода",name:"autoCorrection",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Обработчик изменения значения",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement> | null, payload: { value: string; }) => void)"}},onComplete:{defaultValue:null,description:"Обработчик окончания ввода",name:"onComplete",required:!1,type:{name:"((value: string) => void)"}},size:{defaultValue:null,description:"Размер компонента",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'},{value:'"xl"'}]}},type:{defaultValue:null,description:"Атрибут type",name:"type",required:!1,type:{name:"enum",value:[{value:'"number"'},{value:'"card"'},{value:'"email"'},{value:'"money"'},{value:'"password"'},{value:'"tel"'},{value:'"text"'}]}},value:{defaultValue:null,description:"Значение поля ввода",name:"value",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"Начальное значение поля",name:"defaultValue",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"Обработчик клика по полю",name:"onClick",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},onMouseDown:{defaultValue:null,description:"Обработчик MouseDown по полю",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},block:{defaultValue:null,description:"Растягивает компонент на ширину контейнера",name:"block",required:!1,type:{name:"boolean"}},clear:{defaultValue:null,description:"Крестик для очистки поля",name:"clear",required:!1,type:{name:"boolean"}},colors:{defaultValue:null,description:"Набор цветов для компонента",name:"colors",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"inverted"'}]}},error:{defaultValue:null,description:"Отображение ошибки",name:"error",required:!1,type:{name:"ReactNode"}},success:{defaultValue:null,description:"Отображение иконки успеха",name:"success",required:!1,type:{name:"boolean"}},hint:{defaultValue:null,description:"Текст подсказки",name:"hint",required:!1,type:{name:"ReactNode"}},label:{defaultValue:null,description:"Лейбл компонента",name:"label",required:!1,type:{name:"ReactNode"}},labelView:{defaultValue:null,description:"Вид лейбла внутри / снаружи",name:"labelView",required:!1,type:{name:"enum",value:[{value:'"inner"'},{value:'"outer"'}]}},wrapperRef:{defaultValue:null,description:"Ref для обертки input",name:"wrapperRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},leftAddons:{defaultValue:null,description:"Слот слева",name:"leftAddons",required:!1,type:{name:"ReactNode"}},rightAddons:{defaultValue:null,description:"Слот справа",name:"rightAddons",required:!1,type:{name:"ReactNode"}},leftAddonsProps:{defaultValue:null,description:"Свойства для обертки левых аддонов",name:"leftAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},rightAddonsProps:{defaultValue:null,description:"Свойства для обертки правых аддонов",name:"rightAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},bottomAddons:{defaultValue:null,description:"Слот под инпутом",name:"bottomAddons",required:!1,type:{name:"ReactNode"}},fieldClassName:{defaultValue:null,description:"Дополнительный класс для поля",name:"fieldClassName",required:!1,type:{name:"string"}},inputClassName:{defaultValue:null,description:"Дополнительный класс инпута",name:"inputClassName",required:!1,type:{name:"string"}},labelClassName:{defaultValue:null,description:"Дополнительный класс для лейбла",name:"labelClassName",required:!1,type:{name:"string"}},addonsClassName:{defaultValue:null,description:"Дополнительный класс для аддонов",name:"addonsClassName",required:!1,type:{name:"string"}},focusedClassName:{defaultValue:null,description:"Класс, который будет установлен при фокусе",name:"focusedClassName",required:!1,type:{name:"string"}},filledClassName:{defaultValue:null,description:"Класс, который будет установлен, если в поле есть значение",name:"filledClassName",required:!1,type:{name:"string"}},onClear:{defaultValue:null,description:"Обработчик нажатия на кнопку очистки",name:"onClear",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},disableUserInput:{defaultValue:null,description:"Запрещает ввод с клавиатуры",name:"disableUserInput",required:!1,type:{name:"boolean"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},defaultMatchMediaValue:{defaultValue:null,description:"Значение по-умолчанию для хука useMatchMedia",name:"defaultMatchMediaValue",required:!1,type:{name:"boolean | (() => boolean)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/universal-date-input/src/components/time-input/Component.tsx#TimeInput"]={docgenInfo:TimeInput.__docgenInfo,name:"TimeInput",path:"packages/universal-date-input/src/components/time-input/Component.tsx#TimeInput"})}catch(__react_docgen_typescript_loader_error){}var base_universal_date_input_Component_excluded=["autoCorrection","minDate","maxDate","view","picker","onCalendarClose","onCalendarOpen","platform","onKeyDown","disabled","readOnly","fieldClassName","disableUserInput"],BaseUniversalDateInput=(0,react.forwardRef)((function(_ref,ref){var _ref$autoCorrection=_ref.autoCorrection,autoCorrection=void 0===_ref$autoCorrection||_ref$autoCorrection,_ref$minDate=_ref.minDate,minDate=void 0===_ref$minDate?DEFAULT_MIN_DATE:_ref$minDate,_ref$maxDate=_ref.maxDate,maxDate=void 0===_ref$maxDate?DEFAULT_MAX_DATE:_ref$maxDate,view=_ref.view,picker=_ref.picker,onCalendarClose=_ref.onCalendarClose,onCalendarOpen=_ref.onCalendarOpen,platform=_ref.platform,onKeyDown=_ref.onKeyDown,disabled=_ref.disabled,readOnly=_ref.readOnly,fieldClassName=_ref.fieldClassName,disableUserInput=_ref.disableUserInput,restProps=(0,objectWithoutProperties.Z)(_ref,base_universal_date_input_Component_excluded),_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),correctionOccurred=_useState2[0],setCorrectionOccurred=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.Z)(_useState3,2),open=_useState4[0],setOpen=_useState4[1],inputRef=(0,react.useRef)(null),calendarRef=(0,react.useRef)(null),inputWrapperRef=(0,react.useRef)(null),maskOptions=(0,react.useMemo)((function(){return function createMaskOptions(view,min,max,autoCorrection,onCorrection){var _ref,templateSegments,separators,template=TEMPLATES[view],stringTemplate=segmentsToString(template.segments,template.separators);return{mask:(_ref=template,templateSegments=_ref.segments,separators=_ref.separators,function(_ref2){var value=_ref2.value;return value.length<2?[/\d/]:segmentsToPattern(shiftSegmentsData(getValueSegments(value,separators),templateSegments),separators)}),preprocessors:[function(state,actionType){var elementState=state.elementState,data=state.data,value=elementState.value,_elementState$selecti=(0,slicedToArray.Z)(elementState.selection,2),from=_elementState$selecti[0],to=_elementState$selecti[1];if(["deleteForward","deleteBackward"].includes(actionType)){var separators=value.slice(from,to).replace(/\d/g,""),caretPos="deleteForward"===actionType?to:from;return{elementState:{value:value.slice(0,from)+separators+value.slice(to),selection:[caretPos,caretPos]},data:data}}return data.replace(/\D/g,"")?state:{elementState:elementState,data:""}}].concat((0,toConsumableArray.Z)(autoCorrection?[createValidationPreprocessor(template,stringTemplate,min,max,onCorrection)]:[])),postprocessors:[function(state,prevState){var _prevState$selection=(0,slicedToArray.Z)(prevState.selection,2),prevFrom=_prevState$selection[0],prevTo=_prevState$selection[1],selection=state.selection,value=state.value,_selection=(0,slicedToArray.Z)(selection,2),from=_selection[0],to=_selection[1];if(prevFrom===prevTo&&from===to&&from-prevFrom>1&&!isDigit(value[from-1])){for(var caretPos=from-1;caretPos>0&&!isDigit(value[caretPos-1]);)caretPos-=1;return(0,objectSpread2.Z)((0,objectSpread2.Z)({},state),{},{selection:[caretPos,caretPos]})}return state}],plugins:[createCaretPosPlugin(template)]}}(view,(0,startOfDay.Z)(minDate),(0,endOfDay.Z)(maxDate),autoCorrection,handleCorrection)}),[view,minDate,maxDate,autoCorrection]),maskRef=(0,index_esm.I)({options:maskOptions});(0,react.useEffect)((function(){var timeoutId;return correctionOccurred&&(timeoutId=setTimeout((function(){return setCorrectionOccurred(!1)}),150)),function(){return clearTimeout(timeoutId)}}),[correctionOccurred]);var openCalendar=function openCalendar(){picker&&setOpen((function(p){return p||null==onCalendarOpen||onCalendarOpen(),!0}))},closeCalendar=function closeCalendar(){picker&&setOpen((function(p){return p&&(null==onCalendarClose||onCalendarClose()),!1}))};function handleCorrection(){setCorrectionOccurred(!0)}var inputDisabled=disabled||readOnly,commonProps={autoComplete:picker?"off":void 0,disableUserInput:disableUserInput,autoCorrection:autoCorrection,disabled:disabled,readOnly:readOnly,fieldClassName:classnames_default()(fieldClassName,(0,defineProperty.Z)({},index_module.blink,correctionOccurred)),onKeyDown:function handleInputKeyDown(event){["ArrowDown","ArrowUp"].includes(event.key)&&calendarRef.current&&(event.preventDefault(),calendarRef.current.focus()),"Enter"===event.key&&(open?closeCalendar():openCalendar()),null==onKeyDown||onKeyDown(event)}},pickerProps={platform:platform,picker:picker,onCalendarClose:closeCalendar,onPickerClick:function handlePickerClick(){"mobile"!==platform||disableUserInput||open||openCalendar()},wrapperHandlers:{onKeyDown:inputDisabled?void 0:function handleKeyDown(event){"Escape"===event.key&&closeCalendar()},onClick:inputDisabled?void 0:function handleClick(event){var _inputWrapperRef$curr;if(null!==(_inputWrapperRef$curr=inputWrapperRef.current)&&void 0!==_inputWrapperRef$curr&&_inputWrapperRef$curr.contains(event.target)){var _inputRef$current;if("desktop"===platform)open||openCalendar(),null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current||_inputRef$current.focus();"mobile"===platform&&disableUserInput&&!open&&openCalendar()}},onFocus:inputDisabled?void 0:function handleFocus(event){var _inputWrapperRef$curr2;null!==(_inputWrapperRef$curr2=inputWrapperRef.current)&&void 0!==_inputWrapperRef$curr2&&_inputWrapperRef$curr2.contains(event.target)&&"desktop"===platform&&openCalendar()},onBlur:function handleBlur(event){if("desktop"===platform){var _calendarRef$current,target=event.relatedTarget||document.activeElement;inputRef.current!==target&&!1===(null===(_calendarRef$current=calendarRef.current)||void 0===_calendarRef$current?void 0:_calendarRef$current.contains(target))&&closeCalendar()}}},minDate:minDate,maxDate:maxDate};switch(view){case"date":case"date-time":return(0,jsx_runtime.jsx)(DateInput,(0,objectSpread2.Z)((0,objectSpread2.Z)((0,objectSpread2.Z)((0,objectSpread2.Z)({placeholder:"date-time"===view?"ДД.ММ.ГГГГ, ЧЧ:ММ":"ДД.ММ.ГГГГ"},restProps),commonProps),pickerProps),{},{withTime:"date-time"===view,open:open,calendarRef:calendarRef,inputWrapperRef:inputWrapperRef,ref:(0,react_merge_refs_esm.Z)([ref,maskRef,inputRef])}));case"date-range":return(0,jsx_runtime.jsx)(DateRangeInput,(0,objectSpread2.Z)((0,objectSpread2.Z)((0,objectSpread2.Z)((0,objectSpread2.Z)({placeholder:"ДД.ММ.ГГГГ".concat(DATE_RANGE_SEPARATOR,"ДД.ММ.ГГГГ")},restProps),commonProps),pickerProps),{},{open:open,calendarRef:calendarRef,inputWrapperRef:inputWrapperRef,ref:(0,react_merge_refs_esm.Z)([ref,maskRef,inputRef])}));case"time":return(0,jsx_runtime.jsx)(TimeInput,(0,objectSpread2.Z)((0,objectSpread2.Z)((0,objectSpread2.Z)({placeholder:"ЧЧ".concat(":","ММ")},restProps),commonProps),{},{ref:(0,react_merge_refs_esm.Z)([ref,maskRef,inputRef])}));default:throw new Error("The view prop must be specified")}}));try{BaseUniversalDateInput.displayName="BaseUniversalDateInput",BaseUniversalDateInput.__docgenInfo={description:"",displayName:"BaseUniversalDateInput",props:{autoCorrection:{defaultValue:{value:"true"},description:"Автоматическое исправление ввода",name:"autoCorrection",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"Значение инпута",name:"value",required:!1,type:{name:"string"}},minDate:{defaultValue:{value:"new Date(1900, 0, 1).getTime()"},description:"Минимальная дата, доступная для выбора (timestamp)",name:"minDate",required:!1,type:{name:"number"}},maxDate:{defaultValue:{value:"new Date(2124, 11, 31).getTime()"},description:"Максимальная дата, доступная для выбора (timestamp)",name:"maxDate",required:!1,type:{name:"number"}},view:{defaultValue:null,description:"Вид компонента",name:"view",required:!0,type:{name:"enum",value:[{value:'"date"'},{value:'"date-time"'},{value:'"date-range"'},{value:'"time"'}]}},platform:{defaultValue:null,description:"Мобильный или десктопный вид компонента",name:"platform",required:!0,type:{name:"enum",value:[{value:'"desktop"'},{value:'"mobile"'}]}},picker:{defaultValue:null,description:"Открыть календарь при клике",name:"picker",required:!1,type:{name:"boolean"}},Calendar:{defaultValue:null,description:"Компонент календаря",name:"Calendar",required:!1,type:{name:"ForwardRefExoticComponent<CalendarDesktopProps & { open: boolean; title?: string; onClose?: (() => void); onMonthTitleClick?: ((event: MouseEvent<HTMLSpanElement, MouseEvent>) => void) | undefined; yearsAmount?: number | undefined; hasHeader?: boolean | undefined; allowSelectionFromEmptyRange..."}},calendarProps:{defaultValue:null,description:"Пропсы календаря",name:"calendarProps",required:!1,type:{name:'Omit<ResponsiveCalendarProps, "open" | "minDate" | "maxDate" | "onClose">'}},popoverProps:{defaultValue:null,description:"Пропсы поповера",name:"popoverProps",required:!1,type:{name:"PopoverProps"}},inputWrapperRef:{defaultValue:null,description:"Ref для обертки input",name:"inputWrapperRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},onCalendarOpen:{defaultValue:null,description:"Обработчик открытия календаря",name:"onCalendarOpen",required:!1,type:{name:"(() => void)"}},onCalendarClose:{defaultValue:null,description:"Обработчик закрытия календаря",name:"onCalendarClose",required:!1,type:{name:"(() => void)"}},onPickerClick:{defaultValue:null,description:"Обработчик клика на иконку календаря",name:"onPickerClick",required:!1,type:{name:"((event: MouseEvent<Element, MouseEvent>) => void)"}},onChange:{defaultValue:null,description:"Обработчик изменения значения",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement> | null, payload: { value: string; }) => void)"}},size:{defaultValue:null,description:"Размер компонента",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'},{value:'"l"'},{value:'"xl"'}]}},type:{defaultValue:null,description:"Атрибут type",name:"type",required:!1,type:{name:"enum",value:[{value:'"number"'},{value:'"card"'},{value:'"email"'},{value:'"money"'},{value:'"password"'},{value:'"tel"'},{value:'"text"'}]}},defaultValue:{defaultValue:null,description:"Начальное значение поля",name:"defaultValue",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"Обработчик клика по полю",name:"onClick",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},onMouseDown:{defaultValue:null,description:"Обработчик MouseDown по полю",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)"}},block:{defaultValue:null,description:"Растягивает компонент на ширину контейнера",name:"block",required:!1,type:{name:"boolean"}},clear:{defaultValue:null,description:"Крестик для очистки поля",name:"clear",required:!1,type:{name:"boolean"}},colors:{defaultValue:null,description:"Набор цветов для компонента",name:"colors",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"inverted"'}]}},error:{defaultValue:null,description:"Отображение ошибки",name:"error",required:!1,type:{name:"ReactNode"}},success:{defaultValue:null,description:"Отображение иконки успеха",name:"success",required:!1,type:{name:"boolean"}},hint:{defaultValue:null,description:"Текст подсказки",name:"hint",required:!1,type:{name:"ReactNode"}},label:{defaultValue:null,description:"Лейбл компонента",name:"label",required:!1,type:{name:"ReactNode"}},labelView:{defaultValue:null,description:"Вид лейбла внутри / снаружи",name:"labelView",required:!1,type:{name:"enum",value:[{value:'"inner"'},{value:'"outer"'}]}},leftAddons:{defaultValue:null,description:"Слот слева",name:"leftAddons",required:!1,type:{name:"ReactNode"}},rightAddons:{defaultValue:null,description:"Слот справа",name:"rightAddons",required:!1,type:{name:"ReactNode"}},leftAddonsProps:{defaultValue:null,description:"Свойства для обертки левых аддонов",name:"leftAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},rightAddonsProps:{defaultValue:null,description:"Свойства для обертки правых аддонов",name:"rightAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},bottomAddons:{defaultValue:null,description:"Слот под инпутом",name:"bottomAddons",required:!1,type:{name:"ReactNode"}},fieldClassName:{defaultValue:null,description:"Дополнительный класс для поля",name:"fieldClassName",required:!1,type:{name:"string"}},inputClassName:{defaultValue:null,description:"Дополнительный класс инпута",name:"inputClassName",required:!1,type:{name:"string"}},labelClassName:{defaultValue:null,description:"Дополнительный класс для лейбла",name:"labelClassName",required:!1,type:{name:"string"}},addonsClassName:{defaultValue:null,description:"Дополнительный класс для аддонов",name:"addonsClassName",required:!1,type:{name:"string"}},focusedClassName:{defaultValue:null,description:"Класс, который будет установлен при фокусе",name:"focusedClassName",required:!1,type:{name:"string"}},filledClassName:{defaultValue:null,description:"Класс, который будет установлен, если в поле есть значение",name:"filledClassName",required:!1,type:{name:"string"}},onClear:{defaultValue:null,description:"Обработчик нажатия на кнопку очистки",name:"onClear",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},disableUserInput:{defaultValue:null,description:"Запрещает ввод с клавиатуры",name:"disableUserInput",required:!1,type:{name:"boolean"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},defaultMatchMediaValue:{defaultValue:null,description:"Значение по-умолчанию для хука useMatchMedia",name:"defaultMatchMediaValue",required:!1,type:{name:"boolean | (() => boolean)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/universal-date-input/src/components/base-universal-date-input/Component.tsx#BaseUniversalDateInput"]={docgenInfo:BaseUniversalDateInput.__docgenInfo,name:"BaseUniversalDateInput",path:"packages/universal-date-input/src/components/base-universal-date-input/Component.tsx#BaseUniversalDateInput"})}catch(__react_docgen_typescript_loader_error){}}}]);