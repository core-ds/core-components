"use strict";(self.webpackChunk_alfalab_core_components=self.webpackChunk_alfalab_core_components||[]).push([[3743],{"./packages/gallery/src/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Gallery:function(){return Gallery},PLACEHOLDER_HEIGHT:function(){return PLACEHOLDER_HEIGHT},PLACEHOLDER_WIDTH:function(){return PLACEHOLDER_WIDTH},TestIds:function(){return TestIds},getImageAlt:function(){return getImageAlt},getImageKey:function(){return getImageKey},isSmallImage:function(){return isSmallImage},splitFilename:function(){return splitFilename}});var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),modern=__webpack_require__("./dist/base-modal/modern/index.js"),mockFn=function mockFn(){},GalleryContext=(0,react.createContext)({singleSlide:!1,currentSlideIndex:0,images:[],imagesMeta:[],fullScreen:!1,initialSlide:0,setFullScreen:mockFn,setImageMeta:mockFn,slideTo:mockFn,slideNext:mockFn,slidePrev:mockFn,getSwiper:mockFn,setSwiper:mockFn,onClose:mockFn,setCurrentSlideIndex:mockFn,getCurrentImage:mockFn,getCurrentImageMeta:mockFn}),SEPARATION_POSITION_SHIFT=3;function splitFilename(filename){var dotPosition=filename.lastIndexOf("."),head=filename,tail="",splitPosition=dotPosition-SEPARATION_POSITION_SHIFT;return splitPosition>0&&(head=filename.slice(0,splitPosition),tail=filename.slice(splitPosition)),[head,tail]}var PLACEHOLDER_WIDTH=400,PLACEHOLDER_HEIGHT=300,getImageKey=function getImageKey(_ref,index){var _ref$name=_ref.name,name=void 0===_ref$name?"":_ref$name,src=_ref.src;return"".concat(name,"-").concat(index,"-").concat(src)},getImageAlt=function getImageAlt(_ref2,index){var alt=_ref2.alt,name=_ref2.name;return alt||name||"Изображение ".concat(index+1)},isSmallImage=function isSmallImage(meta){return!!meta&&(meta.width<PLACEHOLDER_WIDTH&&meta.height<PLACEHOLDER_HEIGHT)},TestIds={ACTIVE_IMAGE:"active-image",PREV_SLIDE_BUTTON:"prev-slide-button",NEXT_SLIDE_BUTTON:"next-slide-button",CLOSE_BUTTON:"close-button",FULLSCREEN_BUTTON:"fullscreen-button",EXIT_FULLSCREEN_BUTTON:"exit-fullscreen-button",DOWNLOAD_BUTTON:"download-button",NAVIGATION_BAR:"navigation-bar"},defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),esm=__webpack_require__("./node_modules/@alfalab/hooks/dist/esm/index.js"),NoImagePaths_baseImage="M 30.5 6.5 L 4 6.5 C 2.894531 6.5 2 7.394531 2 8.5 L 2 31.5 C 2 32.605469 2.894531 33.5 4 33.5 L 36 33.5 C 37.105469 33.5 38 32.605469 38 31.5 L 38 14 L 32.367188 14 C 31.335938 14 30.5 13.164062 30.5 12.132812 Z M 11.917969 15.667969 C 12.285156 15.296875 12.882812 15.296875 13.25 15.667969 L 14.25 16.667969 L 15.25 15.667969 C 15.617188 15.296875 16.214844 15.296875 16.582031 15.667969 C 16.953125 16.035156 16.953125 16.632812 16.582031 17 L 15.582031 18 L 16.582031 19 C 16.953125 19.367188 16.953125 19.964844 16.582031 20.332031 C 16.214844 20.703125 15.617188 20.703125 15.25 20.332031 L 14.25 19.332031 L 13.25 20.332031 C 12.882812 20.703125 12.285156 20.703125 11.917969 20.332031 C 11.546875 19.964844 11.546875 19.367188 11.917969 19 L 12.917969 18 L 11.917969 17 C 11.546875 16.632812 11.546875 16.035156 11.917969 15.667969 Z M 24.75 15.667969 C 24.382812 15.296875 23.785156 15.296875 23.414062 15.667969 C 23.046875 16.035156 23.046875 16.632812 23.414062 17 L 24.414062 18 L 23.414062 19 C 23.046875 19.367188 23.046875 19.964844 23.414062 20.332031 C 23.785156 20.703125 24.378906 20.703125 24.75 20.332031 L 25.75 19.332031 L 26.75 20.332031 C 27.117188 20.703125 27.714844 20.703125 28.082031 20.332031 C 28.449219 19.964844 28.449219 19.367188 28.082031 19 L 27.082031 18 L 28.082031 17 C 28.449219 16.632812 28.449219 16.035156 28.082031 15.667969 C 27.714844 15.296875 27.117188 15.296875 26.75 15.667969 L 25.75 16.667969 Z M 14.40625 27.914062 L 14.402344 27.914062 C 13.898438 28.136719 13.308594 27.910156 13.085938 27.40625 C 12.863281 26.902344 13.089844 26.308594 13.59375 26.085938 L 14 27 C 13.59375 26.085938 13.59375 26.085938 13.59375 26.085938 L 13.597656 26.085938 L 13.601562 26.082031 L 13.609375 26.078125 L 13.621094 26.074219 L 13.636719 26.066406 C 13.660156 26.058594 13.695312 26.042969 13.734375 26.027344 C 13.816406 25.996094 13.933594 25.949219 14.082031 25.898438 C 14.378906 25.796875 14.808594 25.660156 15.359375 25.527344 C 16.457031 25.261719 18.035156 25 20 25 C 21.964844 25 23.542969 25.261719 24.640625 25.527344 C 25.191406 25.660156 25.621094 25.796875 25.917969 25.898438 C 25.96875 25.917969 26.015625 25.933594 26.058594 25.949219 C 26.144531 25.980469 26.210938 26.007812 26.265625 26.027344 C 26.285156 26.035156 26.304688 26.042969 26.320312 26.050781 C 26.335938 26.054688 26.351562 26.0625 26.363281 26.066406 L 26.382812 26.078125 L 26.390625 26.078125 L 26.398438 26.082031 L 26.402344 26.085938 L 26.40625 26.085938 C 26.40625 26.085938 26.40625 26.085938 26.402344 26.089844 L 26.398438 26.105469 L 26.40625 26.085938 C 26.910156 26.308594 27.136719 26.902344 26.914062 27.40625 C 26.691406 27.910156 26.101562 28.136719 25.597656 27.914062 L 20.449219 27.914062 L 25.59375 27.914062 L 25.585938 27.910156 C 25.574219 27.90625 25.554688 27.898438 25.527344 27.886719 C 25.472656 27.863281 25.382812 27.832031 25.261719 27.789062 C 25.019531 27.703125 24.652344 27.589844 24.171875 27.472656 C 23.207031 27.238281 21.785156 27 20 27 C 18.214844 27 16.792969 27.238281 15.828125 27.472656 C 15.347656 27.589844 14.980469 27.703125 14.738281 27.789062 C 14.617188 27.832031 14.527344 27.863281 14.472656 27.886719 C 14.445312 27.898438 14.425781 27.90625 14.414062 27.910156 L 14.40625 27.914062 L 20.449219 27.914062 Z M 14.40625 27.914062",NoImagePaths_triangleImage="M 38 12 L 32.5 12 L 32.5 6.5 Z M 38 12",index_module={component:"component_mtvxt",active:"active_iRVjC",image:"image_JMHXU",preview:"preview_W5avX",loading:"loading_k_GI3",brokenImageWrapper:"brokenImageWrapper_Y58V3",brokenIcon:"brokenIcon_ZF1vD",focused:"focused_c0moA"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Component_ImagePreview=function ImagePreview(_ref){var _cn,_cn2,image=_ref.image,_ref$active=_ref.active,active=void 0!==_ref$active&&_ref$active,index=_ref.index,onSelect=_ref.onSelect,className=_ref.className,imagesMeta=(0,react.useContext)(GalleryContext).imagesMeta,ref=(0,react.useRef)(null),_useFocus=(0,esm.KK)(ref,"keyboard"),focused=(0,slicedToArray.Z)(_useFocus,1)[0],meta=imagesMeta[index],isBroken=Boolean(null==meta?void 0:meta.broken);return(0,jsx_runtime.jsx)("div",{className:classnames_default()(index_module.component,(_cn={},(0,defineProperty.Z)(_cn,index_module.active,active),(0,defineProperty.Z)(_cn,index_module.focused,focused),_cn),className),onClick:function handleClick(){onSelect(index)},role:"button",onKeyDown:function handleKeyDown(event){"Enter"===event.key&&onSelect(index)},tabIndex:0,ref:ref,"aria-label":"Перейти к изображению ".concat(index+1),children:isBroken?(0,jsx_runtime.jsx)("div",{className:classnames_default()(index_module.preview,index_module.brokenImageWrapper),children:(0,jsx_runtime.jsx)("div",{className:index_module.brokenIcon,children:(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,jsx_runtime.jsx)("rect",{width:"40",height:"40",fill:"none"}),(0,jsx_runtime.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:NoImagePaths_baseImage,fill:"#89898A"}),(0,jsx_runtime.jsx)("path",{d:NoImagePaths_triangleImage,fill:"#89898A"})]})})}):(0,jsx_runtime.jsx)("div",{className:classnames_default()(index_module.preview,index_module.image,(_cn2={},(0,defineProperty.Z)(_cn2,index_module.broken,isBroken),(0,defineProperty.Z)(_cn2,index_module.loading,!meta),_cn2)),style:{backgroundImage:"url(".concat(image.src,")")}})})};try{Component_ImagePreview.displayName="ImagePreview",Component_ImagePreview.__docgenInfo={description:"",displayName:"ImagePreview",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"GalleryImage"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},active:{defaultValue:{value:"false"},description:"",name:"active",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(index: number) => void"}},className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/image-preview/Component.tsx#ImagePreview"]={docgenInfo:Component_ImagePreview.__docgenInfo,name:"ImagePreview",path:"packages/gallery/src/components/image-preview/Component.tsx#ImagePreview"})}catch(__react_docgen_typescript_loader_error){}try{ImagePreview.displayName="ImagePreview",ImagePreview.__docgenInfo={description:"",displayName:"ImagePreview",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"GalleryImage"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},active:{defaultValue:{value:"false"},description:"",name:"active",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(index: number) => void"}},className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/image-preview/index.tsx#ImagePreview"]={docgenInfo:ImagePreview.__docgenInfo,name:"ImagePreview",path:"packages/gallery/src/components/image-preview/index.tsx#ImagePreview"})}catch(__react_docgen_typescript_loader_error){}var navigation_bar_index_module_component="component_Q3fhU",navigation_bar_index_module_preview="preview_KzyqM",NavigationBar=function NavigationBar(){var containerRef=(0,react.useRef)(null),_useContext=(0,react.useContext)(GalleryContext),images=_useContext.images,currentSlideIndex=_useContext.currentSlideIndex,setCurrentSlideIndex=_useContext.setCurrentSlideIndex,swiper=(0,_useContext.getSwiper)(),handlePreviewSelect=function handlePreviewSelect(index){null==setCurrentSlideIndex||setCurrentSlideIndex(index),swiper&&swiper.slideTo(index)},scroll=(0,react.useCallback)((function(scrollValue){containerRef.current&&containerRef.current.scroll({top:0,left:containerRef.current.scrollLeft+scrollValue,behavior:"smooth"})}),[]),handlePreviewPosition=(0,react.useCallback)((function(preview,containerWidth){var _preview$getBoundingC=preview.getBoundingClientRect(),right=_preview$getBoundingC.right,left=_preview$getBoundingC.left;if(right>containerWidth)scroll(right-containerWidth+24);else if(left<0){scroll(left-24)}}),[scroll]);return(0,react.useEffect)((function(){if(containerRef.current){var containerWidth=containerRef.current.getBoundingClientRect().width,activePreview=containerRef.current.children[currentSlideIndex];activePreview&&handlePreviewPosition(activePreview,containerWidth)}}),[currentSlideIndex,handlePreviewPosition,scroll]),(0,jsx_runtime.jsx)("div",{className:navigation_bar_index_module_component,ref:containerRef,onKeyDown:function handleKeyDown(event){["ArrowLeft","ArrowRight"].includes(event.key)&&event.preventDefault()},"data-test-id":TestIds.NAVIGATION_BAR,children:images.map((function(image,index){var active=index===currentSlideIndex;return(0,jsx_runtime.jsx)(Component_ImagePreview,{image:image,active:active,index:index,onSelect:handlePreviewSelect,className:navigation_bar_index_module_preview},getImageKey(image,index))}))})};try{NavigationBar.displayName="NavigationBar",NavigationBar.__docgenInfo={description:"",displayName:"NavigationBar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/navigation-bar/Component.tsx#NavigationBar"]={docgenInfo:NavigationBar.__docgenInfo,name:"NavigationBar",path:"packages/gallery/src/components/navigation-bar/Component.tsx#NavigationBar"})}catch(__react_docgen_typescript_loader_error){}var typography_modern=__webpack_require__("./dist/typography/modern/index.js"),header_info_block_index_module_info="info_uzKIX",header_info_block_index_module_filenameHead="filenameHead_ZGMUh",header_info_block_index_module_filenameContainer="filenameContainer_j5oEY",header_info_block_index_module_description="description_LkFxY",HeaderInfoBlock=function HeaderInfoBlock(_ref){var filename=_ref.filename,description=_ref.description,_splitFilename=splitFilename(filename),_splitFilename2=(0,slicedToArray.Z)(_splitFilename,2),head=_splitFilename2[0],tail=_splitFilename2[1];return(0,jsx_runtime.jsxs)("div",{className:header_info_block_index_module_info,children:[(0,jsx_runtime.jsxs)("div",{className:header_info_block_index_module_filenameContainer,children:[(0,jsx_runtime.jsx)(typography_modern.Typography.Title,{tag:"h1",className:header_info_block_index_module_filenameHead,view:"xsmall",font:"system",color:"static-primary-light",children:head}),(0,jsx_runtime.jsx)(typography_modern.Typography.Title,{tag:"h1",view:"xsmall",font:"system",color:"static-primary-light",children:tail})]}),description?(0,jsx_runtime.jsx)(typography_modern.Typography.Text,{className:header_info_block_index_module_description,tag:"div",view:"primary-medium",color:"static-secondary-light",children:description}):null]})};try{HeaderInfoBlock.displayName="HeaderInfoBlock",HeaderInfoBlock.__docgenInfo={description:"",displayName:"HeaderInfoBlock",props:{filename:{defaultValue:null,description:"",name:"filename",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/header-info-block/Component.tsx#HeaderInfoBlock"]={docgenInfo:HeaderInfoBlock.__docgenInfo,name:"HeaderInfoBlock",path:"packages/gallery/src/components/header-info-block/Component.tsx#HeaderInfoBlock"})}catch(__react_docgen_typescript_loader_error){}var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),icon_button_modern=__webpack_require__("./dist/icon-button/modern/index.js"),desktop=__webpack_require__("./dist/tooltip/modern/desktop/index.js"),ArrowsInwardMIcon=__webpack_require__("./node_modules/@alfalab/icons-glyph/ArrowsInwardMIcon.js"),ArrowsOutwardMIcon=__webpack_require__("./node_modules/@alfalab/icons-glyph/ArrowsOutwardMIcon.js"),CrossMIcon=__webpack_require__("./node_modules/@alfalab/icons-glyph/CrossMIcon.js"),PointerDownMIcon=__webpack_require__("./node_modules/@alfalab/icons-glyph/PointerDownMIcon.js"),header_index_module_header="header_toq_x",header_index_module_buttons="buttons_hvq9n",header_index_module_iconButton="iconButton_Xxrn3",_excluded=["buttonRef"],_excluded2=["buttonRef"],Fullscreen=function Fullscreen(_ref){var buttonRef=_ref.buttonRef,restProps=(0,objectWithoutProperties.Z)(_ref,_excluded);return(0,jsx_runtime.jsx)(desktop.TooltipDesktop,{trigger:"hover",position:"bottom",content:"Открыть в полноэкранном режиме",fallbackPlacements:["bottom-end"],children:(0,jsx_runtime.jsx)(icon_button_modern.IconButton,(0,objectSpread2.Z)((0,objectSpread2.Z)({},restProps),{},{ref:buttonRef,icon:ArrowsOutwardMIcon.ArrowsOutwardMIcon,colors:"inverted","aria-label":"Открыть в полноэкранном режиме",className:header_index_module_iconButton}))})},ExitFullscreen=function ExitFullscreen(_ref2){var buttonRef=_ref2.buttonRef,restProps=(0,objectWithoutProperties.Z)(_ref2,_excluded2);return(0,jsx_runtime.jsx)(desktop.TooltipDesktop,{trigger:"hover",position:"bottom",content:"Выйти из полноэкранного режима",fallbackPlacements:["bottom-end"],children:(0,jsx_runtime.jsx)(icon_button_modern.IconButton,(0,objectSpread2.Z)((0,objectSpread2.Z)({},restProps),{},{ref:buttonRef,icon:ArrowsInwardMIcon.ArrowsInwardMIcon,colors:"inverted","aria-label":"Выйти из полноэкранного режима",className:header_index_module_iconButton}))})},Download=function Download(props){return(0,jsx_runtime.jsx)(desktop.TooltipDesktop,{trigger:"hover",position:"bottom",content:"Скачать",fallbackPlacements:["bottom-end"],children:(0,jsx_runtime.jsx)(icon_button_modern.IconButton,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{icon:PointerDownMIcon.PointerDownMIcon,colors:"inverted","aria-label":"Скачать",className:header_index_module_iconButton}))})},Exit=function Exit(props){return(0,jsx_runtime.jsx)(icon_button_modern.IconButton,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{icon:CrossMIcon.CrossMIcon,colors:"inverted","aria-label":"Закрыть",className:header_index_module_iconButton}))};try{Fullscreen.displayName="Fullscreen",Fullscreen.__docgenInfo={description:"",displayName:"Fullscreen",props:{size:{defaultValue:null,description:"Размер компонента",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"xxs"'},{value:'"xs"'}]}},className:{defaultValue:null,description:"Дополнительный класс",name:"className",required:!1,type:{name:"string"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},view:{defaultValue:null,description:"Тип кнопки",name:"view",required:!1,type:{name:"enum",value:[{value:'"negative"'},{value:'"tertiary"'},{value:'"secondary"'},{value:'"primary"'},{value:'"transparent"'}]}},href:{defaultValue:null,description:"Выводит ссылку в виде кнопки",name:"href",required:!1,type:{name:"string"}},Component:{defaultValue:null,description:"Позволяет использовать кастомный компонент для кнопки (например Link из роутера)",name:"Component",required:!1,type:{name:"ElementType<any>"}},loading:{defaultValue:{value:"false"},description:"Показать лоадер",name:"loading",required:!1,type:{name:"boolean"}},alignIcon:{defaultValue:{value:"'center'"},description:"Выравнивание иконки",name:"alignIcon",required:!1,type:{name:"enum",value:[{value:'"right"'},{value:'"left"'},{value:'"center"'}]}},buttonRef:{defaultValue:null,description:"",name:"buttonRef",required:!1,type:{name:"MutableRefObject<HTMLButtonElement | null>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/header/buttons.tsx#Fullscreen"]={docgenInfo:Fullscreen.__docgenInfo,name:"Fullscreen",path:"packages/gallery/src/components/header/buttons.tsx#Fullscreen"})}catch(__react_docgen_typescript_loader_error){}try{ExitFullscreen.displayName="ExitFullscreen",ExitFullscreen.__docgenInfo={description:"",displayName:"ExitFullscreen",props:{size:{defaultValue:null,description:"Размер компонента",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"xxs"'},{value:'"xs"'}]}},className:{defaultValue:null,description:"Дополнительный класс",name:"className",required:!1,type:{name:"string"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},view:{defaultValue:null,description:"Тип кнопки",name:"view",required:!1,type:{name:"enum",value:[{value:'"negative"'},{value:'"tertiary"'},{value:'"secondary"'},{value:'"primary"'},{value:'"transparent"'}]}},href:{defaultValue:null,description:"Выводит ссылку в виде кнопки",name:"href",required:!1,type:{name:"string"}},Component:{defaultValue:null,description:"Позволяет использовать кастомный компонент для кнопки (например Link из роутера)",name:"Component",required:!1,type:{name:"ElementType<any>"}},loading:{defaultValue:{value:"false"},description:"Показать лоадер",name:"loading",required:!1,type:{name:"boolean"}},alignIcon:{defaultValue:{value:"'center'"},description:"Выравнивание иконки",name:"alignIcon",required:!1,type:{name:"enum",value:[{value:'"right"'},{value:'"left"'},{value:'"center"'}]}},buttonRef:{defaultValue:null,description:"",name:"buttonRef",required:!1,type:{name:"MutableRefObject<HTMLButtonElement | null>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/header/buttons.tsx#ExitFullscreen"]={docgenInfo:ExitFullscreen.__docgenInfo,name:"ExitFullscreen",path:"packages/gallery/src/components/header/buttons.tsx#ExitFullscreen"})}catch(__react_docgen_typescript_loader_error){}try{Download.displayName="Download",Download.__docgenInfo={description:"",displayName:"Download",props:{size:{defaultValue:null,description:"Размер компонента",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"xxs"'},{value:'"xs"'}]}},className:{defaultValue:null,description:"Дополнительный класс",name:"className",required:!1,type:{name:"string"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},view:{defaultValue:null,description:"Тип кнопки",name:"view",required:!1,type:{name:"enum",value:[{value:'"negative"'},{value:'"tertiary"'},{value:'"secondary"'},{value:'"primary"'},{value:'"transparent"'}]}},href:{defaultValue:null,description:"Выводит ссылку в виде кнопки",name:"href",required:!1,type:{name:"string"}},Component:{defaultValue:null,description:"Позволяет использовать кастомный компонент для кнопки (например Link из роутера)",name:"Component",required:!1,type:{name:"ElementType<any>"}},loading:{defaultValue:{value:"false"},description:"Показать лоадер",name:"loading",required:!1,type:{name:"boolean"}},alignIcon:{defaultValue:{value:"'center'"},description:"Выравнивание иконки",name:"alignIcon",required:!1,type:{name:"enum",value:[{value:'"right"'},{value:'"left"'},{value:'"center"'}]}},buttonRef:{defaultValue:null,description:"",name:"buttonRef",required:!1,type:{name:"MutableRefObject<HTMLButtonElement | null>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/header/buttons.tsx#Download"]={docgenInfo:Download.__docgenInfo,name:"Download",path:"packages/gallery/src/components/header/buttons.tsx#Download"})}catch(__react_docgen_typescript_loader_error){}try{Exit.displayName="Exit",Exit.__docgenInfo={description:"",displayName:"Exit",props:{size:{defaultValue:null,description:"Размер компонента",name:"size",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"xxs"'},{value:'"xs"'}]}},className:{defaultValue:null,description:"Дополнительный класс",name:"className",required:!1,type:{name:"string"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number"}},view:{defaultValue:null,description:"Тип кнопки",name:"view",required:!1,type:{name:"enum",value:[{value:'"negative"'},{value:'"tertiary"'},{value:'"secondary"'},{value:'"primary"'},{value:'"transparent"'}]}},href:{defaultValue:null,description:"Выводит ссылку в виде кнопки",name:"href",required:!1,type:{name:"string"}},Component:{defaultValue:null,description:"Позволяет использовать кастомный компонент для кнопки (например Link из роутера)",name:"Component",required:!1,type:{name:"ElementType<any>"}},loading:{defaultValue:{value:"false"},description:"Показать лоадер",name:"loading",required:!1,type:{name:"boolean"}},alignIcon:{defaultValue:{value:"'center'"},description:"Выравнивание иконки",name:"alignIcon",required:!1,type:{name:"enum",value:[{value:'"right"'},{value:'"left"'},{value:'"center"'}]}},buttonRef:{defaultValue:null,description:"",name:"buttonRef",required:!1,type:{name:"MutableRefObject<HTMLButtonElement | null>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/header/buttons.tsx#Exit"]={docgenInfo:Exit.__docgenInfo,name:"Exit",path:"packages/gallery/src/components/header/buttons.tsx#Exit"})}catch(__react_docgen_typescript_loader_error){}var Component_Header=function Header(){var _currentImage$canDown,_useContext=(0,react.useContext)(GalleryContext),currentSlideIndex=_useContext.currentSlideIndex,singleSlide=_useContext.singleSlide,images=_useContext.images,fullScreen=_useContext.fullScreen,getCurrentImageMeta=_useContext.getCurrentImageMeta,getCurrentImage=_useContext.getCurrentImage,setFullScreen=_useContext.setFullScreen,onClose=_useContext.onClose,toggleFullScreenButton=(0,react.useRef)(null),closeFullScreen=function closeFullScreen(){setFullScreen(!1)},openFullScreen=function openFullScreen(){setFullScreen(!0)};(0,react.useEffect)((function(){toggleFullScreenButton.current&&toggleFullScreenButton.current.focus()}),[fullScreen]);var currentImage=getCurrentImage(),canDownload=null===(_currentImage$canDown=null==currentImage?void 0:currentImage.canDownload)||void 0===_currentImage$canDown||_currentImage$canDown,filename=(null==currentImage?void 0:currentImage.name)||"",description=singleSlide?"":"Изображение ".concat(currentSlideIndex+1," из ").concat(images.length),meta=getCurrentImageMeta(),showFullScreenButton=!(isSmallImage(meta)||null!=meta&&meta.broken),showDownloadButton=!(null!=meta&&meta.broken)&&canDownload;return(0,jsx_runtime.jsxs)("div",{className:header_index_module_header,children:[(0,jsx_runtime.jsx)(HeaderInfoBlock,{filename:filename,description:description}),(0,jsx_runtime.jsxs)("div",{className:header_index_module_buttons,children:[showFullScreenButton&&function renderToggleFullScreenButton(){return fullScreen?(0,jsx_runtime.jsx)(ExitFullscreen,{onClick:closeFullScreen,buttonRef:toggleFullScreenButton,dataTestId:TestIds.EXIT_FULLSCREEN_BUTTON}):(0,jsx_runtime.jsx)(Fullscreen,{onClick:openFullScreen,buttonRef:toggleFullScreenButton,dataTestId:TestIds.FULLSCREEN_BUTTON})}(),showDownloadButton&&(0,jsx_runtime.jsx)(Download,{href:null==currentImage?void 0:currentImage.src,download:null==currentImage?void 0:currentImage.name,dataTestId:TestIds.DOWNLOAD_BUTTON}),(0,jsx_runtime.jsx)(Exit,{onClick:onClose,dataTestId:TestIds.CLOSE_BUTTON})]})]})};try{Component_Header.displayName="Header",Component_Header.__docgenInfo={description:"",displayName:"Header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/header/Component.tsx#Header"]={docgenInfo:Component_Header.__docgenInfo,name:"Header",path:"packages/gallery/src/components/header/Component.tsx#Header"})}catch(__react_docgen_typescript_loader_error){}try{Header.displayName="Header",Header.__docgenInfo={description:"",displayName:"Header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/header/index.tsx#Header"]={docgenInfo:Header.__docgenInfo,name:"Header",path:"packages/gallery/src/components/header/index.tsx#Header"})}catch(__react_docgen_typescript_loader_error){}var element_closest=__webpack_require__("./node_modules/element-closest/index.mjs"),core_class=__webpack_require__("./node_modules/swiper/esm/components/core/core-class.js"),effect_fade=__webpack_require__("./node_modules/swiper/esm/components/effect-fade/effect-fade.js"),a11y=__webpack_require__("./node_modules/swiper/esm/components/a11y/a11y.js"),controller=__webpack_require__("./node_modules/swiper/esm/components/controller/controller.js"),react_swiper=__webpack_require__("./node_modules/swiper/esm/react/swiper.js"),swiper_slide=__webpack_require__("./node_modules/swiper/esm/react/swiper-slide.js"),ChevronBackHeavyMIcon=__webpack_require__("./node_modules/@alfalab/icons-glyph/ChevronBackHeavyMIcon.js"),ChevronForwardHeavyMIcon=__webpack_require__("./node_modules/@alfalab/icons-glyph/ChevronForwardHeavyMIcon.js"),paths_NoImagePaths_baseImage="M61 13H8C5.79086 13 4 14.7908 4 17V63C4 65.2092 5.79086 67 8 67H72C74.2091 67 76 65.2092 76 63V27.9998H64.7333C62.6714 27.9998 61 26.3284 61 24.2665V13ZM23.8337 31.3334C24.57 30.597 25.7639 30.597 26.5003 31.3334L28.5001 33.3332L30.4999 31.3333C31.2363 30.5969 32.4302 30.5969 33.1666 31.3333C33.903 32.0697 33.903 33.2636 33.1666 34L31.1667 35.9998L33.1669 38C33.9033 38.7363 33.9033 39.9302 33.1669 40.6666C32.4306 41.403 31.2367 41.403 30.5003 40.6666L28.5001 38.6664L26.5 40.6666C25.7636 41.403 24.5697 41.403 23.8333 40.6666C23.097 39.9302 23.097 38.7363 23.8333 37.9999L25.8335 35.9998L23.8337 34C23.0973 33.2636 23.0973 32.0697 23.8337 31.3334ZM49.4984 31.3334C48.762 30.597 47.5681 30.597 46.8317 31.3334C46.0953 32.0698 46.0953 33.2637 46.8317 34L48.8315 35.9998L46.8314 38C46.095 38.7363 46.095 39.9302 46.8314 40.6666C47.5677 41.403 48.7617 41.403 49.498 40.6666L51.4982 38.6664L53.4984 40.6666C54.2347 41.403 55.4286 41.403 56.165 40.6666C56.9014 39.9303 56.9014 38.7364 56.165 38L54.1648 35.9998L56.1646 34C56.901 33.2636 56.901 32.0697 56.1646 31.3334C55.4283 30.597 54.2344 30.597 53.498 31.3334L51.4982 33.3332L49.4984 31.3334ZM28.8087 55.8292L28.8076 55.8297C27.7997 56.2743 26.6202 55.8199 26.1724 54.8123C25.7238 53.8029 26.1783 52.621 27.1877 52.1724L28 54C27.1877 52.1724 27.1889 52.1719 27.1889 52.1719L27.1902 52.1713L27.193 52.17L27.1999 52.167L27.2187 52.1588L27.2425 52.1486L27.2762 52.1343C27.3234 52.1144 27.388 52.0878 27.4698 52.0553C27.6333 51.9904 27.8654 51.9021 28.1633 51.7985C28.7588 51.5914 29.6177 51.3226 30.7163 51.0563C32.9132 50.5237 36.072 50 40 50C43.928 50 47.0868 50.5237 49.2837 51.0563C50.3823 51.3226 51.2412 51.5914 51.8367 51.7985C51.9387 51.834 52.033 51.8677 52.1195 51.8992C52.2855 51.9598 52.4227 52.0126 52.5302 52.0553C52.5704 52.0713 52.6065 52.0858 52.6384 52.0989C52.6713 52.1124 52.6998 52.1242 52.7238 52.1343L52.7677 52.1529L52.7813 52.1588L52.8001 52.167L52.807 52.17L52.8099 52.1713L52.8111 52.1719C52.8111 52.1719 52.8112 52.1719 52.8075 52.1806L52.7938 52.2121L52.8123 52.1724C53.8217 52.621 54.2762 53.8029 53.8276 54.8123C53.3798 55.8199 52.2013 56.2746 51.1931 55.83L51.1913 55.8292L40.8962 55.8291L51.1899 55.8286L51.1715 55.8208C51.149 55.8113 51.1097 55.795 51.0538 55.7728C50.9419 55.7284 50.7639 55.6604 50.5226 55.5765C50.0401 55.4086 49.3052 55.1774 48.3413 54.9437C46.4132 54.4763 43.572 54 40 54C36.428 54 33.5868 54.4763 31.6587 54.9437C30.6948 55.1774 29.9599 55.4086 29.4774 55.5765C29.2361 55.6604 29.0581 55.7284 28.9462 55.7728C28.8903 55.795 28.851 55.8113 28.8285 55.8208L28.8112 55.8281L40.8962 55.8291L28.8087 55.8292Z",paths_NoImagePaths_triangleImage="M75.9998 23.9998H65V13L75.9998 23.9998Z",image_viewer_index_module_component="component_dvqF7",image_viewer_index_module_swiper="swiper_l0Uv5",image_viewer_index_module_singleSlide="singleSlide_3GHPv",image_viewer_index_module_hidden="hidden_RuunA",image_viewer_index_module_slide="slide_O6qSV",image_viewer_index_module_slideLoading="slideLoading_z7dpT",image_viewer_index_module_image="image_vBBzW",image_viewer_index_module_smallImage="smallImage_OYzsj",image_viewer_index_module_verticalImageFit="verticalImageFit_vgKcS",image_viewer_index_module_horizontalImageFit="horizontalImageFit_xDygz",image_viewer_index_module_arrow="arrow_dDnVx",image_viewer_index_module_focused="focused_YALHx",image_viewer_index_module_placeholder="placeholder_xyf_j",image_viewer_index_module_brokenImgWrapper="brokenImgWrapper_AKvv4",image_viewer_index_module_brokenImgIcon="brokenImgIcon_MdTbJ",image_viewer_index_module_fullScreenImage="fullScreenImage_eN1ip",SlideInner=function SlideInner(_ref){var children=_ref.children,broken=_ref.broken,loading=_ref.loading,withPlaceholder=_ref.withPlaceholder,content=broken?(0,jsx_runtime.jsxs)("div",{className:image_viewer_index_module_brokenImgWrapper,children:[(0,jsx_runtime.jsx)("div",{className:image_viewer_index_module_brokenImgIcon,children:(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",children:[(0,jsx_runtime.jsx)("rect",{width:"80",height:"80",fill:"none"}),(0,jsx_runtime.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:paths_NoImagePaths_baseImage,fill:"#89898A"}),(0,jsx_runtime.jsx)("path",{d:paths_NoImagePaths_triangleImage,fill:"#89898A"})]})}),(0,jsx_runtime.jsx)(typography_modern.Typography.Text,{view:"primary-small",color:"static-secondary-light",children:"Не удалось загрузить изображение"})]}):children;return(0,jsx_runtime.jsx)("div",{className:classnames_default()(image_viewer_index_module_slide,(0,defineProperty.Z)({},image_viewer_index_module_slideLoading,loading)),children:withPlaceholder?(0,jsx_runtime.jsx)("div",{className:image_viewer_index_module_placeholder,children:content}):content})},Slide=function Slide(_ref2){var _cn2,isActive=_ref2.isActive,meta=_ref2.meta,swiperAspectRatio=_ref2.swiperAspectRatio,imageAspectRatio=_ref2.imageAspectRatio,image=_ref2.image,index=_ref2.index,swiperHeight=_ref2.swiperHeight,slideVisible=_ref2.slideVisible,handleLoad=_ref2.handleLoad,handleLoadError=_ref2.handleLoadError,broken=Boolean(null==meta?void 0:meta.broken),small=isSmallImage(meta),verticalImageFit=!small&&swiperAspectRatio>imageAspectRatio,horizontalImageFit=!small&&swiperAspectRatio<=imageAspectRatio;return(0,jsx_runtime.jsx)(SlideInner,{active:isActive,broken:broken,loading:!meta,withPlaceholder:small||broken,children:(0,jsx_runtime.jsx)("img",{src:image.src,alt:getImageAlt(image,index),className:classnames_default()((_cn2={},(0,defineProperty.Z)(_cn2,image_viewer_index_module_smallImage,small),(0,defineProperty.Z)(_cn2,image_viewer_index_module_image,!small),(0,defineProperty.Z)(_cn2,image_viewer_index_module_verticalImageFit,verticalImageFit),(0,defineProperty.Z)(_cn2,image_viewer_index_module_horizontalImageFit,horizontalImageFit),_cn2)),onLoad:function onLoad(event){return handleLoad(event,index)},onError:function onError(){return handleLoadError(index)},style:{maxHeight:"".concat(swiperHeight,"px")},"data-test-id":slideVisible?TestIds.ACTIVE_IMAGE:void 0})})};try{Slide.displayName="Slide",Slide.__docgenInfo={description:"",displayName:"Slide",props:{isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"GalleryImage"}},meta:{defaultValue:null,description:"",name:"meta",required:!1,type:{name:"ImageMeta"}},swiperAspectRatio:{defaultValue:null,description:"",name:"swiperAspectRatio",required:!0,type:{name:"number"}},imageAspectRatio:{defaultValue:null,description:"",name:"imageAspectRatio",required:!0,type:{name:"number"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},swiperHeight:{defaultValue:null,description:"",name:"swiperHeight",required:!0,type:{name:"number"}},slideVisible:{defaultValue:null,description:"",name:"slideVisible",required:!0,type:{name:"boolean"}},handleLoad:{defaultValue:null,description:"",name:"handleLoad",required:!0,type:{name:"(event: SyntheticEvent<HTMLImageElement, Event>, index: number) => void"}},handleLoadError:{defaultValue:null,description:"",name:"handleLoadError",required:!0,type:{name:"(index: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/image-viewer/slide.tsx#Slide"]={docgenInfo:Slide.__docgenInfo,name:"Slide",path:"packages/gallery/src/components/image-viewer/slide.tsx#Slide"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/swiper/swiper.min.css");core_class.Z.use([effect_fade.Z,a11y.Z,controller.Z]);var ImageViewer=function ImageViewer(){var _useContext=(0,react.useContext)(GalleryContext),singleSlide=_useContext.singleSlide,images=_useContext.images,imagesMeta=_useContext.imagesMeta,fullScreen=_useContext.fullScreen,currentSlideIndex=_useContext.currentSlideIndex,initialSlide=_useContext.initialSlide,onClose=_useContext.onClose,getCurrentImage=_useContext.getCurrentImage,setImageMeta=_useContext.setImageMeta,setCurrentSlideIndex=_useContext.setCurrentSlideIndex,getSwiper=_useContext.getSwiper,setSwiper=_useContext.setSwiper,slidePrev=_useContext.slidePrev,slideNext=_useContext.slideNext,leftArrowRef=(0,react.useRef)(null),rightArrowRef=(0,react.useRef)(null),_useFocus=(0,esm.KK)(leftArrowRef,"keyboard"),leftArrowFocused=(0,slicedToArray.Z)(_useFocus,1)[0],_useFocus3=(0,esm.KK)(rightArrowRef,"keyboard"),rightArrowFocused=(0,slicedToArray.Z)(_useFocus3,1)[0],swiper=getSwiper(),handleSlideChange=(0,react.useCallback)((function(){var _swiper$activeIndex;null==setCurrentSlideIndex||setCurrentSlideIndex(null!==(_swiper$activeIndex=null==swiper?void 0:swiper.activeIndex)&&void 0!==_swiper$activeIndex?_swiper$activeIndex:initialSlide)}),[setCurrentSlideIndex,swiper,initialSlide]),handleLoad=function handleLoad(event,index){var target=event.currentTarget,naturalWidth=target.naturalWidth,naturalHeight=target.naturalHeight;setImageMeta({width:naturalWidth,height:naturalHeight},index)},handleLoadError=function handleLoadError(index){setImageMeta({width:0,height:0,broken:!0},index)},handleWrapperClick=(0,react.useCallback)((function(event){var _leftArrowRef$current,_rightArrowRef$curren,eventTarget=event.target,isArrow=(null===(_leftArrowRef$current=leftArrowRef.current)||void 0===_leftArrowRef$current?void 0:_leftArrowRef$current.contains(eventTarget))||(null===(_rightArrowRef$curren=rightArrowRef.current)||void 0===_rightArrowRef$curren?void 0:_rightArrowRef$curren.contains(eventTarget)),isPlaceholder=Boolean(eventTarget.closest(".".concat(image_viewer_index_module_placeholder)));"IMG"===eventTarget.tagName||isPlaceholder||isArrow||onClose()}),[onClose]);(0,react.useEffect)((function(){(0,element_closest.Z)(window)}),[]);var swiperProps=(0,react.useMemo)((function(){return{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},className:classnames_default()(image_viewer_index_module_swiper,(0,defineProperty.Z)({},image_viewer_index_module_hidden,fullScreen)),controller:{control:swiper},a11y:{slideRole:"img"},initialSlide:initialSlide,simulateTouch:!1,onSwiper:setSwiper,onSlideChange:handleSlideChange}}),[swiper,fullScreen,initialSlide,handleSlideChange,setSwiper]),showControls=!singleSlide&&!fullScreen,swiperWidth=(null==swiper?void 0:swiper.width)||1,swiperHeight=(null==swiper?void 0:swiper.height)||(null==swiper?void 0:swiper.width)||1,swiperAspectRatio=swiperWidth/swiperHeight,currentImage=getCurrentImage();return(0,jsx_runtime.jsxs)("div",{className:classnames_default()(image_viewer_index_module_component,(0,defineProperty.Z)({},image_viewer_index_module_singleSlide,singleSlide)),onClick:handleWrapperClick,children:[showControls&&(0,jsx_runtime.jsx)("div",{className:classnames_default()(image_viewer_index_module_arrow,(0,defineProperty.Z)({},image_viewer_index_module_focused,leftArrowFocused)),onClick:function handlePrevClick(){slidePrev()},role:"button",onKeyDown:function handleArrowLeftKeyDown(event){"Enter"===event.key&&slidePrev()},tabIndex:0,ref:leftArrowRef,"aria-label":"Предыдущее изображение","data-test-id":TestIds.PREV_SLIDE_BUTTON,children:(0,jsx_runtime.jsx)(ChevronBackHeavyMIcon.ChevronBackHeavyMIcon,{})}),fullScreen&&(0,jsx_runtime.jsx)("img",{src:null==currentImage?void 0:currentImage.src,alt:currentImage?getImageAlt(currentImage,currentSlideIndex):"",className:image_viewer_index_module_fullScreenImage}),(0,jsx_runtime.jsx)(react_swiper.t,(0,objectSpread2.Z)((0,objectSpread2.Z)({},swiperProps),{},{children:images.map((function(image,index){var meta=imagesMeta[index],imageAspectRatio=((null==meta?void 0:meta.width)||1)/((null==meta?void 0:meta.height)||1),slideVisible=index===currentSlideIndex;return(0,jsx_runtime.jsx)(swiper_slide.o,{style:{pointerEvents:slideVisible?"auto":"none",transitionProperty:"opacity"},children:function children(_ref){var isActive=_ref.isActive;return(0,jsx_runtime.jsx)(Slide,{isActive:isActive,swiperAspectRatio:swiperAspectRatio,image:image,swiperHeight:swiperHeight,meta:meta,index:index,imageAspectRatio:imageAspectRatio,slideVisible:slideVisible,handleLoad:handleLoad,handleLoadError:handleLoadError})}},getImageKey(image,index))}))})),showControls&&(0,jsx_runtime.jsx)("div",{className:classnames_default()(image_viewer_index_module_arrow,(0,defineProperty.Z)({},image_viewer_index_module_focused,rightArrowFocused)),onClick:function handleNextClick(){slideNext()},role:"button",onKeyDown:function handleArrowRightKeyDown(event){"Enter"===event.key&&slideNext()},tabIndex:0,ref:rightArrowRef,"aria-label":"Следующее изображение","data-test-id":TestIds.NEXT_SLIDE_BUTTON,children:(0,jsx_runtime.jsx)(ChevronForwardHeavyMIcon.ChevronForwardHeavyMIcon,{})})]})};try{ImageViewer.displayName="ImageViewer",ImageViewer.__docgenInfo={description:"",displayName:"ImageViewer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/components/image-viewer/component.tsx#ImageViewer"]={docgenInfo:ImageViewer.__docgenInfo,name:"ImageViewer",path:"packages/gallery/src/components/image-viewer/component.tsx#ImageViewer"})}catch(__react_docgen_typescript_loader_error){}var src_index_module_container="container_yK_bc",src_index_module_modal="modal_qWkLv",Backdrop=function Backdrop(){return null},Gallery=function Gallery(_ref){var open=_ref.open,images=_ref.images,slideIndex=_ref.slideIndex,_ref$initialSlide=_ref.initialSlide,initialSlide=void 0===_ref$initialSlide?0:_ref$initialSlide,_ref$loop=_ref.loop,loop=void 0===_ref$loop||_ref$loop,onClose=_ref.onClose,onSlideIndexChange=_ref.onSlideIndexChange,currentSlideIndexState=(0,react.useState)(initialSlide),uncontrolled=void 0===slideIndex,_ref2=uncontrolled?currentSlideIndexState:[slideIndex,onSlideIndexChange],_ref3=(0,slicedToArray.Z)(_ref2,2),currentSlideIndex=_ref3[0],setCurrentSlideIndex=_ref3[1],_useState=(0,react.useState)(),_useState2=(0,slicedToArray.Z)(_useState,2),swiper=_useState2[0],setSwiper=_useState2[1],_useState3=(0,react.useState)([]),_useState4=(0,slicedToArray.Z)(_useState3,2),imagesMeta=_useState4[0],setImagesMeta=_useState4[1],_useState5=(0,react.useState)(!1),_useState6=(0,slicedToArray.Z)(_useState5,2),fullScreen=_useState6[0],setFullScreen=_useState6[1],slideTo=(0,react.useCallback)((function(index){images[index]&&(null==setCurrentSlideIndex||setCurrentSlideIndex(index),swiper&&swiper.slideTo(index))}),[images,setCurrentSlideIndex,swiper]),slideNext=(0,react.useCallback)((function(){var lastIndex=images.length-1,nextIndex=currentSlideIndex+1;nextIndex>=images.length&&(nextIndex=loop?0:lastIndex),slideTo(nextIndex)}),[images.length,loop,currentSlideIndex,slideTo]),slidePrev=(0,react.useCallback)((function(){var lastIndex=images.length-1,nextIndex=currentSlideIndex-1;nextIndex<0&&(nextIndex=loop?lastIndex:0),slideTo(nextIndex)}),[images.length,loop,currentSlideIndex,slideTo]),setImageMeta=(0,react.useCallback)((function(meta,index){imagesMeta[index]=meta,setImagesMeta(imagesMeta.slice())}),[imagesMeta]),handleClose=(0,react.useCallback)((function(){onClose(),uncontrolled&&(null==setCurrentSlideIndex||setCurrentSlideIndex(initialSlide)),setFullScreen(!1)}),[initialSlide,onClose,setCurrentSlideIndex,uncontrolled]),handleKeyDown=(0,react.useCallback)((function(event){if(open&&!fullScreen)switch(event.key){case"ArrowLeft":slidePrev();break;case"ArrowRight":slideNext()}}),[fullScreen,open,slideNext,slidePrev]);(0,react.useEffect)((function(){uncontrolled||null!=swiper&&swiper.destroyed||null==swiper||swiper.slideTo(currentSlideIndex)}),[uncontrolled,currentSlideIndex,swiper]),(0,react.useEffect)((function(){return document.addEventListener("keydown",handleKeyDown),function(){document.removeEventListener("keydown",handleKeyDown)}}),[handleKeyDown]);var singleSlide=1===images.length,showNavigationBar=!singleSlide&&!fullScreen,galleryContext={singleSlide:singleSlide,currentSlideIndex:currentSlideIndex,images:images,imagesMeta:imagesMeta,fullScreen:fullScreen,initialSlide:uncontrolled?initialSlide:currentSlideIndex,setFullScreen:setFullScreen,setImageMeta:setImageMeta,slideNext:slideNext,slidePrev:slidePrev,slideTo:slideTo,getSwiper:function getSwiper(){return swiper},setSwiper:setSwiper,onClose:handleClose,setCurrentSlideIndex:setCurrentSlideIndex,getCurrentImage:function getCurrentImage(){return images[currentSlideIndex]},getCurrentImageMeta:function getCurrentImageMeta(){return imagesMeta[currentSlideIndex]}};return(0,jsx_runtime.jsx)(GalleryContext.Provider,{value:galleryContext,children:(0,jsx_runtime.jsx)(modern.BaseModal,{open:open,className:src_index_module_modal,onEscapeKeyDown:function handleEscapeKeyDown(){fullScreen?setFullScreen(!1):handleClose()},Backdrop:Backdrop,children:(0,jsx_runtime.jsxs)("div",{className:src_index_module_container,children:[(0,jsx_runtime.jsx)(Component_Header,{}),(0,jsx_runtime.jsx)(ImageViewer,{}),showNavigationBar&&(0,jsx_runtime.jsx)(NavigationBar,{})]})})})};try{Gallery.displayName="Gallery",Gallery.__docgenInfo={description:"",displayName:"Gallery",props:{open:{defaultValue:null,description:"Управление видимостью",name:"open",required:!0,type:{name:"boolean"}},images:{defaultValue:null,description:"Массив изображений",name:"images",required:!0,type:{name:"GalleryImage[]"}},loop:{defaultValue:{value:"true"},description:"Зациклить галерею",name:"loop",required:!1,type:{name:"boolean"}},initialSlide:{defaultValue:{value:"0"},description:"Индекс открытого изображение",name:"initialSlide",required:!1,type:{name:"number"}},onClose:{defaultValue:null,description:"Обработчик закрытия",name:"onClose",required:!0,type:{name:"() => void"}},slideIndex:{defaultValue:null,description:"Индекс текущего изображения",name:"slideIndex",required:!1,type:{name:"number"}},onSlideIndexChange:{defaultValue:null,description:"Обработчик изменения текущего изображения",name:"onSlideIndexChange",required:!1,type:{name:"((index: number) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/gallery/src/Component.tsx#Gallery"]={docgenInfo:Gallery.__docgenInfo,name:"Gallery",path:"packages/gallery/src/Component.tsx#Gallery"})}catch(__react_docgen_typescript_loader_error){}}}]);