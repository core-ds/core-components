"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6669],{"./packages/amount-input/src/Component.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{_:function(){return AmountInput}});var objectSpread2=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),defineProperty=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),slicedToArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectWithoutProperties=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("./node_modules/react/index.js"),react_merge_refs_esm=__webpack_require__("./node_modules/react-merge-refs/dist/react-merge-refs.esm.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),modern=__webpack_require__("./dist/input/modern/index.js"),shared=__webpack_require__("./dist/number-input/modern/shared/index.js"),utils=__webpack_require__("./dist/number-input/modern/utils.js"),shared_modern=__webpack_require__("./dist/shared/modern/index.js"),with_suffix_modern=__webpack_require__("./dist/with-suffix/modern/index.js"),util=__webpack_require__("./node_modules/@alfalab/utils/dist/esm/format-amount/util.js"),toConsumableArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),index_esm=__webpack_require__("./packages/amount-input/node_modules/@maskito/core/index.esm.js"),escapeRegExp=__webpack_require__("./node_modules/lodash/escapeRegExp.js"),escapeRegExp_default=__webpack_require__.n(escapeRegExp),noop=__webpack_require__("./node_modules/lodash/noop.js"),noop_default=__webpack_require__.n(noop),_excluded=["validCharacter","pseudoCharacters"],_excluded2=["decimalPart"],_excluded3=["maximumIntegerDigits"],DEFAULT_DECIMAL_SEPARATORS=[".",",","б","ю"],DEFAULT_MINUS_SIGNS=["-","–","—","−"];function createClipboardHandler(numberParams){return function(element,_,event){var selection=element.ownerDocument.getSelection();if(selection){var _event$clipboardData,clipboardValue=toNumberFormat(selection.toString(),numberParams);null===(_event$clipboardData=event.clipboardData)||void 0===_event$clipboardData||_event$clipboardData.setData("text/plain",clipboardValue),event.preventDefault()}}}function deleteThousandSeparatorPreprocessorGenerator(_ref){var thousandSeparator=_ref.thousandSeparator;return function(_ref2,inputType){var elementState=_ref2.elementState,data=_ref2.data;if(inputType.includes("delete")){var value1=elementState.value,_elementState$selecti=(0,slicedToArray.Z)(elementState.selection,2),from=_elementState$selecti[0],to=_elementState$selecti[1];if(to-from==1&&value1[from]===thousandSeparator)return{elementState:{value:value1,selection:inputType.includes("Forward")?[from,to+1]:[from-1,to]},data:data}}return{elementState:elementState,data:data}}}function stringifyNumber(value1,numberParams){if(""===value1||null===value1||value1===numberParams.minusSign)return"";var stringValue="".concat(Number(value1)/Math.pow(10,numberParams.maximumFractionDigits)).replace(".",numberParams.decimalSeparator).replace("-",numberParams.minusSign),options=maskitoOptionsGenerator(numberParams,!1,"default",15);return(0,index_esm.CV)(stringValue,options)}function toNumberFormat(numberValue,_ref3){var minusSign=_ref3.minusSign,decimalSeparator=_ref3.decimalSeparator;return numberValue.replace(RegExp("[^0-9".concat(minusSign).concat(decimalSeparator,"]"),"g"),"").replace(minusSign,"-").replace(decimalSeparator,".")}function parseNumber(value1,numberParams){var num=Number(toNumberFormat(value1,numberParams));return Number.isNaN(num)?null:Math.round(num*Math.pow(10,numberParams.maximumFractionDigits))}function appendDecimalPart(val,numberParams,view){var value1=new RegExp("^".concat(numberParams.minusSign,"0").concat(numberParams.decimalSeparator,"?$")).test(val)?"0":val,decimalSeparatorIndex=value1.indexOf(numberParams.decimalSeparator);if(-1===decimalSeparatorIndex){if("default"===view||""===value1)return value1;numberParams.maximumFractionDigits&&(decimalSeparatorIndex=(value1="".concat(value1).concat(numberParams.decimalSeparator)).length-1)}return"default"===view&&(decimalSeparatorIndex===value1.length-1||/^0+$/.test(value1.slice(decimalSeparatorIndex+1)))?value1=value1.slice(0,decimalSeparatorIndex):numberParams.maximumFractionDigits&&(value1=value1.padEnd(decimalSeparatorIndex+1+numberParams.maximumFractionDigits,"0")),value1}function createPseudoCharactersPreprocessor(_ref4){var validCharacter=_ref4.validCharacter,pseudoCharacters=_ref4.pseudoCharacters,params=(0,objectWithoutProperties.Z)(_ref4,_excluded),pseudoCharactersRegExp=RegExp("[".concat(pseudoCharacters.join(""),"]"),"gi");return function(_ref5){var elementState=_ref5.elementState,data=_ref5.data,value1=elementState.value;return{elementState:{selection:elementState.selection,value:fromNumberParts(toNumberParts(value1,params),params).replace(pseudoCharactersRegExp,validCharacter)},data:data.replace(pseudoCharactersRegExp,validCharacter)}}}function createCleanDataPreprocessor(_ref6){var minusSign=_ref6.minusSign,decimalSeparator=_ref6.decimalSeparator;return function(_ref7){return{elementState:_ref7.elementState,data:_ref7.data.replace(RegExp("[^0-9".concat(minusSign).concat(decimalSeparator,"]"),"g"),"")}}}function createDataNumberPreprocessor(params){var maximumFractionDigits=params.maximumFractionDigits,minusSign=params.minusSign,decimalSeparator=params.decimalSeparator;return function(_ref8){var elementState=_ref8.elementState,data=_ref8.data;if(new RegExp("^".concat(minusSign,"?[0-9]*(").concat(escapeRegExp_default()(decimalSeparator),"[0-9]*)?$")).test(data)){var _toNumberParts=toNumberParts(data,params),decimalPart=_toNumberParts.decimalPart,numberParts=(0,objectWithoutProperties.Z)(_toNumberParts,_excluded2);return{elementState:elementState,data:fromNumberParts((0,objectSpread2.Z)((0,objectSpread2.Z)({},numberParts),{},{decimalPart:decimalPart.slice(0,maximumFractionDigits)}),params)}}return{elementState:elementState,data:""}}}function createValidNumberPreprocessor(_ref9){var maximumIntegerDigits=_ref9.maximumIntegerDigits,params=(0,objectWithoutProperties.Z)(_ref9,_excluded3),maximumFractionDigits=params.maximumFractionDigits,minusSign=params.minusSign,decimalSeparator=params.decimalSeparator;maximumIntegerDigits=Math.min(maximumIntegerDigits,"".concat(Number.MAX_SAFE_INTEGER).length-maximumFractionDigits-1);var cleanDataPreprocessor=createCleanDataPreprocessor(params);return function(_ref0,inputType){var elementState=_ref0.elementState,data=_ref0.data,value1=elementState.value,selection=elementState.selection,_selection=selection,_selection2=(0,slicedToArray.Z)(_selection,2),from=_selection2[0],to=_selection2[1],_cleanDataPreprocesso2=cleanDataPreprocessor({elementState:elementState,data:value1.slice(0,from)+data+value1.slice(to)},inputType).data,nextValue=void 0===_cleanDataPreprocesso2?"":_cleanDataPreprocesso2;if(new RegExp("^".concat(minusSign,"?[0-9]*(").concat(decimalSeparator,"[0-9]*)?$")).test(nextValue)){var _toNumberParts2=toNumberParts(nextValue,params),integerPart=_toNumberParts2.integerPart,decimalPart=_toNumberParts2.decimalPart;if(integerPart.length<=maximumIntegerDigits&&decimalPart.length<=maximumFractionDigits)return{elementState:elementState,data:data}}return"deleteForward"===inputType?selection=[to,to]:"deleteBackward"===inputType&&(selection=[from,from]),{elementState:{value:value1,selection:selection},data:""}}}function createThousandSeparatorPostprocessor(params){var thousandSeparator=params.thousandSeparator,isAllSpaces=function(){for(var _len=arguments.length,chars=Array(_len),_key=0;_key<_len;_key++)chars[_key]=arguments[_key];return chars.every(function(x){return/\s/.test(x)})};return function(_ref1){var value1=_ref1.value,selection=_ref1.selection,_selection3=(0,slicedToArray.Z)(selection,2),initialFrom=_selection3[0],initialTo=_selection3[1],_selection4=(0,slicedToArray.Z)(selection,2),from=_selection4[0],to=_selection4[1],_toNumberParts3=toNumberParts(value1,params),minus=_toNumberParts3.minus,integerPart=_toNumberParts3.integerPart,decimalSeparator=_toNumberParts3.decimalSeparator,decimalPart=_toNumberParts3.decimalPart,deletedChars=fromNumberParts({minus:minus,integerPart:integerPart,decimalSeparator:decimalSeparator,decimalPart:decimalPart},params).length-(minus+integerPart+(decimalSeparator?decimalSeparator+decimalPart:"")).length;return deletedChars>0&&initialFrom&&initialFrom<=deletedChars&&(from-=deletedChars),deletedChars>0&&initialTo&&initialTo<=deletedChars&&(to-=deletedChars),{value:fromNumberParts({minus:minus,integerPart:Array.from(integerPart).reduceRight(function(formattedValuePart,char,i){var isPositionForSeparator=!(!i&&char===thousandSeparator)&&!!formattedValuePart.length&&(formattedValuePart.length+1)%4==0,isSeparator=char===thousandSeparator||isAllSpaces(char,thousandSeparator);return isPositionForSeparator&&isSeparator?thousandSeparator+formattedValuePart:!isPositionForSeparator&&isSeparator?(from&&i<=initialFrom&&from--,to&&i<=initialTo&&to--,formattedValuePart):isPositionForSeparator?(i<initialFrom&&from++,i<initialTo&&to++,char+thousandSeparator+formattedValuePart):char+formattedValuePart},""),decimalSeparator:decimalSeparator,decimalPart:decimalPart},params),selection:[from,to]}}}function toNumberParts(value1,params){var _RegExp$exec$,_RegExp$exec,decimalSeparator=params.decimalSeparator,minusSign=params.minusSign,minusPseudoSigns=params.minusPseudoSigns,decimalPseudoSeparators=params.decimalPseudoSeparators,maximumFractionDigits=params.maximumFractionDigits,_ref10=decimalSeparator?value1.split(decimalSeparator):[value1],_ref11=(0,slicedToArray.Z)(_ref10,2),integerWithMinus=_ref11[0],_ref11$=_ref11[1],minuses=[minusSign].concat((0,toConsumableArray.Z)(minusPseudoSigns)).map(function(x){return"\\".concat(x)}).join(""),_ref12=new RegExp("^([".concat(minuses,"])?(.*)")).exec(integerWithMinus)||[],_ref13=(0,slicedToArray.Z)(_ref12,3),_ref13$=_ref13[1],_ref13$2=_ref13[2];return{minus:void 0===_ref13$?"":_ref13$,integerPart:void 0===_ref13$2?"":_ref13$2,decimalPart:void 0===_ref11$?"":_ref11$,decimalSeparator:decimalSeparator&&maximumFractionDigits>0&&null!==(_RegExp$exec$=null===(_RegExp$exec=RegExp("[".concat([decimalSeparator].concat((0,toConsumableArray.Z)(decimalPseudoSeparators)).map(escapeRegExp_default()).join(""),"]"),"i").exec(value1))||void 0===_RegExp$exec?void 0:_RegExp$exec[0])&&void 0!==_RegExp$exec$?_RegExp$exec$:""}}function fromNumberParts(_ref14,params){var _ref14$minus=_ref14.minus,_ref14$integerPart=_ref14.integerPart,_ref14$decimalPart=_ref14.decimalPart,decimalPart=void 0===_ref14$decimalPart?"":_ref14$decimalPart,_ref14$decimalSeparat=_ref14.decimalSeparator,separator=decimalPart?params.decimalSeparator:void 0===_ref14$decimalSeparat?"":_ref14$decimalSeparat;return"".concat(void 0===_ref14$minus?"":_ref14$minus).concat(void 0===_ref14$integerPart?"":_ref14$integerPart).concat(separator).concat(decimalPart)}function selectionChangeHandler(handler){return function(element,options){var document=element.ownerDocument,isPointerDown=0,onPointerDown=function(){return isPointerDown++},onPointerUp=function(){isPointerDown=Math.max(--isPointerDown,0)},selectionStart=element.selectionStart,selectionEnd=element.selectionEnd,selection={selectionStart:Number(selectionStart),selectionEnd:Number(selectionEnd)},_listener=function(event){if(element.matches(":focus")){if(isPointerDown){document.addEventListener("mouseup",_listener,{once:!0,passive:!0});return}handler(element,options,event,selection)}};return document.addEventListener("selectionchange",_listener,{passive:!0}),element.addEventListener("focus",_listener,{passive:!0}),element.addEventListener("mousedown",onPointerDown,{passive:!0}),document.addEventListener("mouseup",onPointerUp,{passive:!0}),function(){document.removeEventListener("selectionchange",_listener),element.removeEventListener("focus",_listener),element.removeEventListener("mousedown",onPointerDown),document.removeEventListener("mouseup",onPointerUp)}}}function createLeadingZeroesValidationPlugin(_ref15){var thousandSeparator=_ref15.thousandSeparator;return maskitoEventHandler("blur",function(element){var escapedThousandSeparator=escapeRegExp_default()(thousandSeparator),newValue=element.value.replace(new RegExp("^([^0-9]+)?[0".concat(escapedThousandSeparator,"]+(?=0)")),"$1").replace(new RegExp("^([^0-9]+)?[0".concat(escapedThousandSeparator,"]+(?=[1-9])")),"$1");(0,index_esm.fD)(element,newValue)},{capture:!0})}function createNotEmptyIntegerPlugin(params){var decimalSeparator=params.decimalSeparator;return decimalSeparator?maskitoEventHandler("blur",function(element){var newValue=fromNumberParts(toNumberParts(element.value,params),params).replace(new RegExp("^([^0-9]+)?".concat(escapeRegExp_default()(decimalSeparator))),"$10".concat(decimalSeparator));(0,index_esm.fD)(element,newValue)},{capture:!0}):noop_default()}function createNotEmptyIntegerPartPreprocessor(params){var maximumFractionDigits=params.maximumFractionDigits,decimalSeparator=params.decimalSeparator,startWithDecimalSepRegExp=new RegExp("^[^0-9]*".concat(escapeRegExp_default()(decimalSeparator)));return function(_ref16){var elementState=_ref16.elementState,data=_ref16.data,value1=elementState.value,selection=elementState.selection,_selection5=(0,slicedToArray.Z)(selection,2),from=_selection5[0],to=_selection5[1];return maximumFractionDigits<=0||value1.slice(0,from).includes(decimalSeparator)||value1.slice(to).includes(decimalSeparator)||!data.match(startWithDecimalSepRegExp)?{elementState:elementState,data:data}:{elementState:elementState,data:/[0-9]+/.exec(value1.slice(0,from))?data:"0".concat(data)}}}function maskitoEventHandler(name,handler,eventListenerOptions){return function(element,maskitoOptions){var listener=function(event){return handler(element,maskitoOptions,event)};return element.addEventListener(name,listener,eventListenerOptions),function(){return element.removeEventListener(name,listener,eventListenerOptions)}}}function maskitoOptionsGenerator(numberParams,posivite,view,maximumIntegerDigits){var minusSign=numberParams.minusSign,maximumFractionDigits=numberParams.maximumFractionDigits,thousandSeparator=numberParams.thousandSeparator,decimalSeparator=numberParams.decimalSeparator,clipboardHandler=createClipboardHandler(numberParams);return{mask:new RegExp("^".concat(posivite?"":"".concat(minusSign,"?"),"[0-9").concat(thousandSeparator,"]*").concat(maximumFractionDigits?"(".concat(decimalSeparator,"[0-9]{0,").concat(maximumFractionDigits,"})?"):"","$")),plugins:[(0,index_esm.D2)(),maskitoEventHandler("keypress",function(_,__,event){32===event.keyCode&&event.preventDefault()},{capture:!0}),selectionChangeHandler(function(element,_,event,selection){var _input$selectionDirec,value1=element.value,selectionDirection=null!==(_input$selectionDirec=element.selectionDirection)&&void 0!==_input$selectionDirec?_input$selectionDirec:void 0,selectionStart=Number(element.selectionStart),selectionEnd=Number(element.selectionEnd),prevSelection=(0,objectSpread2.Z)({},selection);Object.assign(selection,{selectionStart:selectionStart,selectionEnd:selectionEnd}),value1[selectionStart]===numberParams.thousandSeparator&&(selectionStart+="mouseup"!==event.type&&prevSelection.selectionStart>selectionStart?-1:1),value1[selectionEnd]===numberParams.thousandSeparator&&(selectionEnd+="mouseup"!==event.type&&prevSelection.selectionEnd>selectionEnd?-1:1),(element.selectionStart!==selectionStart||element.selectionEnd!==selectionEnd)&&element.setSelectionRange(selectionStart,selectionEnd,selectionDirection)}),createLeadingZeroesValidationPlugin(numberParams),createNotEmptyIntegerPlugin(numberParams),maskitoEventHandler("blur",function(element){var nextValue=appendDecimalPart(element.value,numberParams,view);(0,index_esm.fD)(element,nextValue)}),maskitoEventHandler("copy",clipboardHandler),maskitoEventHandler("cut",function(element,options,event){if(element.ownerDocument.getSelection()){clipboardHandler(element,options,event);var value1=element.value,selectionStart=Number(element.selectionStart),selectionEnd=Number(element.selectionEnd),nextValue=(0,index_esm.CV)(value1.slice(0,selectionStart)+value1.slice(selectionEnd),options);(0,index_esm.fD)(element,nextValue)}})],preprocessors:[deleteThousandSeparatorPreprocessorGenerator(numberParams),createPseudoCharactersPreprocessor((0,objectSpread2.Z)({pseudoCharacters:numberParams.decimalPseudoSeparators,validCharacter:decimalSeparator},numberParams)),createPseudoCharactersPreprocessor((0,objectSpread2.Z)({pseudoCharacters:numberParams.minusPseudoSigns,validCharacter:minusSign},numberParams)),createCleanDataPreprocessor(numberParams),createDataNumberPreprocessor(numberParams),createValidNumberPreprocessor((0,objectSpread2.Z)({maximumIntegerDigits:maximumIntegerDigits},numberParams)),createNotEmptyIntegerPartPreprocessor(numberParams)],postprocessors:[createThousandSeparatorPostprocessor(numberParams)],overwriteMode:"shift"}}var hook=__webpack_require__("./node_modules/@alfalab/hooks/dist/esm/useLayoutEffect_SAFE_FOR_SSR/hook.js");function adaptReactControlledElement(element){var _Object$getOwnPropert,valueSetter=null===(_Object$getOwnPropert=Object.getOwnPropertyDescriptor(getPrototype(element),"value"))||void 0===_Object$getOwnPropert?void 0:_Object$getOwnPropert.set;if(!valueSetter)return element;var adapter={set value(value){valueSetter.call(element,value)}};return new Proxy(element,{get:function get(target,prop){var nativeProperty=target[prop];return"function"==typeof nativeProperty?nativeProperty.bind(target):nativeProperty},set:function set(target,prop,val,receiver){return Reflect.set(prop in adapter?adapter:target,prop,val,receiver)}})}function getPrototype(element){var _win$HTMLInputElement,_win$HTMLTextAreaElem,win=element.ownerDocument.defaultView;switch(element.nodeName){case"INPUT":return null==win?void 0:null===(_win$HTMLInputElement=win.HTMLInputElement)||void 0===_win$HTMLInputElement?void 0:_win$HTMLInputElement.prototype;case"TEXTAREA":return null==win?void 0:null===(_win$HTMLTextAreaElem=win.HTMLTextAreaElement)||void 0===_win$HTMLTextAreaElem?void 0:_win$HTMLTextAreaElem.prototype;default:return null}}function isThenable(x){return x&&"object"==typeof x&&"then"in x}var useMaskito=function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$options=_ref.options,options=void 0===_ref$options?null:_ref$options,_ref$elementPredicate=_ref.elementPredicate,elementPredicate=void 0===_ref$elementPredicate?index_esm.gI:_ref$elementPredicate,hostElementRef=(0,react.useRef)(null),_useState=(0,react.useState)(null),_useState2=(0,slicedToArray.Z)(_useState,2),element=_useState2[0],setElement=_useState2[1],elementPredicateRef=(0,react.useRef)(elementPredicate);return(0,hook.C)(function(){elementPredicateRef.current=elementPredicate},[elementPredicate]),(0,hook.C)(function(){var hostElement=hostElementRef.current;if(!hostElement){element&&setElement(null);return}var latestElementPredicate=elementPredicateRef.current,elementOrPromise=latestElementPredicate(hostElement);isThenable(elementOrPromise)?elementOrPromise.then(function(resolvedElement){resolvedElement!==element&&latestElementPredicate===elementPredicateRef.current&&hostElement===hostElementRef.current&&setElement(resolvedElement)}):elementOrPromise!==element&&setElement(elementOrPromise)}),(0,hook.C)(function(){if(!element||!options)return noop_default();var maskedElement=new index_esm.C8(adaptReactControlledElement(element),options);return function(){maskedElement.destroy()}},[options,element]),hostElementRef},get_currency_symbol_util=__webpack_require__("./node_modules/@alfalab/utils/dist/esm/get-currency-symbol/util.js");function getCurrencyCodeWithFormat(currency,codeFormat){return currency?"symbolic"===codeFormat?(0,get_currency_symbol_util.j)(currency):currency:""}var index_module={container:"container_lBRr_",bold:"bold_DQS_b",input:"input_G8I9L",suffixContainer:"suffixContainer_LcrIC",filled:"filled_pcsxc",focused:"focused_WXtn5",suffixMajor:"suffixMajor_WJaPV",suffixMinor:"suffixMinor_qwmvl"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Component_excluded=["view","defaultValue","value","integerLength","minority","currency","suffix","codeFormat","placeholder","integersOnly","positiveOnly","bold","colors","className","focusedClassName","dataTestId","clear","onChange","onClear","onFocus","onBlur","onKeyDown","breakpoint","client","transparentMinor","inputClassName","label","labelView","stepper","rightAddons","pattern"],colorStyles={default:{minorPartAndCurrency:"minorPartAndCurrency_N7KPP",disabled:"disabled_g7_Wx",readOnly:"readOnly_RqIL1"},inverted:{minorPartAndCurrency:"minorPartAndCurrency_MKlN9",disabled:"disabled_ipda9",readOnly:"readOnly_YuCL0"}},SuffixInput=(0,with_suffix_modern.withSuffix)(modern.Input),AmountInput=(0,react.forwardRef)(function(_ref,ref){var _ref$view=_ref.view,view=void 0===_ref$view?"default":_ref$view,_ref$defaultValue=_ref.defaultValue,valueFromProps=_ref.value,_ref$integerLength=_ref.integerLength,integerLength=void 0===_ref$integerLength?9:_ref$integerLength,_ref$minority=_ref.minority,minority=void 0===_ref$minority?100:_ref$minority,_ref$currency=_ref.currency,currency=void 0===_ref$currency?"RUR":_ref$currency,_ref$suffix=_ref.suffix,suffix=void 0===_ref$suffix?currency:_ref$suffix,_ref$codeFormat=_ref.codeFormat,codeFormat=void 0===_ref$codeFormat?"symbolic":_ref$codeFormat,_ref$placeholder=_ref.placeholder,placeholder=void 0===_ref$placeholder?"0".concat(util._u).concat(suffix===currency?getCurrencyCodeWithFormat(currency,codeFormat):suffix):_ref$placeholder,_ref$integersOnly=_ref.integersOnly,integersOnly=void 0!==_ref$integersOnly&&_ref$integersOnly,_ref$positiveOnly=_ref.positiveOnly,positiveOnly=void 0===_ref$positiveOnly||_ref$positiveOnly,_ref$bold=_ref.bold,_ref$colors=_ref.colors,colors=void 0===_ref$colors?"default":_ref$colors,className=_ref.className,focusedClassName=_ref.focusedClassName,dataTestId=_ref.dataTestId,_ref$clear=_ref.clear,onChange=_ref.onChange,onClear=_ref.onClear,onFocus=_ref.onFocus,onBlur=_ref.onBlur,breakpoint=(_ref.onKeyDown,_ref.breakpoint),client=_ref.client,_ref$transparentMinor=_ref.transparentMinor,inputClassName=_ref.inputClassName,label=_ref.label,labelView=_ref.labelView,stepper=_ref.stepper,rightAddons=_ref.rightAddons,restProps=(_ref.pattern,(0,objectWithoutProperties.Z)(_ref,Component_excluded)),inputRef=(0,react.useRef)(null),uncontrolled=void 0===valueFromProps,numberParams=(0,react.useMemo)(function(){var decimalLength=Math.trunc(Math.log10(minority)),maximumFractionDigits=integersOnly?0:decimalLength;return{minusSign:"−",decimalSeparator:",",thousandSeparator:util.FW,maximumFractionDigits:maximumFractionDigits,decimalPseudoSeparators:DEFAULT_DECIMAL_SEPARATORS.filter(function(x){return","!==x}),minusPseudoSigns:DEFAULT_MINUS_SIGNS.filter(function(x){return"−"!==x})}},[integersOnly,minority]),maskitoRef=useMaskito({options:(0,react.useMemo)(function(){return maskitoOptionsGenerator(numberParams,positiveOnly,view,integerLength)},[integerLength,numberParams,positiveOnly,view])}),_useState=(0,react.useState)(null!=valueFromProps?valueFromProps:void 0===_ref$defaultValue?null:_ref$defaultValue),_useState2=(0,slicedToArray.Z)(_useState,2),numberValue=_useState2[0],setNumberValue=_useState2[1],_useState3=(0,react.useState)(function(){return stringifyNumber(numberValue,numberParams)}),_useState4=(0,slicedToArray.Z)(_useState3,2),inputValue=_useState4[0],setInputValue=_useState4[1];if(!uncontrolled){var valueFromPropsOrNull=null!=valueFromProps?valueFromProps:null;numberValue!==valueFromPropsOrNull&&setNumberValue(valueFromPropsOrNull)}(0,react.useEffect)(function(){var valueString=stringifyNumber(numberValue,numberParams),input=inputRef.current;null!=input&&input.matches(":focus")||(valueString=appendDecimalPart(valueString,numberParams,view)),setInputValue(function(prevInputValue){if(valueString.length>0&&prevInputValue.startsWith(valueString)&&prevInputValue.length>valueString.length){var diff=prevInputValue.slice(valueString.length-prevInputValue.length);if(new RegExp("^".concat(numberParams.decimalSeparator,"?0+$")).test(diff))return prevInputValue}return valueString})},[numberParams,numberValue,view]);var numberValueOrZero=(0,react.useMemo)(function(){return Number("".concat(numberValue||"0"))},[numberValue]),_getMinMaxOrDefault=(0,utils.UV)({minProp:null==stepper?void 0:stepper.min,maxProp:null==stepper?void 0:stepper.max}),minStepperValue=_getMinMaxOrDefault.min,maxStepperValue=_getMinMaxOrDefault.max,withStepper=(0,shared_modern.isNonNullable)(null==stepper?void 0:stepper.step),_useState5=(0,react.useState)(!1),_useState6=(0,slicedToArray.Z)(_useState5,2),isFocused=_useState6[0],setIsFocused=_useState6[1],_inputValue$split=inputValue.split(numberParams.decimalSeparator),_inputValue$split2=(0,slicedToArray.Z)(_inputValue$split,2),majorPart=_inputValue$split2[0],minorPart=_inputValue$split2[1],currencyCode=getCurrencyCodeWithFormat(currency,codeFormat);return(0,jsx_runtime.jsx)("div",{className:classnames_default()(index_module.container,(0,defineProperty.Z)((0,defineProperty.Z)((0,defineProperty.Z)({},index_module.bold,void 0===_ref$bold||_ref$bold),index_module.filled,!!inputValue),index_module.focused,isFocused)),children:(0,jsx_runtime.jsx)(SuffixInput,(0,objectSpread2.Z)((0,objectSpread2.Z)({},restProps),{},{rightAddons:withStepper?(0,jsx_runtime.jsxs)(react.Fragment,{children:[rightAddons,(0,jsx_runtime.jsx)(shared.Steppers,{colors:colors,dataTestId:dataTestId,disabled:restProps.disabled,focused:isFocused&&!restProps.disableUserInput,value:numberValueOrZero,min:minStepperValue,max:maxStepperValue,onIncrement:function(){if(null!=stepper&&stepper.step){var value1=numberValueOrZero+stepper.step,valueString=stringifyNumber(value1,numberParams);null==onChange||onChange(null,{value:value1,valueString:valueString}),uncontrolled&&setNumberValue(value1)}},onDecrement:function(){if(null!=stepper&&stepper.step){var value1=numberValueOrZero-stepper.step,valueString=stringifyNumber(value1,numberParams);null==onChange||onChange(null,{value:value1,valueString:valueString}),uncontrolled&&setNumberValue(value1)}},size:restProps.size})]}):rightAddons,suffix:(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:index_module.suffixMajor,children:majorPart}),(0,jsx_runtime.jsxs)("span",{className:classnames_default()((0,defineProperty.Z)((0,defineProperty.Z)((0,defineProperty.Z)({},colorStyles[colors].minorPartAndCurrency,void 0===_ref$transparentMinor||_ref$transparentMinor),colorStyles[colors].disabled,restProps.disabled),colorStyles[colors].readOnly,restProps.readOnly)),children:[void 0!==minorPart&&(0,jsx_runtime.jsx)("span",{className:index_module.suffixMinor,children:"".concat(numberParams.decimalSeparator).concat(minorPart)}),util._u,(0,jsx_runtime.jsx)("span",{className:index_module.suffixCurrency,children:suffix===currency?currencyCode:suffix})]})]}),suffixContainerClassName:index_module.suffixContainer,clear:void 0!==_ref$clear&&_ref$clear,labelView:labelView,label:label,placeholder:label?"outer"===labelView?placeholder:void 0:placeholder,value:inputValue,colors:colors,className:classnames_default()(index_module.component,className),focusedClassName:focusedClassName,inputClassName:classnames_default()(index_module.input,inputClassName),onInput:function(event){var value1=event.target.value;if(setInputValue(value1),!(value1.startsWith(numberParams.decimalSeparator)||value1.endsWith(numberParams.decimalSeparator)||"0"!==value1&&new RegExp("^".concat(numberParams.minusSign,"?0?(").concat(numberParams.decimalSeparator,"0*)?$")).test(value1)||new RegExp("^".concat(numberParams.minusSign,"?0[^").concat(numberParams.decimalSeparator,"]")).test(value1))){var numOrNull=parseNumber(value1,numberParams);null==onChange||onChange(event,{value:numOrNull,valueString:value1}),uncontrolled&&setNumberValue(numOrNull)}},onClear:function(event){null==onClear||onClear(event),uncontrolled&&setNumberValue(null)},onFocus:function(event){setIsFocused(!0),null==onFocus||onFocus(event)},onBlur:function(event){setIsFocused(!1),null==onBlur||onBlur(event)},inputMode:0===numberParams.maximumFractionDigits?"numeric":"decimal",dataTestId:dataTestId,ref:(0,react_merge_refs_esm.Z)([ref,inputRef,maskitoRef]),breakpoint:breakpoint,client:client}))})});AmountInput.displayName="AmountInput",SuffixInput.displayName="SuffixInput";try{AmountInput.displayName="AmountInput",AmountInput.__docgenInfo={description:"Компонент для ввода денежных значений",displayName:"AmountInput",props:{size:{defaultValue:null,description:"Размер компонента\n@description s, m, l, xl deprecated, используйте вместо них 48, 56, 64, 72 соответственно",name:"size",required:!1,type:{name:'"s" | "m" | "l" | "xl" | 40 | 48 | 56 | 64 | 72 | undefined'}},onClick:{defaultValue:null,description:"Обработчик клика по полю",name:"onClick",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void) | undefined"}},onMouseDown:{defaultValue:null,description:"Обработчик MouseDown по полю",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<HTMLDivElement, MouseEvent>) => void) | undefined"}},className:{defaultValue:null,description:"Дополнительный класс",name:"className",required:!1,type:{name:"string | undefined"}},onMouseUp:{defaultValue:null,description:"Обработчик MouseUp по полю",name:"onMouseUp",required:!1,type:{name:"(MouseEventHandler<HTMLInputElement> & ((event: MouseEvent<HTMLDivElement, MouseEvent>) => void)) | undefined"}},block:{defaultValue:null,description:"Растягивает компонент на ширину контейнера",name:"block",required:!1,type:{name:"boolean | undefined"}},clear:{defaultValue:{value:"false"},description:"Крестик для очистки поля",name:"clear",required:!1,type:{name:"boolean | undefined"}},colors:{defaultValue:{value:"default"},description:"Набор цветов для компонента",name:"colors",required:!1,type:{name:'"default" | "inverted" | undefined'}},error:{defaultValue:null,description:"Отображение ошибки",name:"error",required:!1,type:{name:"ReactNode"}},success:{defaultValue:null,description:"Отображение иконки успеха",name:"success",required:!1,type:{name:"boolean | undefined"}},hint:{defaultValue:null,description:"Текст подсказки",name:"hint",required:!1,type:{name:"ReactNode"}},label:{defaultValue:null,description:"Лейбл компонента",name:"label",required:!1,type:{name:"ReactNode"}},labelView:{defaultValue:null,description:"Вид лейбла внутри / снаружи",name:"labelView",required:!1,type:{name:'"inner" | "outer" | undefined'}},wrapperRef:{defaultValue:null,description:"Ref для обертки input",name:"wrapperRef",required:!1,type:{name:"Ref<HTMLDivElement> | undefined"}},leftAddons:{defaultValue:null,description:"Слот слева",name:"leftAddons",required:!1,type:{name:"ReactNode"}},rightAddons:{defaultValue:null,description:"Слот справа",name:"rightAddons",required:!1,type:{name:"ReactNode"}},leftAddonsProps:{defaultValue:null,description:"Свойства для обертки левых аддонов",name:"leftAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement> | undefined"}},rightAddonsProps:{defaultValue:null,description:"Свойства для обертки правых аддонов",name:"rightAddonsProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement> | undefined"}},bottomAddons:{defaultValue:null,description:"Слот под инпутом",name:"bottomAddons",required:!1,type:{name:"ReactNode"}},fieldClassName:{defaultValue:null,description:"Дополнительный класс для поля",name:"fieldClassName",required:!1,type:{name:"string | undefined"}},inputClassName:{defaultValue:null,description:"Дополнительный класс инпута",name:"inputClassName",required:!1,type:{name:"string | undefined"}},labelClassName:{defaultValue:null,description:"Дополнительный класс для лейбла",name:"labelClassName",required:!1,type:{name:"string | undefined"}},addonsClassName:{defaultValue:null,description:"Дополнительный класс для аддонов",name:"addonsClassName",required:!1,type:{name:"string | undefined"}},focusedClassName:{defaultValue:null,description:"Класс, который будет установлен при фокусе",name:"focusedClassName",required:!1,type:{name:"string | undefined"}},filledClassName:{defaultValue:null,description:"Класс, который будет установлен, если в поле есть значение",name:"filledClassName",required:!1,type:{name:"string | undefined"}},onClear:{defaultValue:null,description:"Обработчик нажатия на кнопку очистки",name:"onClear",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void) | undefined"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования.\nДля FormControl используется модификатор -form-control",name:"dataTestId",required:!1,type:{name:"string | undefined"}},disableUserInput:{defaultValue:null,description:"Запрещает ввод с клавиатуры",name:"disableUserInput",required:!1,type:{name:"boolean | undefined"}},breakpoint:{defaultValue:{value:"1024"},description:"Контрольная точка, с нее начинается desktop версия",name:"breakpoint",required:!1,type:{name:"number | undefined"}},client:{defaultValue:null,description:"Версия, которая будет использоваться при серверном рендеринге",name:"client",required:!1,type:{name:'"desktop" | "mobile" | undefined'}},defaultMatchMediaValue:{defaultValue:null,description:"Значение по-умолчанию для хука useMatchMedia\n@deprecated Используйте client",name:"defaultMatchMediaValue",required:!1,type:{name:"boolean | (() => boolean) | undefined"}},value:{defaultValue:null,description:"Денежное значение в минорных единицах",name:"value",required:!1,type:{name:"string | number | null | undefined"}},defaultValue:{defaultValue:{value:"null"},description:"Значение по-умолчанию в минорных единицах",name:"defaultValue",required:!1,type:{name:"string | number | null | undefined"}},codeFormat:{defaultValue:{value:"symbolic"},description:"Формат отображения кода валюты",name:"codeFormat",required:!1,type:{name:'"letter" | "symbolic" | undefined'}},view:{defaultValue:{value:"default"},description:"default - не отображаем копейки, если их значение 0\nwithZeroMinorPart - отображаем копейки, даже если их значение равно 0",name:"view",required:!1,type:{name:'"default" | "withZeroMinorPart" | undefined'}},currency:{defaultValue:{value:"RUR"},description:"Валюта",name:"currency",required:!1,type:{name:'"ALL" | "AFN" | "ARS" | "AWG" | "AUD" | "AZN" | "BSD" | "BBD" | "BYN" | "BZD" | "BMD" | "BOB" | "BOV" | "BAM" | "BWP" | "BGN" | "BRL" | "BND" | "KHR" | "CAD" | "KYD" | "CLP" | "CNY" | ... 157 more ... | undefined'}},suffix:{defaultValue:{value:"RUR"},description:"Дополнительный закрепленный текст справа от основного значения. (по умолчанию — символ валюты)",name:"suffix",required:!1,type:{name:"string | undefined"}},integerLength:{defaultValue:{value:"9"},description:"Максимальное число знаков до запятой\nmax 15",name:"integerLength",required:!1,type:{name:"number | undefined"}},minority:{defaultValue:{value:"100"},description:"Минорные единицы",name:"minority",required:!1,type:{name:"number | undefined"}},integersOnly:{defaultValue:{value:"false"},description:"Позволяет вводить только целые значения",name:"integersOnly",required:!1,type:{name:"boolean | undefined"}},positiveOnly:{defaultValue:{value:"true"},description:"",name:"positiveOnly",required:!1,type:{name:"boolean | undefined"}},bold:{defaultValue:{value:"true"},description:"Жир",name:"bold",required:!1,type:{name:"boolean | undefined"}},onChange:{defaultValue:null,description:"Обработчик события изменения значения",name:"onChange",required:!1,type:{name:"((e: ChangeEvent<HTMLInputElement> | null, payload: { value: number | null; valueString: string; }) => void) | undefined"}},transparentMinor:{defaultValue:{value:"true"},description:"Делает минорную часть полупрозрачной",name:"transparentMinor",required:!1,type:{name:"boolean | undefined"}},stepper:{defaultValue:null,description:'Добавляет компонент "Stepper" в правый аддон',name:"stepper",required:!1,type:{name:"{ step: number; min?: number | undefined; max?: number | undefined; } | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/amount-input/src/Component.tsx#AmountInput"]={docgenInfo:AmountInput.__docgenInfo,name:"AmountInput",path:"packages/amount-input/src/Component.tsx#AmountInput"})}catch(__react_docgen_typescript_loader_error){}}}]);