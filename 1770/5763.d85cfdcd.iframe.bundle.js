"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5763],{"./packages/slider/src/Component.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{p:function(){return SIZE_TO_CLASSNAME_MAP},i:function(){return Slider}});var defineProperty=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),nouislider=__webpack_require__("./node_modules/nouislider/dist/nouislider.js"),nouislider_default=__webpack_require__.n(nouislider),getMarkerValue=function(_ref){var markerElement=_ref.markerElement,min=_ref.min,max=_ref.max,nextElement=markerElement.nextElementSibling;if(null!=nextElement&&nextElement.classList.contains("noUi-value"))return parseFloat(nextElement.getAttribute("data-value")||"0");if(!nextElement)return null;var percentage=parseFloat(markerElement.style.left.replace("%",""));return Number.isNaN(percentage)?null:Math.round(percentage/100*(max-min)+min)},updateMarkerAttributes=function(_ref2){var markerElement=_ref2.markerElement,isPassed=_ref2.isPassed,isCurrent=_ref2.isCurrent;isPassed?markerElement.setAttribute("data-passed","true"):markerElement.removeAttribute("data-passed"),isCurrent?markerElement.setAttribute("data-current","true"):markerElement.removeAttribute("data-current")},isMarkerPassed=function(_ref3){var markerValue=_ref3.markerValue,currentValue=_ref3.currentValue,currentValueTo=_ref3.currentValueTo;return _ref3.hasValueTo&&void 0!==currentValueTo?markerValue>=Math.min(currentValue,currentValueTo)&&markerValue<=Math.max(currentValue,currentValueTo):markerValue<currentValue},isMarkerCurrent=function(_ref4){var markerValue=_ref4.markerValue,currentValue=_ref4.currentValue,currentValueTo=_ref4.currentValueTo;return _ref4.hasValueTo&&void 0!==currentValueTo?markerValue===currentValue||markerValue===currentValueTo:markerValue===currentValue},useSliderMarkers=function(_ref){var sliderRef=_ref.sliderRef,hasValueTo=_ref.hasValueTo,value=_ref.value,valueTo=_ref.valueTo,min=_ref.min,max=_ref.max,onChange=_ref.onChange,updateMarkersState=(0,react.useCallback)(function(currentValue,currentValueTo){sliderRef.current&&sliderRef.current.querySelectorAll(".noUi-marker").forEach(function(marker){var markerValue=getMarkerValue({markerElement:marker,min:min,max:max});null!==markerValue&&updateMarkerAttributes({markerElement:marker,isPassed:isMarkerPassed({markerValue:markerValue,currentValue:currentValue,currentValueTo:currentValueTo,hasValueTo:hasValueTo}),isCurrent:isMarkerCurrent({markerValue:markerValue,currentValue:currentValue,currentValueTo:currentValueTo,hasValueTo:hasValueTo})})})},[sliderRef,hasValueTo,min,max]),createSlideHandler=(0,react.useCallback)(function(slider){return function(){if(hasValueTo){var sliderValues=slider.get(),from=Number(sliderValues[0]),to=Number(sliderValues[1]);from<=to?(updateMarkersState(from,to),null==onChange||onChange({value:from,valueTo:to})):(updateMarkersState(to,from),null==onChange||onChange({value:to,valueTo:from}))}else{var currentValue=Number(slider.get());updateMarkersState(currentValue),null==onChange||onChange({value:currentValue})}}},[hasValueTo,updateMarkersState,onChange]);return(0,react.useEffect)(function(){hasValueTo?updateMarkersState(value,valueTo):updateMarkersState(value)},[value,valueTo,hasValueTo,updateMarkersState]),{updateMarkersState:updateMarkersState,createSlideHandler:createSlideHandler}},toConsumableArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),createPipsFilter=function(_ref){var hideCustomDotsNumbers=_ref.hideCustomDotsNumbers,hideLargePips=_ref.hideLargePips,pipsValues=_ref.pipsValues,customDots=_ref.customDots,mergeValues=_ref.mergeValues;return function(value,type){return hideCustomDotsNumbers?null!=pipsValues&&pipsValues.includes(value)&&null!=customDots&&customDots.includes(value)?(console.log("value includes pipsValues and customDots",{value:value,type:type}),1):null!=pipsValues&&pipsValues.includes(value)&&hideLargePips?(console.log("value includes pipsValues",{value:value,type:1}),1):null!=customDots&&customDots.includes(value)?(console.log("value includes customDots",{value:value,type:1}),1):Number.isInteger(value)&&Number.isFinite(value)?0:-1:null!=customDots&&customDots.includes(value)||null!=mergeValues&&mergeValues.includes(value)?1:null!=mergeValues&&mergeValues.length||null!=customDots&&customDots.length?Number.isInteger(value)&&Number.isFinite(value)?0:-1:type}},createPipsFormat=function(_ref){var customDots=_ref.customDots,showNumbers=_ref.showNumbers,hideCustomDotsNumbers=_ref.hideCustomDotsNumbers,pipsValues=_ref.pipsValues;return{to:function to(value){if(!showNumbers)return"";var _customDots$includes,_pipsValues$includes,isCustom=null!==(_customDots$includes=null==customDots?void 0:customDots.includes(value))&&void 0!==_customDots$includes&&_customDots$includes,isPips=null!==(_pipsValues$includes=null==pipsValues?void 0:pipsValues.includes(value))&&void 0!==_pipsValues$includes&&_pipsValues$includes,isWhole=Number.isInteger(value);return(console.log("createPipsFormat:",{value:value,showNumbers:showNumbers,hideCustomDotsNumbers:hideCustomDotsNumbers,isCustom:isCustom,isPips:isPips,isWhole:isWhole,customDots:customDots,pipsValues:pipsValues}),hideCustomDotsNumbers)?isPips&&isCustom||isPips?value:isCustom?"":isWhole?value:"":null!=pipsValues&&pipsValues.length?isPips||isCustom?value:isWhole?value:"":null!=customDots&&customDots.length?isCustom?value:isWhole?value:"":value}}},createRangeValues=function(_ref){var min=_ref.min,max=_ref.max,step=_ref.step,_ref$hasCustomDots=_ref.hasCustomDots;return void 0!==_ref$hasCustomDots&&_ref$hasCustomDots?Array.from({length:max-min+1},function(_,i){return min+i}):Array.from({length:Math.floor((max-min)/step)+1},function(_,i){return min+i*step})},config={step:function step(_ref){var min=_ref.min,max=_ref.max,_step=_ref.step,showNumbers=_ref.showNumbers,hideLargePips=_ref.hideLargePips;return{mode:"values",values:null==createRangeValues?void 0:createRangeValues({min:min,max:max,step:_step}),format:createPipsFormat({showNumbers:showNumbers,hideLargePips:hideLargePips})}},custom:function custom(_ref2){var customDots=_ref2.customDots,showNumbers=_ref2.showNumbers,hideCustomDotsNumbers=_ref2.hideCustomDotsNumbers,hideLargePips=_ref2.hideLargePips,pipsValues=_ref2.pipsValues;if(null!=customDots&&customDots.length&&null!=pipsValues&&pipsValues.length){var mergeValues=Array.from(new Set([].concat((0,toConsumableArray.Z)(pipsValues),(0,toConsumableArray.Z)(customDots)))).sort(function(a,b){return a-b});return console.log("mergeValues:",mergeValues),{mode:"values",values:mergeValues,filter:createPipsFilter({hideCustomDotsNumbers:hideCustomDotsNumbers,pipsValues:pipsValues,customDots:customDots,mergeValues:mergeValues,hideLargePips:hideLargePips}),format:createPipsFormat({pipsValues:pipsValues,customDots:customDots,showNumbers:showNumbers,hideCustomDotsNumbers:hideCustomDotsNumbers})}}return{mode:"values",values:customDots,filter:createPipsFilter({customDots:customDots,hideCustomDotsNumbers:hideCustomDotsNumbers,hideLargePips:hideLargePips,pipsValues:[]}),format:createPipsFormat({customDots:customDots,showNumbers:showNumbers,hideCustomDotsNumbers:hideCustomDotsNumbers,pipsValues:[]})}}},createPipsConfig=function(_ref){var _config$dotsSlider,min=_ref.min,max=_ref.max,step=_ref.step,_ref$dotsSlider=_ref.dotsSlider,_ref$showNumbers=_ref.showNumbers,_ref$hideCustomDotsNu=_ref.hideCustomDotsNumbers,_ref$hideLargePips=_ref.hideLargePips,pips=_ref.pips,_ref$customDots=_ref.customDots,customDots=void 0===_ref$customDots?[]:_ref$customDots;return pips&&!(null!=customDots&&customDots.length)?pips:null===(_config$dotsSlider=config[void 0===_ref$dotsSlider?"step":_ref$dotsSlider])||void 0===_config$dotsSlider?void 0:_config$dotsSlider.call(config,{min:min,max:max,step:step,customDots:customDots,showNumbers:void 0===_ref$showNumbers||_ref$showNumbers,hideCustomDotsNumbers:void 0!==_ref$hideCustomDotsNu&&_ref$hideCustomDotsNu,hideLargePips:void 0===_ref$hideLargePips||_ref$hideLargePips,pipsValues:pips&&"values"in pips&&Array.isArray(pips.values)?pips.values:[]})},index_module={component:"component_UamdO",disabled:"disabled_LpJan","size-2":"size-2_LNomt","size-4":"size-4_pUyli",dotsDisabled:"dotsDisabled_a3pBp",numbersDisabled:"numbersDisabled_FoQ47",hideLargePips:"hideLargePips_Ti4El"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),SIZE_TO_CLASSNAME_MAP={s:"size-2",m:"size-4",2:"size-2",4:"size-4"},Slider=function(_ref){var _ref$min=_ref.min,min=void 0===_ref$min?0:_ref$min,_ref$max=_ref.max,max=void 0===_ref$max?100:_ref$max,_ref$step=_ref.step,step=void 0===_ref$step?1:_ref$step,_ref$value=_ref.value,value=void 0===_ref$value?0:_ref$value,valueTo=_ref.valueTo,disabled=_ref.disabled,pips=_ref.pips,_ref$behaviour=_ref.behaviour,behaviour=void 0===_ref$behaviour?"tap":_ref$behaviour,_ref$range=_ref.range,range=void 0===_ref$range?{min:min,max:max}:_ref$range,_ref$size=_ref.size,_ref$dots=_ref.dots,_ref$dotsSlider=_ref.dotsSlider,dotsSlider=void 0===_ref$dotsSlider?"step":_ref$dotsSlider,customDots=_ref.customDots,_ref$showNumbers=_ref.showNumbers,showNumbers=void 0!==_ref$showNumbers&&_ref$showNumbers,_ref$hideCustomDotsNu=_ref.hideCustomDotsNumbers,hideCustomDotsNumbers=void 0!==_ref$hideCustomDotsNu&&_ref$hideCustomDotsNu,_ref$hideLargePips=_ref.hideLargePips,hideLargePips=void 0===_ref$hideLargePips||_ref$hideLargePips,className=_ref.className,onChange=_ref.onChange,onStart=_ref.onStart,onEnd=_ref.onEnd,dataTestId=_ref.dataTestId,_ref$snap=_ref.snap,snap=void 0!==_ref$snap&&_ref$snap,sliderRef=(0,react.useRef)(null),busyRef=(0,react.useRef)(!1),hasValueTo=void 0!==valueTo,hasCustomDotsSlider="custom"===dotsSlider,pipsValues=pips&&"values"in pips&&Array.isArray(pips.values)?pips.values:[],getSlider=function(){var _sliderRef$current;return null===(_sliderRef$current=sliderRef.current)||void 0===_sliderRef$current?void 0:_sliderRef$current.noUiSlider},shouldCreatePipsConfig=pips||(null==customDots?void 0:customDots.length),pipsConfig=(0,react.useMemo)(function(){if(shouldCreatePipsConfig)return createPipsConfig({dotsSlider:dotsSlider,customDots:hasCustomDotsSlider?customDots:void 0,showNumbers:showNumbers,hideCustomDotsNumbers:hasCustomDotsSlider?hideCustomDotsNumbers:void 0,hideLargePips:hideLargePips,pips:pips,min:min,max:max,step:step})},[shouldCreatePipsConfig,hasCustomDotsSlider,dotsSlider,customDots,showNumbers,hideCustomDotsNumbers,hideLargePips,pips,min,max,step]),_useSliderMarkers=useSliderMarkers({sliderRef:sliderRef,hasValueTo:hasValueTo,value:value,valueTo:valueTo,min:min,max:max,onChange:onChange}),updateMarkersState=_useSliderMarkers.updateMarkersState,createSlideHandler=_useSliderMarkers.createSlideHandler;return(0,react.useEffect)(function(){if(sliderRef.current){var slider=nouislider_default().create(sliderRef.current,{start:valueTo?[value,valueTo]:value,connect:!!valueTo||[!0,!1],behaviour:behaviour,step:step,pips:pipsConfig,range:range,snap:snap});return function(){return slider.destroy()}}},[]),(0,react.useEffect)(function(){var slider=getSlider();if(slider)return slider.on("start",function(){busyRef.current=!0,null==onStart||onStart()}),slider.on("change",function(){busyRef.current=!1,null==onEnd||onEnd()}),function(){slider.off("start"),slider.off("change")}},[onStart,onEnd]),(0,react.useEffect)(function(){var slider=getSlider();slider&&slider.updateOptions({step:step,range:range,pips:pipsConfig,snap:snap},!0)},[pipsConfig,range,snap,step]),(0,react.useEffect)(function(){var slider=getSlider();slider&&!1===busyRef.current&&(valueTo?slider.set([value,valueTo],!1):slider.set(value,!1))},[value,valueTo]),(0,react.useEffect)(function(){var slider=getSlider();if(slider){var handler=createSlideHandler(slider);slider.off("slide"),slider.on("slide",handler),hasValueTo?updateMarkersState(value,valueTo):updateMarkersState(value)}},[onChange,hasValueTo,value,valueTo,createSlideHandler,updateMarkersState]),(0,react.useEffect)(function(){hideLargePips&&pipsValues.length&&"step"!==dotsSlider&&sliderRef.current&&sliderRef.current.querySelectorAll(".noUi-marker-large").forEach(function(marker){var nextElement=marker.nextElementSibling;if(null!=nextElement&&nextElement.classList.contains("noUi-value")){var _customDots$includes,dataValue=nextElement.getAttribute("data-value"),_value=dataValue?parseFloat(dataValue):null;null!==_value&&pipsValues.includes(_value)?null!==(_customDots$includes=null==customDots?void 0:customDots.includes(_value))&&void 0!==_customDots$includes&&_customDots$includes?marker.classList.remove("hide-for-pips-value"):marker.classList.add("hide-for-pips-value"):marker.classList.remove("hide-for-pips-value")}})},[hideLargePips,pipsValues,customDots,dotsSlider]),(0,jsx_runtime.jsx)("div",{className:classnames_default()("component_UamdO",className,index_module[SIZE_TO_CLASSNAME_MAP[void 0===_ref$size?2:_ref$size]],(0,defineProperty.Z)((0,defineProperty.Z)((0,defineProperty.Z)((0,defineProperty.Z)({},"numbersDisabled_FoQ47",hasCustomDotsSlider&&!(null!=customDots&&customDots.length)),"hideLargePips_Ti4El",hideLargePips),"dotsDisabled_a3pBp",!(void 0!==_ref$dots&&_ref$dots)),"disabled_LpJan",disabled)),ref:sliderRef,"data-test-id":dataTestId,disabled:disabled})};try{Slider.displayName="Slider",Slider.__docgenInfo={description:"",displayName:"Slider",props:{min:{defaultValue:{value:"0"},description:"Мин. допустимое число",name:"min",required:!1,type:{name:"number | undefined"}},max:{defaultValue:{value:"100"},description:"Макс. допустимое число",name:"max",required:!1,type:{name:"number | undefined"}},step:{defaultValue:{value:"1"},description:"Шаг (должен нацело делить отрезок между мин и макс)",name:"step",required:!1,type:{name:"number | undefined"}},pips:{defaultValue:null,description:"Отображение подписей\nhttps://refreshless.com/nouislider/pips/",name:"pips",required:!1,type:{name:"Pips | undefined"}},range:{defaultValue:{value:"{ min, max }"},description:"Настройка шагов\nhttps://refreshless.com/nouislider/pips/#section-range",name:"range",required:!1,type:{name:"RangeOptions | undefined"}},snap:{defaultValue:{value:"false"},description:"Флаг точной привязки к range\nhttps://refreshless.com/nouislider/examples/#section-skipping",name:"snap",required:!1,type:{name:"boolean | undefined"}},value:{defaultValue:{value:"0"},description:"Значение слайдера",name:"value",required:!1,type:{name:"number | undefined"}},valueTo:{defaultValue:null,description:"Второе значение слайдера (значение второго ползунка)\nесли передать ValueTo, то слайдер будет работать как range",name:"valueTo",required:!1,type:{name:"number | undefined"}},disabled:{defaultValue:null,description:"Заблокированное состояние",name:"disabled",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:"Дополнительный класс",name:"className",required:!1,type:{name:"string | undefined"}},behaviour:{defaultValue:{value:"tap"},description:"Поведение ползунка",name:"behaviour",required:!1,type:{name:'"unconstrained-tap" | "tap" | undefined'}},size:{defaultValue:{value:"2"},description:"Размер\n@description s, m deprecated, используйте вместо них 2, 4 соответственно",name:"size",required:!1,type:{name:'"s" | "m" | 2 | 4 | undefined'}},dots:{defaultValue:{value:"false"},description:"Включение/отключение отображения точек на слайдере",name:"dots",required:!1,type:{name:"boolean | undefined"}},dotsSlider:{defaultValue:{value:"step"},description:"Тип отображения точек на слайдере: 'step' - по шагу, 'custom' - произвольные",name:"dotsSlider",required:!1,type:{name:'"step" | "custom" | undefined'}},customDots:{defaultValue:null,description:"Массив значений для произвольного размещения точек",name:"customDots",required:!1,type:{name:"number[] | undefined"}},showNumbers:{defaultValue:{value:"false"},description:"Включение/отключение отображения чисел под точками\nДействует на все точки кроме dotsSlider",name:"showNumbers",required:!1,type:{name:"boolean | undefined"}},hideCustomDotsNumbers:{defaultValue:{value:"false"},description:"Скрытие чисел только для кастомных точек\nПри hideCustomDotsNumbers=true числа скрываются только у customDots, остальные числа остаются видимыми",name:"hideCustomDotsNumbers",required:!1,type:{name:"boolean | undefined"}},hideLargePips:{defaultValue:{value:"true"},description:"Отключение больших точек с числами (тип 1) через CSS стили",name:"hideLargePips",required:!1,type:{name:"boolean | undefined"}},onChange:{defaultValue:null,description:"Обработчик поля ввода",name:"onChange",required:!1,type:{name:"((payload: { value: number; valueTo?: number | undefined; }) => void) | undefined"}},onStart:{defaultValue:null,description:"@deprecated Обработчик начала перетаскивания ползунка",name:"onStart",required:!1,type:{name:"(() => void) | undefined"}},onEnd:{defaultValue:null,description:"Обработчик окончания перетаскивания ползунка\n@description https://refreshless.com/nouislider/events-callbacks/#section-change",name:"onEnd",required:!1,type:{name:"(() => void) | undefined"}},dataTestId:{defaultValue:null,description:"Идентификатор для систем автоматизированного тестирования",name:"dataTestId",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/slider/src/Component.tsx#Slider"]={docgenInfo:Slider.__docgenInfo,name:"Slider",path:"packages/slider/src/Component.tsx#Slider"})}catch(__react_docgen_typescript_loader_error){}}}]);