"use strict";(self.webpackChunk_alfalab_core_components=self.webpackChunk_alfalab_core_components||[]).push([[1800],{"./packages/image/src/docs/Component.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:function(){return __namedExportsOrder},image:function(){return image}});var _image$parameters,_image$parameters2,_image$parameters2$do,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");__webpack_require__("./node_modules/react/index.js");var _alfalab_core_config__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@alfalab/core-config/dist/index.js"),___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/image/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),meta={title:"Components/Image",component:___WEBPACK_IMPORTED_MODULE_2__.Image,id:"Image"},image={name:"Image",render:function render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_alfalab_core_config__WEBPACK_IMPORTED_MODULE_1__.CoreConfigContext.Provider,{value:{breakpoint:1024,client:"desktop"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(___WEBPACK_IMPORTED_MODULE_2__.Image,{src:"https://web-test.alfabank.ru/mobile/s3/static/loyalty/services/travel_300x300.png"})})}};__webpack_exports__.default=meta,image.parameters=(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)({},image.parameters),{},{docs:(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)({},null===(_image$parameters=image.parameters)||void 0===_image$parameters?void 0:_image$parameters.docs),{},{source:(0,_home_runner_work_core_components_core_components_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)({originalSource:"{\n  name: 'Image',\n  render: () => {\n    return <CoreConfigContext.Provider value={{\n      breakpoint: 1024,\n      client: 'desktop'\n    }}>\n                <Image src='https://web-test.alfabank.ru/mobile/s3/static/loyalty/services/travel_300x300.png' />\n            </CoreConfigContext.Provider>;\n  }\n}"},null===(_image$parameters2=image.parameters)||void 0===_image$parameters2?void 0:null===(_image$parameters2$do=_image$parameters2.docs)||void 0===_image$parameters2$do?void 0:_image$parameters2$do.source)})});let __namedExportsOrder=["image"]},"./packages/image/src/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Image:function(){return Image}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),dist=__webpack_require__("./node_modules/@alfalab/core-config/dist/index.js"),defaultConfig={root:null,rootMargin:"0px 0px 0px 0px",threshold:[0,1]},useInViewRef=function(options){var _useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),inView=_useState2[0],setInView=_useState2[1],ref=(0,react.useRef)(null);return(0,react.useEffect)(function(){if(ref.current){var observer=new IntersectionObserver(function(_ref){setInView((0,slicedToArray.Z)(_ref,1)[0].isIntersecting)},options||defaultConfig);return observer.observe(ref.current),function(){observer.disconnect()}}},[options]),[ref,inView]},index_module={fullSize:"fullSize_d_wNM",imgWrapper:"imgWrapper_kPd0w"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["className","dataTestId","src","proxyMap","warning"],LazyImageCdnIntegration=react.lazy(function(){return Promise.all([__webpack_require__.e(179),__webpack_require__.e(6102)]).then(__webpack_require__.bind(__webpack_require__,"./packages/image/src/components/dev-component.tsx"))}),Image=function(_ref){var _props$style,_props$style2,className=_ref.className,dataTestId=_ref.dataTestId,src=_ref.src,proxyMap=_ref.proxyMap,warning=_ref.warning,props=(0,objectWithoutProperties.Z)(_ref,_excluded),_useInViewRef=useInViewRef(),_useInViewRef2=(0,slicedToArray.Z)(_useInViewRef,2),imgRef=_useInViewRef2[0],inView=_useInViewRef2[1],loaded=(0,react.useRef)(!1),componentContext=(0,dist.useComponentOverrides)("Image"),url=(0,react.useMemo)(function(){var resourseMap=(proxyMap||(null==componentContext?void 0:componentContext.proxyMap)||[]).find(function(resourse){return src.includes(resourse.from)});return resourseMap?src.replace(resourseMap.from,resourseMap.to):src},[src,null==componentContext?void 0:componentContext.proxyMap,proxyMap]),imgCom=(0,jsx_runtime.jsx)("img",(0,objectSpread2.Z)((0,objectSpread2.Z)({alt:""},props),{},{src:inView||loaded.current?url:void 0,className:classnames_default()(className,(0,defineProperty.Z)({},index_module.fullSize,!!(null===(_props$style=props.style)||void 0===_props$style?void 0:_props$style.objectFit))),"data-test-id":dataTestId,onLoad:function onLoad(e){props.onLoad&&props.onLoad(e),loaded.current=!0},ref:imgRef.current}));return warning||(null==componentContext?void 0:componentContext.warning)?(0,jsx_runtime.jsxs)("div",{className:classnames_default()(index_module.imgWrapper,(0,defineProperty.Z)({},index_module.fullSize,!!(null===(_props$style2=props.style)||void 0===_props$style2?void 0:_props$style2.objectFit))),children:[imgCom,(inView||loaded.current)&&(0,jsx_runtime.jsx)(react.Suspense,{fallback:"",children:(0,jsx_runtime.jsx)(LazyImageCdnIntegration,{src:url,warning:warning})})]}):imgCom};try{Image.displayName="Image",Image.__docgenInfo={description:"Компонент, который проксирует картинки из источников\nТакже смотрящий за viewPort пользователя, загружая то что видит человек\n\nНапример из https://web-test.alfabank.ru/mobile/s3/static/loyalty/services/travel_300x300.png => https://web-test.servicecdn.ru/public/s3/static/loyalty/services/travel_300x300.png\n\n[Макет]()",displayName:"Image",props:{src:{defaultValue:null,description:"Источник изображения",name:"src",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"Сss класс для стилизации общей обёртки",name:"className",required:!1,type:{name:"string"}},dataTestId:{defaultValue:null,description:"Id компонента для тестов",name:"dataTestId",required:!1,type:{name:"string"}},proxyMap:{defaultValue:null,description:"Мапа проксирующих ресурсов",name:"proxyMap",required:!1,type:{name:"ImageProxyMap"}},warning:{defaultValue:null,description:"",name:"warning",required:!1,type:{name:"{ message?: string; url?: string; } | undefined"}},quality:{defaultValue:null,description:"",name:"quality",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/image/src/component.tsx#Image"]={docgenInfo:Image.__docgenInfo,name:"Image",path:"packages/image/src/component.tsx#Image"})}catch(__react_docgen_typescript_loader_error){}}}]);