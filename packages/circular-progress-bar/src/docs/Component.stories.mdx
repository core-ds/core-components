import { Meta, Story, ArgsTable, Markdown } from '@storybook/addon-docs';
import { text, select, number, boolean } from '@storybook/addon-knobs';
import { ComponentHeader, Tabs, CssVars } from 'storybook/blocks';
import { CircularProgressBar } from '@alfalab/core-components-circular-progress-bar';

import { CircularProgressBar as CircularProgressBarTS } from '../Component';
import packageJson from '../../package.json';
import Description from './description.mdx';
import Changelog from '../../CHANGELOG.md?raw';
import styles from '!!raw-loader!../index.module.css';

<Meta
    title='Components/CircularProgressBar'
    component={CircularProgressBar}
    id='CircularProgressBar'
/>

{/* Canvas */}

<Story name='CircularProgressBar'>
    {React.createElement(() => {
        const value = number('value', 50);
        const view = select('view', ['positive', 'negative']);
        const completeTextColor = select(
            'completeTextColor',
            ['primary', 'primary-inverted', 'positive', 'negative', 'secondary'],
            'secondary',
        );
        const title = text('title', 'title');
        const titleComplete = text('titleComplete');
        const subtitle = text('subtitle', 'subtitle');
        const contentColor = select(
            'contentColor',
            ['primary', 'secondary', 'tertiary', 'positive', 'negative'],
            'secondary',
        );
        const subtitleComplete = text('subtitleComplete');
        const progressStrokeColor = text('progressStrokeColor');
        const circleColor = text('circleColor');
        return (
            <>
                <CircularProgressBar
                    value={value}
                    view={view}
                    progressStrokeColor={progressStrokeColor}
                    circleColor={circleColor}
                    title={title}
                    titleComplete={titleComplete}
                    subtitle={subtitle}
                    contentColor={contentColor}
                    subtitleComplete={subtitleComplete}
                    stroke={boolean('stroke', true)}
                    direction={select('direction', ['clockwise', 'counter-clockwise'], 'clockwise')}
                    fillComplete={boolean('fillComplete', false)}
                    completeTextColor={completeTextColor}
                    height={number('height', 0)}
                    size={select('size', ['xs', 's', 'm', 'l', 'xl', 'xxl'], 'l')}
                />
                <p>Без атрибута title значение для title берётся из value</p>
                <CircularProgressBar value={value} view={view} subtitle={subtitle} size='l' />
                <p>
                    Если есть children, то они подставляются в центр, а title и subtitle
                    игнорируются
                </p>
                <CircularProgressBar
                    value={value}
                    view={view}
                    title={title}
                    subtitle={subtitle}
                    size='l'
                >
                    <p>Hello</p>
                </CircularProgressBar>
            </>
        );
    })}
</Story>

{/* Docs */}

<ComponentHeader
    name='CircularProgressBar'
    version={packageJson.version}
    package='@alfalab/core-components/circular-progress-bar'
    design='https://www.figma.com/file/cdNnkh2QdxuvYLrBm4cubM/Web-%3A%3A-Core-Default-Components?node-id=58951%3A84594'
/>

```jsx
import { CircularProgressBar } from '@alfalab/core-components/circular-progress-bar';
```

<Tabs
    description={<Description />}
    changelog={<Markdown>{Changelog}</Markdown>}
    props={<ArgsTable of={CircularProgressBarTS} />}
    cssVars={<CssVars css={styles} />}
/>
