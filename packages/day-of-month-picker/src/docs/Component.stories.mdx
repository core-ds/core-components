import { Meta, Story, Markdown } from '@storybook/addon-docs';
import { select } from '@storybook/addon-knobs';
import { ComponentHeader, Tabs } from 'storybook/blocks';
import { Button } from '@alfalab/core-components-button';
import { DayOfMonthPicker } from '@alfalab/core-components-day-of-month-picker';
import { DayOfMonthPickerMobile } from '../components/day-of-month-picker-mobile';

import packageJson from '../../package.json';
import Changelog from '../../CHANGELOG.md?raw';
import Description from './description.mdx';
import Development from './development.mdx';
import { DayOfMonthPickerDesktop } from '../Component.desktop';
import { createElement, useState } from 'react';

<Meta title='Components/DayOfMonthPicker' component={DayOfMonthPicker} id='DayOfMonthPicker' />

{/* Canvas */}

<Story name='DayOfMonthPicker'>
    {createElement(() => {
        const [open, setOpen] = useState(false);
        const [value, setValue] = useState('');
        const device = select('device', ['desktop', 'mobile'], 'desktop');
        const renderContent = () => {
            if (device === 'desktop') {
                return (
                    <div
                        style={{
                            width: '320px',
                            background: 'var(--color-light-bg-primary)'
                        }}
                    >
                            <DayOfMonthPickerDesktop
                                value={value}
                                onChange={setValue}
                            />
                    </div>
                );
            } else {
                return (
                    <>
                        <Button onClick={() => setOpen(true)}>Открыть календарь</Button>
                        <DayOfMonthPickerMobile
                            onClose={() => setOpen(false)}
                            open={open}
                            value={value}
                            onChange={setValue}
                        />
                    </>
                );
            }
        };
        return renderContent();
    })}

</Story>

{/* Docs */}

<ComponentHeader
    name='DayOfMonthPicker'
    version={packageJson.version}
    package='@alfalab/core-components/day-of-month-picker'
    design='https://www.figma.com/file/3pt8Rutwb6nkAYErTVO86x/04-—-Me2Me-Pull?type=design&node-id=3821-319784&t=g4KiPjK7K3za7h8P-0'
    children='Компонент для выбора числа месяца'
/>

<Tabs
    description={<Description />}
    development={<Development />}
    changelog={<Markdown>{Changelog}</Markdown>}
/>
