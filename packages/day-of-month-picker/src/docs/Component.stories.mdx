import { Meta, Story, Markdown } from '@storybook/addon-docs';
import { select, boolean, text } from '@storybook/addon-knobs';
import { ComponentHeader, Tabs } from 'storybook/blocks';
import { DayOfMonthPicker } from '@alfalab/core-components-day-of-month-picker';
import { DayOfMonthPickerMobile } from '../components/day-of-month-picker-mobile';

import packageJson from '../../package.json';
import Changelog from '../../CHANGELOG.md?raw';
import Description from './description.mdx';
import Development from './development.mdx';
import { DayOfMonthPickerDesktop } from '../Component.desktop';
import { createElement, useState } from 'react';

<Meta title='Components/DayOfMonthPicker' component={DayOfMonthPicker} id='DayOfMonthPicker' />

{/* Canvas */}

<Story name='DayOfMonthPicker'>
    {createElement(() => {
        const [value, setValue] = useState();
        const device = select('device', ['desktop', 'mobile'], 'desktop');
        const renderContent = () => {
            return (
                <div
                    style={{
                        width: '500px',
                        background: 'var(--color-light-bg-primary)',
                    }}
                >
                    {device === 'desktop' ? (
                        <DayOfMonthPickerDesktop
                            value={value}
                            onChange={setValue}
                            responsive={true}
                            error={boolean('error', false)}
                            hint={text('hint', '')}
                        />
                    ) : (
                        <DayOfMonthPickerMobile
                            value={value}
                            onChange={setValue}
                            responsive={true}
                            error={boolean('error', false)}
                            hint={text('hint', '')}
                        />
                    )}
                </div>
            );
        };
        return renderContent();
    })}
</Story>

{/* Docs */}

<ComponentHeader
    name='DayOfMonthPicker'
    version={packageJson.version}
    package='@alfalab/core-components/day-of-month-picker'
    design='https://www.figma.com/file/3pt8Rutwb6nkAYErTVO86x/04-%E2%80%94-Me2Me-Pull?type=design&node-id=4149-486297&t=AWGZzaCRdegaVxqb-4'
    children='Компонент для выбора дня месяца'
/>

<Tabs
    description={<Description />}
    development={<Development />}
    changelog={<Markdown>{Changelog}</Markdown>}
/>
