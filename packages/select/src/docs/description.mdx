## Анимация

Список селекта с единичным выбором закрывается сразу после выбора одного из значений.

```jsx live mobileHeight={640}
const OPTIONS = [
            {
                key: '1',
                label: "Группа 1",
                options: [
                    { key: "407088103003214636781", content: "Валютный счёт $ ··6781", value: "USD ··6781" },
            { key: "4070181020000100593", content: "Рублёвый счёт ₽ ··0593", value: "RUB ··0593" },],
            },
            {
                key: '2',
                label: "Группа 2",
                options: [
                    { key: "407008100000000171123", content: "Рублёвый счёт ₽ ··7103", value: "RUB ··7103" },
            { key: "4081781066800168421", content: "Рублёвый счёт ₽ ··0128", value: "RUB ··0128" },]
            },
            {
                key: '3',
                label: "Группа 3",
                options: [
                    { key: "40832810700000000124", content: "Валютный счёт € ··0212", value: "EUR ··0212" },]
            },
            {
                key: '4',
                label: "Группа 4",
                options: [
                    { key: "40708810300024636124", content: "Валютный счёт $ ··6782", value: "USD ··6781" },
            { key: "40701810200000000124", content: "Рублёвый счёт ₽ ··0523", value: "RUB ··0593" },],
            },
            {
                key: '5',
                label: "Группа 5",
                options: [
                    { key: "407008100000000173213", content: "Рублёвый счёт ₽ ··7102", value: "RUB ··7103" },
            { key: "4081781066800112328", content: "Рублёвый счёт ₽ ··0122", value: "RUB ··0128" },]
            },
            {
                key: '6',
                label: "Группа 6",
                options: [
                    { key: "40832810700000000442", content: "Валютный счёт € ··0211", value: "EUR ··0212" },]
            },
            {
                key: '7',
                label: "Группа 7",
                options: [
                    { key: "4070881030002465567781", content: "Валютный счёт $ ··6783", value: "USD ··6781" },
            { key: "40701810200000000593", content: "Рублёвый счёт ₽ ··0590", value: "RUB ··0593" },],
            },
            {
                key: '8',
                label: "Группа 8",
                options: [
                    { key: "407008100000000765763", content: "Рублёвый счёт ₽ ··7100", value: "RUB ··7103" },
            { key: "4081781066800168085689", content: "Рублёвый счёт ₽ ··0120", value: "RUB ··0128" },]
            },
            {
                key: '9',
                label: "Группа 9",
                options: [
                    { key: "408328107000000006575", content: "Валютный счёт € ··0219", value: "EUR ··0212" },]
            },
            {
                key: '10',
                label: "Группа 10",
                options: [
                    { key: "40708810300024636756567", content: "Валютный счёт $ ··6788", value: "USD ··6781" },
            { key: "40701810200000000500860", content: "Рублёвый счёт ₽ ··0598", value: "RUB ··0593" },],
            },
            {
                key: '11',
                label: "Группа 11",
                options: [
                    { key: "40700810000000017102343", content: "Рублёвый счёт ₽ ··7108", value: "RUB ··7103" },
            { key: "408178106680016801624", content: "Рублёвый счёт ₽ ··0127", value: "RUB ··0128" },]
            },
            {
                key: '12',
                label: "Группа 12",
                options: [
                    { key: "40832810700000000242552", content: "Валютный счёт € ··0245", value: "EUR ··0212" },]
            },
        ]

const TreeOptgroup = ({
    label,
    children,
    search,
    selectedItems = [],
    setSelectedItems,
    options = [],
    expandControl,
    size
}) => {
    const multiple = true;

    const handleCheckboxChange = () => {
        if (selectedItems.length === options.length) {
            setSelectedItems([]);
        } else {
            setSelectedItems(options);
        }
    };


   return (
        <div style={{height: size, display: 'flex', alignItems: 'center'}}>
            { multiple ? (
        <React.Fragment>
                {expandControl}
                <Checkbox
                    label={ (
                        <Typography.Text view="primary-medium">
                            { label }
                        </Typography.Text>
                    ) }
                    checked={ selectedItems.length === options.length  && selectedItems.length > 0 }
                    onChange={ handleCheckboxChange }
                    size={24}
                    indeterminate={ selectedItems.length > 0 && selectedItems.length < options.length }
                />

        </React.Fragment>
            )
                : (
                    <Typography.Text view="primary-medium">
                        { label }
                    </Typography.Text>
                ) }
        </div>
    );
};

function Example () {
    const [selectedFirst, setSelectedFirst] = React.useState([]);



    return (
        <div style={{ width: 320 }}>
            <SelectDesktop
                allowUnselect={true}
                placeholder='Выберите элементы'
                label='Множественный выбор'
                Option={BaseOption}
                multiple={true}
                Optgroup={TreeOptgroup}
                block={true}
                // visibleOptions={12}
                {...useSelectWithApply({
                    options: OPTIONS,
                    selected: selectedFirst,
                    showSearch: true,
                    searchProps: {filterGroup: true},
                    OptionsList: TreeOptionsList,
                    onChange: ({ selectedMultiple }) => {
                        setSelectedFirst(selectedMultiple.map((option) => option.key));
                    },
                })}
            />
        </div>
    );
}
render(
    <Example />
)
//MOBILE
const OPTIONS = [
    { key: '1', content: 'Neptunium' },
    { key: '2', content: 'Plutonium' },
    { key: '3', content: 'Americium' },
    { key: '4', content: 'Curium' },
    { key: '5', content: 'Berkelium' },
    { key: '6', content: 'Californium' },
    { key: '7', content: 'Einsteinium' },
    { key: '8', content: 'Fermium' },
];

render(() => {
    const [selected, setSelected] = React.useState();

    const handleChange = ({ selected }) => {
        setSelected(selected);
    };

    return (
        <div style={{ width: '100%' }}>
            <SelectMobile
                allowUnselect={true}
                options={OPTIONS}
                placeholder='Выберите элемент'
                label='Одиночный выбор'
                Option={BaseOption}
                block={true}
                selected={selected}
                onChange={handleChange}
            />
        </div>
    );
});
```

## Accordion

Список селекта с единичным выбором закрывается сразу после выбора одного из значений.

```jsx live mobileHeight={640}
const OPTIONS = [
    {
        label: 'Группа 1',
        options: [
            {
                key: '407088103003214636781',
                content: 'Валютный счёт $ ··6781',
                value: 'USD ··6781',
            },
            { key: '4070181020000100593', content: 'Рублёвый счёт ₽ ··0593', value: 'RUB ··0593' },
        ],
    },
    {
        label: 'Группа 2',
        options: [
            {
                key: '407008100000000171123',
                content: 'Рублёвый счёт ₽ ··7103',
                value: 'RUB ··7103',
            },
            { key: '4081781066800168421', content: 'Рублёвый счёт ₽ ··0128', value: 'RUB ··0128' },
        ],
    },
    {
        label: 'Группа 3',
        options: [
            { key: '40832810700000000124', content: 'Валютный счёт € ··0212', value: 'EUR ··0212' },
        ],
    },
    {
        label: 'Группа 4',
        options: [
            { key: '40708810300024636124', content: 'Валютный счёт $ ··6782', value: 'USD ··6781' },
            { key: '40701810200000000124', content: 'Рублёвый счёт ₽ ··0523', value: 'RUB ··0593' },
        ],
    },
    {
        label: 'Группа 5',
        options: [
            {
                key: '407008100000000173213',
                content: 'Рублёвый счёт ₽ ··7102',
                value: 'RUB ··7103',
            },
            { key: '4081781066800112328', content: 'Рублёвый счёт ₽ ··0122', value: 'RUB ··0128' },
        ],
    },
    {
        label: 'Группа 6',
        options: [
            { key: '40832810700000000442', content: 'Валютный счёт € ··0211', value: 'EUR ··0212' },
        ],
    },
    {
        label: 'Группа 7',
        options: [
            {
                key: '4070881030002465567781',
                content: 'Валютный счёт $ ··6783',
                value: 'USD ··6781',
            },
            { key: '40701810200000000593', content: 'Рублёвый счёт ₽ ··0590', value: 'RUB ··0593' },
        ],
    },
    {
        label: 'Группа 8',
        options: [
            {
                key: '407008100000000765763',
                content: 'Рублёвый счёт ₽ ··7100',
                value: 'RUB ··7103',
            },
            {
                key: '4081781066800168085689',
                content: 'Рублёвый счёт ₽ ··0120',
                value: 'RUB ··0128',
            },
        ],
    },
    {
        label: 'Группа 9',
        options: [
            {
                key: '408328107000000006575',
                content: 'Валютный счёт € ··0219',
                value: 'EUR ··0212',
            },
        ],
    },
    {
        label: 'Группа 10',
        options: [
            {
                key: '40708810300024636756567',
                content: 'Валютный счёт $ ··6788',
                value: 'USD ··6781',
            },
            {
                key: '40701810200000000500860',
                content: 'Рублёвый счёт ₽ ··0598',
                value: 'RUB ··0593',
            },
        ],
    },
    {
        label: 'Группа 11',
        options: [
            {
                key: '40700810000000017102343',
                content: 'Рублёвый счёт ₽ ··7108',
                value: 'RUB ··7103',
            },
            {
                key: '408178106680016801624',
                content: 'Рублёвый счёт ₽ ··0127',
                value: 'RUB ··0128',
            },
        ],
    },
    {
        label: 'Группа 12',
        options: [
            {
                key: '40832810700000000242552',
                content: 'Валютный счёт € ··0245',
                value: 'EUR ··0212',
            },
        ],
    },
];
const GroupedOption2 = ({
    label,
    children,
    search,
    selectedItems = [],
    setSelectedItems,
    options = [],
    size,
}) => {
    const multiple = true;
    const [open, setOpen] = React.useState(false);
    React.useEffect(() => {
        if (search === undefined) {
            return;
        }
        if (!search) {
            setOpen(false);
        }
        if (search) {
            setOpen(true);
        }
    }, [search]);
    const handleExpandChange = () => {
        setOpen(!open);
    };
    const handleCheckboxChange = () => {
        if (selectedItems.length === options.length) {
            setSelectedItems([]);
        } else {
            setSelectedItems(options);
        }
    };
    const header = (
        <div style={{height: size, display: 'flex', alignItems: 'center'}}>
            {multiple ? (
                <Checkbox
                    label={<Typography.Text view='primary-medium'>{label}</Typography.Text>}
                    checked={selectedItems.length === options.length && selectedItems.length > 0}
                    onChange={handleCheckboxChange}
                    size={24}
                    indeterminate={
                        selectedItems.length > 0 && selectedItems.length < options.length
                    }
                />
            ) : (
                <Typography.Text view='primary-medium'>{label}</Typography.Text>
            )}
        </div>
    );

    return (
        <Accordion
            controlPosition='start'
            expanded={open}
            onExpandedChange={handleExpandChange}
            header={header}
        >
            {children}
        </Accordion>
    );
};
function Example() {
    const [selectedFirst, setSelectedFirst] = React.useState([]);
    return (
        <div style={{ width: 320 }}>
            <SelectDesktop
                allowUnselect={true}
                placeholder='Выберите элементы'
                label='Множественный выбор'
                Option={BaseOption}
                multiple={true}
                Optgroup={GroupedOption2}
                block={true}
                limitDynamicOptionGroupSize={true}
                {...useSelectWithApply({
                    options: OPTIONS,
                    selected: selectedFirst,
                    showSearch: true,
                    OptionsList: OptionsList,
                    onChange: ({ selectedMultiple }) => {
                        setSelectedFirst(selectedMultiple.map((option) => option.key));
                    },
                })}
            />
        </div>
    );
}
render(<Example />);
//MOBILE
const OPTIONS = [
    { key: '1', content: 'Neptunium' },
    { key: '2', content: 'Plutonium' },
    { key: '3', content: 'Americium' },
    { key: '4', content: 'Curium' },
    { key: '5', content: 'Berkelium' },
    { key: '6', content: 'Californium' },
    { key: '7', content: 'Einsteinium' },
    { key: '8', content: 'Fermium' },
];

render(() => {
    const [selected, setSelected] = React.useState();

    const handleChange = ({ selected }) => {
        setSelected(selected);
    };

    return (
        <div style={{ width: '100%' }}>
            <SelectMobile
                allowUnselect={true}
                options={OPTIONS}
                placeholder='Выберите элемент'
                label='Одиночный выбор'
                Option={BaseOption}
                block={true}
                selected={selected}
                onChange={handleChange}
            />
        </div>
    );
});
```
