## Типы файлов

Для разных типов файлов можно использовать различные иконки.

```jsx live mobileHeight={500}
render(() => {
    const radioButtons = [
        'Нет файла',
        'Docx',
        'PDF',
        'Xls',
        '1C',
        'Img',
        'Другой тип',
        'Несколько файлов',
    ];

    const [status, setStatus] = React.useState('INITIAL');
    const [title, setTitle] = React.useState(radioButtons[0]);
    const [checked, setChecked] = React.useState(0);

    const handleChange = (index) => () => {
        setChecked(index);
        setStatus(index === 0 ? 'INITIAL' : 'SUCCESS');
        setTitle(radioButtons[index]);
    };

    const isImg = radioButtons[checked] === 'Img';

    return (
        <React.Fragment>
            <FileUploadItem
                title={title}
                subtitle='Нет файла'
                uploadStatus={status}
                {...(isImg && { imageUrl: './images/gagarin_yu_a.png' })}
            >
                <FileUploadItem.LeftAddon />
                <FileUploadItem.Content />
                <FileUploadItem.RightAddon />
            </FileUploadItem>
            <Gap size={20} />
            Контент
            <Gap size={12} />
            {radioButtons.map((button, index) => (
                <React.Fragment>
                    <Radio
                        key={button}
                        block={true}
                        size={24}
                        onChange={handleChange(index)}
                        checked={checked === index}
                        label={button}
                    />
                    <Gap size={12} />
                </React.Fragment>
            ))}
        </React.Fragment>
    );
});
```

## Загрузка файла

Результатом загрузки может быть как успех, так и ошибка.

```jsx live mobileHeight={500}
render(() => {
    const [status, setStatus] = React.useState('INITIAL');
    const [title, setTitle] = React.useState('Прикрепите файл');
    const [subtitle, setSubtitle] = React.useState('Нет файла');
    const [progressBar, setProgressBar] = React.useState(0);
    const [error, setError] = React.useState('');

    const distance = 360;
    const duration = 1000;
    let startAnimation = null;

    const handleSuccessClick = () => {
        setError('');
        setProgressBar(0);
        setStatus('UPLOADING');
        setTitle('Пример.docx');
        requestAnimationFrame(function measure(timestamp) {
            if (!startAnimation) {
                startAnimation = timestamp;
            }

            const progress = (timestamp - startAnimation) / duration;
            const progressValue = progress * distance;
            setProgressBar(progressValue);

            if (progress < 1) {
                return requestAnimationFrame(measure);
            }
            setStatus('SUCCESS');
        });
    };

    const handleError = () => {
        setStatus('ERROR');
        setError('Описание первой ошибки');
    };

    const handleMultiError = () => {
        setStatus('ERROR');
        setError(['Описание первой ошибки', 'Описание второй ошибки']);
    };

    return (
        <React.Fragment>
            <FileUploadItem
                title={title}
                subtitle={subtitle}
                uploadStatus={status}
                progressBar={progressBar}
                uploadDate='22.07.2024'
                size={2097152} // 2mb
                error={error}
            >
                <FileUploadItem.LeftAddon />
                <FileUploadItem.Content />
                <FileUploadItem.RightAddon />
            </FileUploadItem>
            <Gap size={20} />
            <div>
                <Button size={32} onClick={handleSuccessClick}>
                    Успех
                </Button>
                <Gap size={8} direction='horizontal' />
                <Button size={32} onClick={handleError}>
                    Ошибка
                </Button>
                <Gap size={8} direction='horizontal' />
                <Button size={32} onClick={handleMultiError}>
                    Несколько ошибок
                </Button>
            </div>
        </React.Fragment>
    );
});
```

## Примеры использования

Использование в качестве кнопки для прикрепления файла. Прогресс загрузки файла может отображаться самой кнопкой. Такой подход хорошо подходит, когда нужно загрузить один файл.

```jsx live mobileHeight={500}
render(() => {
    const [status, setStatus] = React.useState('INITIAL');
    const [title, setTitle] = React.useState('Прикрепите файл');
    const [size, setSize] = React.useState(0);
    const [imageUrl, setImageUrl] = React.useState(null);
    const [isImage, setIsImage] = React.useState(false);

    const handleFileChange = (e) => {
        const file = e.target.files[0];
        setStatus('SUCCESS');
        setTitle(file.name);
        setSize(file.size);
        setImageUrl('');

        // если тип фала image, добавляем картинку как иконку
        if (file && file.type.includes('image')) {
            setIsImage(true);
            const reader = new FileReader();

            reader.onloadend = () => {
                setImageUrl(reader.result);
            };

            reader.readAsDataURL(file);
        }
    };

    return (
        <React.Fragment>
            <input
                type='file'
                id='file-upload-item-id'
                onChange={handleFileChange}
                style={{ display: 'none' }}
            />
            <label htmlFor='file-upload-item-id'>
                <FileUploadItem
                    title={title}
                    subtitle='Нет файла'
                    uploadStatus={status}
                    uploadDate={new Date().toLocaleDateString()}
                    size={size}
                    {...(isImage && { imageUrl })}
                >
                    <FileUploadItem.LeftAddon />
                    <FileUploadItem.Content />
                    <FileUploadItem.RightAddon />
                </FileUploadItem>
            </label>
        </React.Fragment>
    );
});
```

Использование в качестве элемента списка файлов. Здесь, прогресс загрузки отображает не кнопка, а отдельный элемент, который появляется после выбора файла. Такой подход хорошо подходит, когда нужно загрузить несколько файлов.

```jsx live mobileHeight={500}
render(() => {
    const label_ref_1 = React.useRef(null);
    const label_ref_2 = React.useRef(null);
    const label_ref_3 = React.useRef(null);

    const [list, setList] = React.useState([
        {
            id: 1,
            title: 'Прикрепите файл',
            status: 'INITIAL',
            size: 0,
            display: 'none',
            imageUrl: '',
        },
        {
            id: 2,
            title: 'Прикрепите файл',
            status: 'INITIAL',
            size: 0,
            display: 'none',
            imageUrl: '',
        },
        {
            id: 3,
            title: 'Прикрепите файл',
            status: 'INITIAL',
            size: 0,
            display: 'none',
            imageUrl: '',
        },
    ]);

    const refList = [label_ref_1, label_ref_2, label_ref_3];

    const handleFileChange = (index) => (e) => {
        const file = e.target.files[0];

        if (file && file.type.includes('image')) {
            const reader = new FileReader();

            reader.onloadend = () => {
                setList((prevList) =>
                    prevList.map((item) =>
                        item.id === index
                            ? {
                                  ...item,
                                  imageUrl: reader.result,
                              }
                            : item,
                    ),
                );
            };

            reader.readAsDataURL(file);
        }

        setList((prevList) =>
            prevList.map((item) =>
                item.id === index
                    ? {
                          ...item,
                          display: 'block',
                          status: 'SUCCESS',
                          title: file.name,
                          size: file.size,
                          imageUrl: '',
                      }
                    : item,
            ),
        );
    };

    const handlePickerClick = () => {
        const id = list.find((item) => item.display === 'none').id;
        refList[id - 1].current.click();
    };

    return (
        <React.Fragment>
            {list.map((listItem) => {
                return (
                    <label
                        htmlFor={`file-upload-item-id-${listItem.id}`}
                        ref={refList[listItem.id - 1]}
                        {...(list.find((item) => item.id === 1) && {
                            style: { display: list[listItem.id - 1].display },
                        })}
                    >
                        <input
                            type='file'
                            id={`file-upload-item-id-${listItem.id}`}
                            onChange={handleFileChange(listItem.id)}
                            style={{ display: 'none' }}
                        />
                        <FileUploadItem
                            title={list[listItem.id - 1].title}
                            uploadStatus={list[listItem.id - 1].status}
                            uploadDate={new Date().toLocaleDateString()}
                            size={list[listItem.id - 1].size}
                            imageUrl={list[listItem.id - 1].imageUrl}
                        >
                            <FileUploadItem.LeftAddon />
                            <FileUploadItem.Content />
                            <FileUploadItem.RightAddon />
                        </FileUploadItem>
                        <Gap size={20} />
                    </label>
                );
            })}

            <div onClick={handlePickerClick}>
                <FileUploadItem title='Прикрепите файл' uploadStatus='INITIAL'>
                    <FileUploadItem.LeftAddon />
                    <FileUploadItem.Content />
                    <FileUploadItem.RightAddon />
                </FileUploadItem>
            </div>
        </React.Fragment>
    );
});
```

## Кастомизация

Каждый слот компонента может быть кастомизирован.

```jsx live mobileHeight={500}
render(() => {
    const commonStyles = {
        height: 48,
        border: '1px dashed var(--color-light-status-info)',
        borderRadius: '8px',
        backgroundColor: 'var(--color-light-status-muted-alt-info)',
    };

    const leftAddonStyles = {
        width: 48,
        ...commonStyles,
    };

    const contentStyles = {
        width: 232,
        ...commonStyles,
    };

    const rightAddonStyles = {
        width: 80,
        ...commonStyles,
    };

    return (
        <FileUploadItem>
            <div style={leftAddonStyles}></div>
            <div style={contentStyles}></div>
            <div style={rightAddonStyles}></div>
        </FileUploadItem>
    );
});
```
