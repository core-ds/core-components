## Типы файлов

Для разных типов файлов можно использовать различные иконки.

```jsx live mobileHeight={500}
render(() => {
    const radioButtons = [
        { title: 'Нет файла', extension: 'Нет файла' },
        { title: 'Пример.docx', extension: 'Docx' },
        { title: 'Пример.pdf', extension: 'PDF' },
        { title: 'Пример.xls', extension: 'Xls' },
        { title: 'Пример.1c', extension: '1C' },
        { title: 'Фото газеты.jpg', extension: 'Img' },
        { title: 'Пример.fig', extension: 'Другой тип' },
        { title: '2 файла', extension: 'Несколько файлов' },
    ];

    const [status, setStatus] = React.useState('INITIAL');
    const [title, setTitle] = React.useState('Прикрепите файл');
    const [checked, setChecked] = React.useState(0);
    const [progressBar, setProgressBar] = React.useState(0);

    const handleChange = (index) => () => {
        setChecked(index);
        setProgressBar(0);
        setTitle(radioButtons[index].title);
        setStatus(index === 0 ? 'INITIAL' : 'UPLOADED');
    };

    const handleDelete = () => {
        setChecked(0);
        setTitle(radioButtons[0].title);
        setStatus('INITIAL');
    };

    const isImg = radioButtons[checked].extension === 'Img';

    return (
        <React.Fragment>
            <div style={{ maxWidth: 360 }}>
                <FileUploadItem
                    title={title}
                    subtitle='Нет файла'
                    uploadStatus={status}
                    size={2097152} // 2mb
                    uploadDate={new Date().toLocaleDateString()}
                    progressBar={progressBar}
                    {...(checked !== 0 && { showDelete: true })}
                    {...(isImg && { imageUrl: './images/gagarin_yu_a.png' })}
                    onDelete={handleDelete}
                >
                    <FileUploadItem.LeftAddon />
                    <FileUploadItem.Content />
                    <FileUploadItem.RightAddon />
                </FileUploadItem>
            </div>
            <Gap size={20} />
            Контент
            <Gap size={12} />
            {radioButtons.map((button, index) => (
                <React.Fragment>
                    <Radio
                        key={button.title}
                        block={true}
                        size={24}
                        onChange={handleChange(index)}
                        checked={checked === index}
                        label={button.extension}
                    />
                    <Gap size={12} />
                </React.Fragment>
            ))}
        </React.Fragment>
    );
});
```

## Загрузка файла

Результатом загрузки может быть как успех, так и ошибка.

```jsx live mobileHeight={500}
render(() => {
    const [status, setStatus] = React.useState('INITIAL');
    const [title, setTitle] = React.useState('Прикрепите файл');
    const [progressBar, setProgressBar] = React.useState(0);
    const [error, setError] = React.useState('');

    const distance = 360;
    const duration = 500;
    let startAnimation = null;

    const measure = (timestamp, status) => {
        if (!startAnimation) {
            startAnimation = timestamp;
        }

        const progress = (timestamp - startAnimation) / duration;
        const progressValue = progress * distance;
        setProgressBar(progressValue);

        if (progress < 1) {
            return requestAnimationFrame((t) => measure(t, status));
        }

        if (status === 'SUCCESS') {
            setStatus(status);
        } else if (status === 'ERROR') {
            setStatus('ERROR');
            setError('Описание первой ошибки');
        } else if (status === 'MULTI_ERROR') {
            setStatus('ERROR');
            setError(['Описание первой ошибки', 'Описание второй ошибки']);
        }
    };

    const handleSuccessClick = () => {
        setError('');
        setProgressBar(0);
        setStatus('UPLOADING');
        setTitle('Пример.docx');
        requestAnimationFrame((t) => measure(t, 'SUCCESS'));
    };

    const handleError = () => {
        setProgressBar(0);
        setStatus('UPLOADING');
        requestAnimationFrame((t) => measure(t, 'ERROR'));
    };

    const handleMultiError = () => {
        setProgressBar(0);
        setStatus('UPLOADING');
        requestAnimationFrame((t) => measure(t, 'MULTI_ERROR'));
    };

    return (
        <React.Fragment>
            <FileUploadItem
                title={title}
                subtitle='Нет файла'
                uploadStatus={status}
                progressBar={progressBar}
                uploadDate='22.07.2024'
                size={2097152} // 2mb
                error={error}
            >
                <FileUploadItem.LeftAddon />
                <FileUploadItem.Content />
                <FileUploadItem.RightAddon />
            </FileUploadItem>
            <Gap size={20} />
            <div>
                <Button size={32} onClick={handleSuccessClick}>
                    Успех
                </Button>
                <Gap size={8} direction='horizontal' />
                <Button size={32} onClick={handleError}>
                    Ошибка
                </Button>
                <Gap size={8} direction='horizontal' />
                <Button size={32} onClick={handleMultiError}>
                    Несколько ошибок
                </Button>
            </div>
        </React.Fragment>
    );
});
```

## Действия с загруженным файлом

Загруженный файл можно скачать или удалить, а удалённый восстановить.

```jsx live mobileHeight={500}
render(() => {
    const [isRestore, showIsRestore] = React.useState({
        element_1: false,
        element_2: false,
    });

    const handleDelete = (element) => () => {
        showIsRestore((prev) => ({
            ...prev,
            [element]: true,
        }));
    };

    const handleRestore = (element) => () => {
                showIsRestore((prev) => ({
            ...prev,
            [element]: false,
        }));
    };

    return (
        <React.Fragment>
            <div style={{ width: 360 }}>
                <FileUploadItem
                    title='hello-world.docx'
                    size={2097152}
                    uploadDate='22.07.2024'
                    uploadStatus={'UPLOADED'}
                    showDelete={true}
                    downloadLink='./txt/hello-world.docx'
                    showRestore={isRestore.element_1}
                    onDelete={handleDelete('element_1')}
                    onRestore={handleRestore('element_1')}
                >
                    <FileUploadItem.LeftAddon />
                    <FileUploadItem.Content />
                    <FileUploadItem.RightAddon />
                </FileUploadItem>
                <Gap size={20} />
                <FileUploadItem
                    title='gagarin_yu_a.png.png'
                    size={27262976}
                    uploadDate='01.05.1998'
                    uploadStatus={'UPLOADED'}
                    showDelete={true}
                    downloadLink='./images/gagarin_yu_a.png'
                    showRestore={isRestore.element_2}
                    onDelete={handleDelete('element_2')}
                    onRestore={handleRestore('element_2')}
                    {...(!isRestore.element_2 && { imageUrl: './images/gagarin_yu_a.png' })}
                    {...(isRestore.element_2 && { customIcon: () => <DocumentImageOffMIcon /> })}
                >
                    <FileUploadItem.LeftAddon />
                    <FileUploadItem.Content />
                    <FileUploadItem.RightAddon />
                </FileUploadItem>
            </div>
        </React.Fragment>
    );
});
```

## Примеры использования

Использование в качестве кнопки для прикрепления файла. Прогресс загрузки файла может отображаться самой кнопкой. Такой подход хорошо подходит, когда нужно загрузить один файл.

```jsx live mobileHeight={500}
render(() => {
    const [status, setStatus] = React.useState('INITIAL');
    const [title, setTitle] = React.useState('Прикрепите файл');
    const [size, setSize] = React.useState(0);
    const [imageUrl, setImageUrl] = React.useState(null);
    const [isImage, setIsImage] = React.useState(false);

    const handleFileChange = (e) => {
        const file = e.target.files[0];
        setStatus('SUCCESS');
        setTitle(file.name);
        setSize(file.size);
        setImageUrl('');

        // если тип фала image, добавляем картинку как иконку
        if (file && file.type.includes('image')) {
            setIsImage(true);
            const reader = new FileReader();

            reader.onloadend = () => {
                setImageUrl(reader.result);
            };

            reader.readAsDataURL(file);
        }
    };

    return (
        <React.Fragment>
            <input
                type='file'
                id='file-upload-item-id'
                onChange={handleFileChange}
                style={{ display: 'none' }}
            />
            <label htmlFor='file-upload-item-id'>
                <FileUploadItem
                    title={title}
                    subtitle='Нет файла'
                    uploadStatus={status}
                    uploadDate={new Date().toLocaleDateString()}
                    size={size}
                    {...(isImage && { imageUrl })}
                >
                    <FileUploadItem.LeftAddon />
                    <FileUploadItem.Content />
                    <FileUploadItem.RightAddon />
                </FileUploadItem>
            </label>
        </React.Fragment>
    );
});
```

## Кастомизация

Каждый слот компонента может быть кастомизирован.

```jsx live mobileHeight={500}
render(() => {
    const commonStyles = {
        height: 48,
        border: '1px dashed var(--color-light-status-info)',
        borderRadius: '8px',
        backgroundColor: 'var(--color-light-status-muted-alt-info)',
    };

    const leftAddonStyles = {
        width: 48,
        ...commonStyles,
    };

    const contentStyles = {
        width: 232,
        ...commonStyles,
    };

    const rightAddonStyles = {
        width: 80,
        ...commonStyles,
    };

    return (
        <FileUploadItem>
            <div style={leftAddonStyles}></div>
            <div style={contentStyles}></div>
            <div style={rightAddonStyles}></div>
        </FileUploadItem>
    );
});
```
