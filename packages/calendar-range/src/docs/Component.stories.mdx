import { Meta, Story, ArgsTable } from '@storybook/addon-docs';
import { select } from '@storybook/addon-knobs';
import { ComponentHeader, Tabs } from 'storybook/blocks';
import { ModeChecker } from 'storybook/components/mode-checker';
import { CalendarRange } from '@alfalab/core-components-calendar-range';

import { CalendarRange as CalendarRangeTS } from '../Component';
import { CalendarRangePopover as CalendarRangePopoverTS } from '../views/popover';
import { CalendarRangeStatic as CalendarRangeStaticTS } from '../views/static';

import { version } from '../../package.json';
import Changelog from '../../CHANGELOG.md';
import Description from './description.mdx';
import {
    getQueryParam,
    stylesStringToObj,
} from '../../../screenshot-utils/screenshots-story/utils';

<Meta title='Components/CalendarRange' component={CalendarRange} id='CalendarRange' />

export const WRAPPER_STYLES = {
    display: 'inline-block',
    border: '1px solid var(--color-light-border-secondary)',
    borderRadius: 8,
    boxShadow: 'var(--shadow-m)',
    background: 'var(--color-light-bg-primary)',
    padding: 'var(--gap-m)',
};

<!-- Canvas -->

<Story name='CalendarRange'>
    {React.createElement(() => {
        return (
            <div style={stylesStringToObj(getQueryParam('wrapperStyles'))}>
                <div style={WRAPPER_STYLES}>
                    <ModeChecker />
                    <CalendarRange
                        defaultMonth={new Date('2022-03-01')}
                        calendarPosition={select(
                            'calendarPosition',
                            ['static', 'popover'],
                            'static',
                        )}
                    />
                </div>
            </div>
        );
    })}
</Story>

<!-- Docs -->

<ComponentHeader
    name='CalendarRange'
    version={version}
    package='@alfalab/core-components/calendar-range'
    design='https://www.figma.com/file/cdNnkh2QdxuvYLrBm4cubM/Web-%3A%3A-Core-Default-Components?node-id=7935%3A48591'
/>

```jsx
import { CalendarRange } from '@alfalab/core-components/calendar-range';
```

<Tabs
    description={<Description />}
    changelog={<Changelog />}
    props={
        <ArgsTable
            components={{
                CalendarRange: CalendarRangeTS,
                CalendarRangePopover: CalendarRangePopoverTS,
                CalendarRangeStatic: CalendarRangeStaticTS,
            }}
        />
    }
/>
