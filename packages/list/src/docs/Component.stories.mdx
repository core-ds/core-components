import { Meta, Story, Markdown } from '@storybook/addon-docs';
import { text, select } from '@storybook/addon-knobs';
import { Typography } from '@alfalab/core-components-typography';
import { ComponentHeader, Tabs } from 'storybook/blocks';
import { List } from '@alfalab/core-components-list';

import packageJson from '../../package.json';
import Description from './description.mdx';
import Development from './development.mdx';
import Changelog from '../../CHANGELOG.md?raw';
import {
    stylesStringToObj,
    getQueryParam,
} from '../../../screenshot-utils/screenshots-story/utils';

export const TAG = ['ul', 'ol'];
export const COLOR = [
    'tertiary',
    'disabled',
    'accent',
    'primary',
    'attention',
    'positive',
    'secondary',
    'tertiary-inverted',
    'primary-inverted',
    'secondary-inverted',
    'link',
    'negative',
    'static-primary-light',
    'static-secondary-light',
    'static-tertiary-light',
    'static-primary-dark',
    'static-secondary-dark',
    'static-tertiary-dark',
    'static-accent',
];

<Meta title='Components/List' component={List} id='List' />

<Story name='List'>
    {React.createElement(() => {
        const previewStyles = stylesStringToObj(getQueryParam('wrapperStyles'));
        const isPreview = Object.keys(previewStyles).length > 0;
        if (isPreview) {
            return (
                <div style={previewStyles}>
                    <List tag='ol'>
                        <List.Item>
                            <Typography.Text tag='span' view='primary-medium' color='primary'>
                                Пример элемента списка
                            </Typography.Text>
                        </List.Item>
                        <List.Item>
                            <Typography.Text tag='span' view='primary-medium' color='primary'>
                                Пример элемента списка
                            </Typography.Text>
                        </List.Item>
                        <List.Item>
                            <Typography.Text tag='span' view='primary-medium' color='primary'>
                                Пример элемента списка
                            </Typography.Text>
                        </List.Item>
                    </List>
                </div>
            );
        }
        return (
            <List
                tag={select('tag', TAG, 'ul')}
                marker={text('marker', '')}
                className={text('className', '')}
                dataTestId={text('dataTestId', '')}
                colorMarker={select('colorMarker', COLOR, 'primary')}
            >
                <List.Item caption={text('caption', '')}>
                    <Typography.Text tag='span' view='primary-medium' color='primary'>
                        Список — перечень чего-либо.
                    </Typography.Text>
                </List.Item>
                <List.Item>
                    <Typography.Text tag='span' view='primary-medium' color='primary'>
                        Список — в информатике и программировании — последовательность элементов
                        данных.
                    </Typography.Text>
                </List.Item>
                <List.Item>
                    <Typography.Text tag='span' view='primary-medium' color='primary'>
                        Список — в типографике способ оформления перечней в тексте.
                    </Typography.Text>
                </List.Item>
                <List.Item>
                    <Typography.Text tag='span' view='primary-medium' color='primary'>
                        Список — в текстологии документ, созданный в результате воспроизведения
                        рукописи (например, список в летописании) или машинописного текста
                        первоначального документа (протографа данного списка); в отличие от копии,
                        точное воспроизведение оригинала не является целью.
                    </Typography.Text>
                </List.Item>
                <List.Item>
                    <Typography.Text tag='span' view='primary-medium' color='primary'>
                        Список — в иконописи икона, представляющая собой воспроизведение почитаемой
                        иконы (протографа данного списка); в отличие от копии, не воспроизводит
                        оригинал в точности.
                    </Typography.Text>
                </List.Item>
            </List>
        );
    })}
</Story>

<ComponentHeader
    name='List'
    version={packageJson.version}
    package='@alfalab/core-components/list'
    design='https://www.figma.com/file/cdNnkh2QdxuvYLrBm4cubM/Web-%3A%3A-Core-Default-Components?node-id=367%3A26194'
    children='Компонент для создания списков.'
/>

<Tabs
    description={<Description />}
    development={<Development />}
    changelog={<Markdown>{Changelog}</Markdown>}
/>
