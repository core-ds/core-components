## Стандартные паттерны

```tsx live
render(() => {
    const [open, setOpen] = React.useState(false);
    const [value, setValue] = React.useState();

    const [firstRadioValue, setFirstRadioValue] = React.useState("single");
    const [secondRadioValue, setSecondRadioValue] = React.useState("single");
    const [thirdRadioValue, setThirdRadioValue] = React.useState("desktop");

    const { selectedFrom, selectedTo, updatePeriod } = usePeriod();

    React.useEffect(() => {
        if (secondRadioValue === 'single') {
            setValue();
        } else {
            updatePeriod();
        }
    }, [firstRadioValue, secondRadioValue, thirdRadioValue])

    const getDateString = React.useCallback((date) => {
        const day = date.getDate() < 10 ? `0${date.getDate()}` : date.getDate();
        const month = date.getMonth() + 1 < 10 ? `0${date.getMonth() + 1}` : date.getMonth() + 1;
        const year = date.getFullYear();

        return `${day}.${month}.${year}`;
    }, []);

    const selectedDate = React.useMemo(() => {
        const date = new Date(value);
        return getDateString(date);    
    }, [value])

    const selectedRange = React.useMemo(() => {
        if (selectedFrom && selectedTo) {
            const selectedFromDate = new Date(selectedFrom);
            const selectedToDate = new Date(selectedTo);
            return `${getDateString(selectedFromDate)} - ${getDateString(selectedToDate)}`;
        }
    }, [selectedFrom, selectedTo]);

    const onFirstRadioChange = React.useCallback((_, payload) => {
        setFirstRadioValue(payload.value);
    }, []);

    const onSecondRadioChange = React.useCallback((_, payload) => {
        setSecondRadioValue(payload.value);
    }, []);

    const onThirdRadioChange = React.useCallback((_, payload) => {
        setThirdRadioValue(payload.value);
    }, []);

    return (
        <Row style={{ gap: '40px' }}>
            <Col>
                {thirdRadioValue === 'desktop' ? (
                    <Calendar
                        value={value}
                        selectedFrom={selectedFrom}
                        selectedTo={selectedTo}
                        onChange={secondRadioValue === 'single' ? setValue : updatePeriod}
                        selectorView={firstRadioValue === 'single' ? 'month-only' : 'full'}
                    />
                ) : (
                    <div style={{ width: '344px' }}>
                        <Button onClick={() => setOpen(true)} style={{ margin: '15px' }}>
                            Открыть календарь
                        </Button>
                        <CalendarMobile
                            onClose={() => setOpen(false)}
                            open={open}
                            value={value}
                            selectedFrom={selectedFrom}
                            selectedTo={selectedTo}
                            onChange={secondRadioValue === 'single' ? setValue : updatePeriod}
                            selectorView='month-only'
                            yearsAmount={firstRadioValue === 'single' ? 0 : 20}
                        />
                    </div>
                )}
            </Col>
            <Col>
                <p style={{ marginBottom: '40px' }}>
                    Values: {
                        secondRadioValue === 'single' && value && selectedDate ||
                        secondRadioValue === 'range' && selectedFrom && selectedTo && selectedRange
                    }
                </p>

                <div style={{ marginBottom: '40px' }}>
                    <RadioGroup
                        label="Где находятся предполагаемые даты"
                        direction="vertical"
                        name="radioGroup"
                        onChange={onFirstRadioChange}
                        value={firstRadioValue}
                    >
                        <Radio label="В пределах одного года" value="single" />
                        <Radio label="В пределах нескольких лет" value="multiple" />
                    </RadioGroup>
                </div>

                <div style={{ marginBottom: '40px' }}>
                    <RadioGroup
                        label="Режим"
                        direction="vertical"
                        name="radioGroup"
                        onChange={onSecondRadioChange}
                        value={secondRadioValue}
                    >
                        <Radio label="Принимает одну дату" value="single" />
                        <Radio label="Принимает диапазон значений" value="range" />
                    </RadioGroup>
                </div>

                <RadioGroup
                    label="Версия"
                    direction="vertical"
                    name="radioGroup"
                    onChange={onThirdRadioChange}
                    value={thirdRadioValue}
                >
                    <Radio label="Десктопная" value="desktop" />
                    <Radio label="Мобильная" value="mobile" />
                </RadioGroup>
            </Col>
        </Row>
    );
});
```

## Скрытие выбора года и месяца

```tsx live
render(() => {
    // import startOfDay from 'date-fns/startOfDay';

    const [value, setValue] = React.useState(new Date().setMonth(6));

    const minDate = startOfDay(new Date());
    minDate.setMonth(5);

    const maxDate = startOfDay(new Date());
    maxDate.setMonth(7);

    return (
        <Calendar
            value={value}
            onChange={setValue}
            selectorView='month-only'
            minDate={minDate.getTime()}
            maxDate={maxDate.getTime()}
        />
    );
});
```

## Недоступные даты

Случается, что некоторые даты нельзя выбрать. Например, выходные или праздники.

Задать недоступные даты можно, передав массив дат в свойство `offDays`

```tsx live
render(() => {
    const [value, setValue] = React.useState();

    const offDays = [new Date().setDate(1), new Date().setDate(7), new Date().setDate(28)];

    return <Calendar value={value} onChange={setValue} offDays={offDays} />;
});
```

## Отметка о событии

К календарю могут быть привязаны события или мероприятия: запланированные платежи, даты сдачи отчётности в налоговую и т.д.

Задать события можно, передав массив дат в свойство `events`

```tsx live
render(() => {
    const [value, setValue] = React.useState();

    const events = [
        new Date().setDate(3),
        new Date().setDate(15),
        new Date().setDate(17),
        new Date().setDate(21),
    ];

    return <Calendar value={value} onChange={setValue} events={events} />;
});
```

## Выделение периода

С помощью свойств `selectedFrom` и `selectedTo` можно подсвечивать определенный период дат на календаре.

Если свойство `selectedTo` не задано, то подсвечивается период между `selectedFrom` и датой под курсором.

Компонент содержит два хука, для автоматического управления выделением:

### usePeriod

Используется для одиночных календарей:

-   Сначала выбираются обе даты, затем меняется та, которая ближе к одному из концов выделения.
-   Клик по выбранной дате снимает с нее выделение

```tsx live
render(() => {
    // import { usePeriod } from '@alfalab/core-components/calendar';

    const { selectedFrom, selectedTo, updatePeriod } = usePeriod();

    React.useEffect(() => {
        console.log('period', selectedFrom, selectedTo);
    }, [selectedFrom, selectedTo]);

    return <Calendar selectedFrom={selectedFrom} selectedTo={selectedTo} onChange={updatePeriod} />;
});
```

### usePeriodWithReset

- Каждое третье нажатие начинает выделение сначала

```tsx live
render(() => {
    // import { usePeriodWithReset } from '@alfalab/core-components/calendar';

    const { selectedFrom, selectedTo, updatePeriod } = usePeriodWithReset();

    React.useEffect(() => {
        console.log('period', selectedFrom, selectedTo);
    }, [selectedFrom, selectedTo]);

    return <Calendar selectedFrom={selectedFrom} selectedTo={selectedTo} onChange={updatePeriod} />;
});
```

## PeriodSlider

`PeriodSlider` представляет из себя шапку календаря, которую можно использовать отдельно.

С помощью компонента можно смещать выбранный период назад и вперед.

```tsx live
render(() => {
    const [values, setValues] = React.useState({
        value: new Date(),
        valueFrom: new Date(),
        valueTo: new Date(),
    });

    const handler = (event, newValues) => setValues(newValues);

    return (
        <div style={{ width: 500 }}>
            <p>
                <small style={{ marginRight: '16px' }}>
                    Дата начала: {format(values.valueFrom, DATE_FORMAT)}
                </small>
                <small>Дата конца: {format(values.valueTo, DATE_FORMAT)}</small>
            </p>

            <br />

            <PeriodSlider
                value={values.value}
                periodType='year'
                onPrevArrowClick={handler}
                onNextArrowClick={handler}
            />

            <br />

            <PeriodSlider
                value={values.value}
                periodType='quarter'
                onPrevArrowClick={handler}
                onNextArrowClick={handler}
            />

            <br />

            <PeriodSlider
                value={values.value}
                periodType='month'
                onPrevArrowClick={handler}
                onNextArrowClick={handler}
            />

            <br />

            <PeriodSlider
                value={values.value}
                periodType='day'
                onPrevArrowClick={handler}
                onNextArrowClick={handler}
            />

            <br />

            <PeriodSlider
                periodType='day'
                onPrevArrowClick={handler}
                onNextArrowClick={handler}
            />
        </div>
    );
});
```
